# 🚀 راهنمای سریع: تنظیم خودکار دامنه API

## خلاصه

سامانه به صورت **کاملاً خودکار** آدرس API را شناسایی می‌کند. هیچ تنظیمی لازم نیست!

---

## ✅ چگونه کار می‌کند؟

وقتی سامانه را روی هر دامنه‌ای نصب می‌کنید:

### مثال ۱: دامنه اصلی
```
🌐 دامنه شما: elevatorid.ir
🔗 API تشخیص داده شده: https://api.elevatorid.ir
```

### مثال ۲: دامنه دیگر
```
🌐 دامنه شما: example.com
🔗 API تشخیص داده شده: https://api.example.com
```

### مثال ۳: توسعه محلی
```
🌐 دامنه شما: localhost
🔗 API تشخیص داده شده: http://localhost:3000
```

---

## 📋 پیش‌نیازها

فقط **یک** کار باید انجام دهید:

### تنظیم Subdomain در DNS

باید یک **A Record** یا **CNAME** برای `api.` در DNS دامنه خود ایجاد کنید:

| Type | Name | Value |
|------|------|-------|
| A | api | IP سرور API شما |
| یا | | |
| CNAME | api | your-api-server.com |

**مثال برای elevatorid.ir:**
```
Type: A
Name: api
Value: 5.78.xxx.xxx (IP سرور)
```

---

## 🎯 بدون نیاز به تنظیم!

بعد از راه‌اندازی DNS:

✅ سامانه روی **هر دامنه‌ای** که نصب شود، خودکار کار می‌کند  
✅ نیازی به تغییر فایل‌های کانفیگ نیست  
✅ نیازی به rebuild کردن نیست  
✅ فقط فایل‌های build شده را کپی کنید

---

## 🔍 بررسی تنظیمات

### از طریق Browser Console:

```javascript
// باز کردن Developer Tools (F12)
// رفتن به Tab Console
// تایپ و اجرای دستورات زیر:

// مشاهده دامنه فعلی
console.log(window.location.hostname);

// مشاهده API تشخیص داده شده
import('./config/api.config.js').then(m => {
  console.log('API URL:', m.getAPIBaseURL());
});
```

### از طریق رابط کاربری:

1. وارد پنل مدیریت شوید
2. به بخش **تنظیمات API** بروید
3. محیط فعلی را مشاهده کنید (باید **خودکار** باشد)
4. دکمه **بررسی اتصال** را بزنید

---

## ⚙️ تغییر دستی (اختیاری)

اگر نیاز دارید به صورت دستی API را تغییر دهید:

### گزینه ۱: از طریق رابط کاربری

1. تنظیمات API
2. انتخاب محیط مورد نظر:
   - **خودکار** (پیشنهادی)
   - سرور اصلی
   - سرور تست
   - سفارشی

### گزینه ۲: از طریق کد

```typescript
import { apiConfig } from './config/api.config';

// بازگشت به حالت خودکار
apiConfig.setEnvironment('auto');

// استفاده از آدرس ثابت
apiConfig.setCustomURL('https://my-custom-api.com', 'v1');
```

---

## 🐛 عیب‌یابی

### مشکل: API پیدا نمیشه

**راه‌حل:**

1. بررسی DNS:
```bash
# در Terminal/CMD
ping api.yourdomain.com
```

2. بررسی در مرورگر:
```
باز کردن: https://api.yourdomain.com/v1/health
```

3. بررسی Console:
```javascript
// F12 -> Console
console.log(window.location.hostname);
```

### مشکل: خطای CORS

**راه‌حل:**

سرور API باید دامنه شما را در CORS Whitelist داشته باشد:

```javascript
// در سرور API (مثال Node.js/Express):
app.use(cors({
  origin: [
    'https://yourdomain.com',
    'https://www.yourdomain.com'
  ]
}));
```

### مشکل: در localhost کار نمی‌کنه

**راه‌حل:**

سیستم به صورت خودکار به `http://localhost:3000` متصل میشه.  
مطمئن شوید:
- سرور API روی پورت 3000 در حال اجرا است
- یا محیط را به **سفارشی** تغییر دهید و پورت خودتان را وارد کنید

---

## 📞 پشتیبانی

**اتحادیه کشوری آسانسور و پله برقی و خدمات وابسته**

- 📧 ایمیل: support@elevatorid.ir
- 📱 تلفن: 021-12345678
- 🌐 وب‌سایت: https://elevatorid.ir

---

## ✨ نکات طلایی

🌟 **حالت پیش‌فرض خودکار است** - نیازی به کاری نیست!

🌟 **فقط DNS را تنظیم کنید** - بقیه خودکار است

🌟 **روی هر دامنه‌ای کار می‌کند** - بدون نیاز به تغییر کد

🌟 **برای production آماده است** - امن و بهینه

---

**آخرین بروزرسانی:** 2024/01/19  
**نسخه:** 2.0.0
