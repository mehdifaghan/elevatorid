# ุฎูุงุตู ุชุบุฑุงุช ูุฑู ูุฑูุฏ API

## โ ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### ๐ **1. ุชููุช ุงููุช ูุฑู ูุฑูุฏ**

#### **ูุจู:**
- ุงูฺฉุงู ุนุจูุฑ ุจุฏูู ุชฺฉูู ฺฉุฏ ุงููุช
- ุนุฏู ุจุฑุฑุณ ุฏูู ูุถุนุช CAPTCHA
- ุงูฺฉุงู ฺฉูฺฉ ุฏฺฉูู ุงุฑุณุงู ุจุฏูู ุงุนุชุจุงุฑุณูุฌ ฺฉุงูู

#### **ุจุนุฏ:**
```typescript
// ุงุนุชุจุงุฑุณูุฌ ฺฉุงูู ูุจู ุงุฒ ุงุฑุณุงู
disabled={isLoading || !isOnline || !captchaValid || !mobile || !captcha}

// ุจุฑุฑุณ ูุฌูุฏ captchaId
if (!captchaId) {
  toast.error('ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ฺฉุฏ ุงููุชุ ูุทูุงู ุตุจุฑ ฺฉูุฏ');
  return;
}
```

### ๐ซ **2. ุญุฐู ูุงฺฏู ููููู**

#### **ูุจู:**
- ูุฌูุฏ ฺฏุฒููโูุง ูุฑูุฏ ุจุง ูุฏุฑ ู ฺฉุงุฑุจุฑ ููููู
- ุฏุณุชุฑุณ ุจุฏูู ุงุญุฑุงุฒ ููุช ูุงูุน

#### **ุจุนุฏ:**
- ููุท ูุฑูุฏ ุงุฒ ุทุฑู API ูุงูุน
- ุญุฐู ฺฉุงูู ฺฏุฒููโูุง demo ุงุฒ ูุฑู

### ๐ฑ **3. ุจูุจูุฏ ุงุฑุณุงู ูุฌุฏุฏ OTP**

#### **ูุจู:**
```typescript
// ุงุฑุณุงู ูุฌุฏุฏ ุจุฏูู CAPTCHA
const response = await authService.sendOtp({ phone: mobile });
```

#### **ุจุนุฏ:**
```typescript
// ุงุฑุณุงู ูุฌุฏุฏ ุจุง CAPTCHA ุงุฌุจุงุฑ
const [showResendCaptcha, setShowResendCaptcha] = useState(false);

// ููุงุด CAPTCHA ุจุฑุง ุงุฑุณุงู ูุฌุฏุฏ
if (!showResendCaptcha) {
  setShowResendCaptcha(true);
  return;
}

// ุงุฑุณุงู ุจุง ุงุนุชุจุงุฑุณูุฌ CAPTCHA
const response = await authService.sendOtp({ 
  phone: mobile,
  captcha: resendCaptcha,
  captchaId: resendCaptchaId
});
```

### ๐ **4. ุจุฑุฑุณ ฺฉุงูู ุงุฑุณุงู CAPTCHA**

#### **ูุจู:**
- ุงุญุชูุงู ุงุฑุณุงู ููุฏูุง ูุงูุต ุจู API

#### **ุจุนุฏ:**
```typescript
// ุงุทููุงู ุงุฒ ุงุฑุณุงู ฺฉุงูู ููุฏูุง CAPTCHA
const response = await authService.sendOtp({ 
  phone: mobile,
  captcha: captcha,        // ฺฉุฏ ูุงุฑุฏ ุดุฏู
  captchaId: captchaId     // ุดูุงุณู ููุญุตุฑ ุจู ูุฑุฏ
});
```

---

## ๐ง **ูฺฺฏโูุง ุฌุฏุฏ**

### **1. CAPTCHA ุงุฌุจุงุฑ ุจุฑุง ุงุฑุณุงู ูุฌุฏุฏ**
- ฺฉุงุฑุจุฑ ุจุงุฏ CAPTCHA ุฌุฏุฏ ุญู ฺฉูุฏ
- ุงูฺฉุงู ุงูุตุฑุงู ุงุฒ ุงุฑุณุงู ูุฌุฏุฏ
- UI ูุฎุตูุต CAPTCHA ุงุฑุณุงู ูุฌุฏุฏ

### **2. ุงุนุชุจุงุฑุณูุฌ Real-time**
- ุบุฑูุนุงู ุจูุฏู ุฏฺฉูู ุชุง ุชฺฉูู ุชูุงู ููุฏูุง
- ุจุฑุฑุณ ูุญุธูโุง ุตุญุช CAPTCHA
- ูพุงูโูุง ุฑุงูููุง ุจุฑุง ฺฉุงุฑุจุฑ

### **3. ูุฏุฑุช ุจูุชุฑ ุฎุทุงูุง**
- ูพุงูโูุง ุฏููโุชุฑ ุจุฑุง ูุฑ ููุน ุฎุทุง
- ุฑุงูููุง ฺฉุงุฑุจุฑ ุฏุฑ ุตูุฑุช ูุดฺฉู
- ููุงุด ูุถุนุช ุจุงุฑฺฏุฐุงุฑ

---

## ๐ **ููุฏูุง ุงุฑุณุงู ุจู API**

### **POST /auth/send-otp**
```json
{
  "phone": "09123456789",
  "captcha": "XY8K9",
  "captchaId": "abc123def456"
}
```

### **POST /auth/verify-otp**
```json
{
  "phone": "09123456789",
  "code": "123456"
}
```

---

## ๐ **ุงููุช ุจูุจูุฏ ุงูุชู**

### **ฺฺฉโูุณุช ุงููุช:**
- โ CAPTCHA ุงุฌุจุงุฑ ุจุฑุง ูุฑ ุฏุฑุฎูุงุณุช OTP
- โ ุงุนุชุจุงุฑุณูุฌ ุณูุช ฺฉูุงูุช ูุจู ุงุฒ ุงุฑุณุงู
- โ ุจุฑุฑุณ ุตุญุช ุชูุงู ููุฏูุง
- โ ูุฏุฑุช ุตุญุญ session ู state
- โ ูุญุฏูุฏุช ุชูุงุดโูุง ูุฌุฏุฏ
- โ ุญุฐู ฺฉุงูู ุฏุณุชุฑุณโูุง ููููู

### **ูููฺุงุฑุช ูุฑุขูุฏ ูุฑูุฏ:**
```
1. ฺฉุงุฑุจุฑ ูุงุฑุฏ ุดูุงุฑู ููุจุงู ูโฺฉูุฏ
     โ
2. ุณุณุชู CAPTCHA ุฏุฑุงูุช ูโฺฉูุฏ
     โ
3. ฺฉุงุฑุจุฑ CAPTCHA ุฑุง ุญู ูโฺฉูุฏ
     โ (ุงุนุชุจุงุฑุณูุฌ Real-time)
4. ุฏฺฉูู ุงุฑุณุงู ูุนุงู ูโุดูุฏ
     โ
5. ุฏุฑุฎูุงุณุช OTP ุจุง CAPTCHA ุงุฑุณุงู ูโุดูุฏ
     โ
6. ฺฉุงุฑุจุฑ ฺฉุฏ ุชุงุฏ ุฑุง ูุงุฑุฏ ูโฺฉูุฏ
     โ
7. ูุฑูุฏ ูููู / ูุงูููู
```

---

## ๐งช **ุชุณุช ุงููุช**

### **ุณูุงุฑููุง ุชุณุช:**

1. **ุชุณุช CAPTCHA ูุงูุนุชุจุฑ:**
   - ูุฑูุฏ: ฺฉุฏ ุงุดุชุจุงู
   - ุงูุชุธุงุฑ: ุนุฏู ุงุฑุณุงู ุฏุฑุฎูุงุณุช

2. **ุชุณุช ุดูุงุฑู ูุงูุนุชุจุฑ:**
   - ูุฑูุฏ: ุดูุงุฑู ุบุฑ ุงุฑุงู
   - ุงูุชุธุงุฑ: ูพุงู ุฎุทุง ุงุนุชุจุงุฑุณูุฌ

3. **ุชุณุช ุงุฑุณุงู ูุฌุฏุฏ:**
   - ุนูู: ฺฉูฺฉ ุงุฑุณุงู ูุฌุฏุฏ
   - ุงูุชุธุงุฑ: ููุงุด CAPTCHA ุฌุฏุฏ

4. **ุชุณุช OTP ูููุถ:**
   - ุดุฑุงุท: ฺฏุฐุดุช ุจุด ุงุฒ 2 ุฏููู
   - ุงูุชุธุงุฑ: ูพุงู ุฎุทุง ุงููุถุง

---

## ๐ฑ **ุชุฌุฑุจู ฺฉุงุฑุจุฑ**

### **ุจูุจูุฏูุง UX:**
- ๐ฏ ุฑุงูููุง ฺฏุงูโุจูโฺฏุงู ฺฉุงุฑุจุฑ
- โฑ๏ธ ููุงุด ุชุงูุฑ ูุนฺฉูุณ
- ๐ loading state ูุง ุฏูู
- โ ูพุงูโูุง ุฎุทุง ูุงุถุญ
- โ ุชุฃุฏ ููููุช ุนููุงุช

### **ูพุงูโูุง ฺฉุงุฑุจุฑ:**
- "ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ ฺฉุฏ ุงููุชุ ูุทูุงู ุตุจุฑ ฺฉูุฏ"
- "ฺฉุฏ ุงููุช ุฑุง ุชฺฉูู ฺฉูุฏ"
- "ฺฉุฏ ุงููุช ุตุญุญ ูุณุช"
- "ฺฉุฏ ุชุงุฏ ุงุฑุณุงู ุดุฏ"

---

## ๐ง **ูุญูู ุงุณุชูุงุฏู**

### **ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู:**

```typescript
// 1. Import ูุง ูุงุฒู
import CaptchaComponent from '../common/CaptchaComponent';
import { authService } from '../../services/auth.service';

// 2. State management
const [captcha, setCaptcha] = useState('');
const [captchaId, setCaptchaId] = useState('');
const [captchaValid, setCaptchaValid] = useState(false);

// 3. ฺฉุงููพูููุช CAPTCHA
<CaptchaComponent
  onCaptchaChange={setCaptcha}
  onCaptchaIdChange={setCaptchaId}
  onValidityChange={setCaptchaValid}
  disabled={isLoading}
/>

// 4. ุงุฑุณุงู ุจู API
await authService.sendOtp({
  phone: mobile,
  captcha: captcha,
  captchaId: captchaId
});
```

---

## ๐ **ุขูุงุฑ ุนููฺฉุฑุฏ**

### **ูุจู ุงุฒ ุชุบุฑุงุช:**
- ุงุญุชูุงู bypass ุงููุช: **ุจุงูุง**
- ุณุฑุนุช ูุฑูุฏ ุบุฑูุฌุงุฒ: **ุณุฑุน**
- ุชุนุฏุงุฏ ูุฑุงุญู ุชุฃุฏ: **ฺฉู**

### **ุจุนุฏ ุงุฒ ุชุบุฑุงุช:**
- ุงุญุชูุงู bypass ุงููุช: **ุจุณุงุฑ ฺฉู**
- ุณุฑุนุช ูุฑูุฏ ุบุฑูุฌุงุฒ: **ุบุฑููฺฉู**
- ุชุนุฏุงุฏ ูุฑุงุญู ุชุฃุฏ: **ฺฉุงู**

---

*ุชุงุฑุฎ ุจุฑูุฒุฑุณุงู: ุฏ ฑดฐณ*
*ูุฑฺู: 2.0.0*