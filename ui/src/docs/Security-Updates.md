# ุชุบุฑุงุช ุงููุช ุณุงูุงูู

## ๐จ ูุดฺฉู ุงููุช ุดูุงุณุง ุดุฏู

### ูุดฺฉู ูุจู:
- ุฑูุชโูุง `/api/admin/*` ู `/api/user/*` **ุจุฏูู ุงุญุฑุงุฒ ููุช** ุฏุฑ ุฏุณุชุฑุณ ุจูุฏูุฏ
- ฺฉุงุฑุจุฑุงู ูโุชูุงูุณุชูุฏ ุจุฏูู ูุงุฑุฏ ฺฉุฑุฏู CAPTCHA ู OTP ูุงุฑุฏ ูพูู ุดููุฏ
- ุฏุณุชุฑุณ ุขุฒุงุฏ ุจู ุชูุงู ุนููุงุช ุงุฏูู ู ฺฉุงุฑุจุฑ

## โ ุฑุงูโุญูโูุง ุงุนูุงู ุดุฏู

### 1. **ุงุฌุงุฏ ฺฉุงููพูููุช ProtectedRoute**
```typescript
// /components/common/ProtectedRoute.tsx
export default function ProtectedRoute({ 
  children, 
  requiredRole, 
  allowedRoles 
}: ProtectedRouteProps)
```

**ูฺฺฏโูุง:**
- ุจุฑุฑุณ ูุถุนุช ุงุญุฑุงุฒ ููุช ฺฉุงุฑุจุฑ
- ฺฉูุชุฑู ููุด ฺฉุงุฑุจุฑ (admin/user)
- ูุฏุงุช ุจู ุตูุญู ูุงฺฏู ุฏุฑ ุตูุฑุช ุนุฏู ุงุญุฑุงุฒ ููุช
- ููุงุด ูพุงู ุฎุทุง ุฏุณุชุฑุณ ุจุฑุง ููุดโูุง ุบุฑูุฌุงุฒ

### 2. **ุจูโุฑูุฒุฑุณุงู App.tsx**
```typescript
// ูุจู (ุบุฑุงูู):
<Route path="/api/admin/*" element={<AdminLayout />}>

// ุจุนุฏ (ุงูู):
<Route path="/api/admin/*" element={
  <ProtectedRoute requiredRole="admin">
    <AdminLayout />
  </ProtectedRoute>
}>
```

### 3. **ุงุตูุงุญ AuthContext**
```typescript
// ุญุฐู mock authentication ุจุฑุง ุฑูุชโูุง API
const isDemoRoute = window.location.pathname.startsWith('/demo/');
// ุญุฐู ุดุฏู: || window.location.pathname.startsWith('/api/admin') || window.location.pathname.startsWith('/api/user')
```

**ุชุบุฑุงุช:**
- ุญุฐู mock user ุจุฑุง ุฑูุชโูุง `/api/admin` ู `/api/user`
- ุชููุง ุฑูุชโูุง `/demo/*` ุงุฒ mock ุงุณุชูุงุฏู ูโฺฉููุฏ
- ุงุฌุจุงุฑ ุงุณุชูุงุฏู ุงุฒ token ูุงูุน API

### 4. **ุจูุจูุฏ ูุฑุขูุฏ Login**
```typescript
// AuthContext - ุณุงุฏูโุณุงุฒ login
const login = useCallback(async (accessToken: string, refreshTokenValue?: string) => {
  setTokens(accessToken, refreshTokenValue || 'refresh-token-placeholder');
  const userData = await authService.getMe();
  const transformedUser = transformUserData(userData);
  setUser(transformedUser);
}, [transformUserData]);
```

---

## ๐ ุณุงุฎุชุงุฑ ุงููุช ุฌุฏุฏ

### **ูููฺุงุฑุช ุฏุณุชุฑุณ:**
```
ฺฉุงุฑุจุฑ ูุงุฑุฏ ุฑูุช /api/admin ุง /api/user ูโุดูุฏ
                    โ
            ProtectedRoute ุจุฑุฑุณ ูโฺฉูุฏ
                    โ
ุขุง ฺฉุงุฑุจุฑ ุงุญุฑุงุฒ ููุช ุดุฏูุ โ ุฎุฑ โ ูุฏุงุช ุจู /api/login
                    โ ุจูู
ุขุง ููุด ฺฉุงุฑุจุฑ ููุงุณุจ ุงุณุชุ โ ุฎุฑ โ ููุงุด ูพุงู ุฎุทุง ุฏุณุชุฑุณ
                    โ ุจูู
            ุงุฌุงุฒู ุฏุณุชุฑุณ ุฏุงุฏู ูโุดูุฏ
```

### **ูุฑุงุญู ุงุญุฑุงุฒ ููุช:**
1. **ูุฑูุฏ ุจู ุตูุญู ูุงฺฏู** (`/api/login`)
2. **ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุฑู ููุจุงู**
3. **ุญู ฺฉุฑุฏู CAPTCHA** (ุงุฌุจุงุฑ)
4. **ุงุฑุณุงู ุฏุฑุฎูุงุณุช OTP**
5. **ูุงุฑุฏ ฺฉุฑุฏู ฺฉุฏ 6 ุฑูู**
6. **ุชุงุฏ OTP ู ุฏุฑุงูุช Token**
7. **ุฐุฎุฑู Token ู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ**
8. **ูุฏุงุช ุจู ูพูู ููุงุณุจ**

---

## ๐ก๏ธ ุชุณุชโูุง ุงููุช

### **ุชุณุช 1: ุฏุณุชุฑุณ ูุณุชูู**
```bash
# ุชุณุช ุฏุณุชุฑุณ ุจุฏูู ุงุญุฑุงุฒ ููุช
curl -X GET "http://localhost:3000/api/admin"
# ุงูุชุธุงุฑ: ูุฏุงุช ุจู ุตูุญู ูุงฺฏู
```

### **ุชุณุช 2: Token ุบุฑูุนุชุจุฑ**
```javascript
// ูพุงฺฉ ฺฉุฑุฏู localStorage
localStorage.clear();
// ุชูุงุด ุจุฑุง ุฏุณุชุฑุณ ุจู ูพูู
window.location.href = '/api/admin';
// ุงูุชุธุงุฑ: ูุฏุงุช ุจู ุตูุญู ูุงฺฏู
```

### **ุชุณุช 3: ููุด ุบุฑูุฌุงุฒ**
```javascript
// ฺฉุงุฑุจุฑ ุจุง ููุด 'user' ุชูุงุด ุจุฑุง ุฏุณุชุฑุณ ุจู ูพูู ุงุฏูู
window.location.href = '/api/admin';
// ุงูุชุธุงุฑ: ููุงุด ูพุงู "ุฏุณุชุฑุณ ุบุฑูุฌุงุฒ"
```

### **ุชุณุช 4: CAPTCHA ุงุฌุจุงุฑ**
```javascript
// ุชูุงุด ุจุฑุง ุงุฑุณุงู ุฏุฑุฎูุงุณุช ุจุฏูู CAPTCHA
// ุงูุชุธุงุฑ: ุบุฑูุนุงู ุจูุฏู ุฏฺฉูู ุงุฑุณุงู
```

### **ุชุณุช 5: OTP ุงุฌุจุงุฑ**
```javascript
// ุชูุงุด ุจุฑุง ุนุจูุฑ ุจุฏูู OTP ุตุญุญ
// ุงูุชุธุงุฑ: ุนุฏู ุฏุฑุงูุช Token ู ูุงูุฏู ุฏุฑ ุตูุญู OTP
```

---

## ๐ ฺฺฉโูุณุช ุงููุช

### โ **ุชฺฉูู ุดุฏู:**
- [x] ูุญุงูุธุช ุงุฒ ุฑูุชโูุง `/api/admin/*`
- [x] ูุญุงูุธุช ุงุฒ ุฑูุชโูุง `/api/user/*`
- [x] CAPTCHA ุงุฌุจุงุฑ ุฏุฑ ูุงฺฏู
- [x] OTP ุงุฌุจุงุฑ ุจุฑุง ุชุงุฏ
- [x] CAPTCHA ุงุฌุจุงุฑ ุจุฑุง ุงุฑุณุงู ูุฌุฏุฏ OTP
- [x] ุจุฑุฑุณ ููุด ฺฉุงุฑุจุฑ
- [x] ูุฏุฑุช Token ูุงูุน
- [x] ูพุงูโูุง ุฎุทุง ููุงุณุจ

### ๐ **ุฏุฑ ุญุงู ุชูุณุนู:**
- [ ] Rate limiting ุจุฑุง ุฏุฑุฎูุงุณุชโูุง ูุชุนุฏุฏ
- [ ] Logging ุนููุงุช ุงููุช
- [ ] Session timeout
- [ ] Two-factor authentication (ุงุฎุชุงุฑ)

### ๐ **ุชูุตูโูุง ุขูุฏู:**
- [ ] ูุด ฺฉุฑุฏู Tokenโูุง ุฏุฑ localStorage
- [ ] ุงุณุชูุงุฏู ุงุฒ Secure HTTP-Only Cookies
- [ ] ูพุงุฏูโุณุงุฒ CSRF protection
- [ ] Audit log ุจุฑุง ุนููุงุช ุญุณุงุณ

---

## ๐ ูุญูู ุงุณุชูุงุฏู

### **ุจุฑุง ุงุฏูู:**
1. ุฑูุชู ุจู `/api/login`
2. ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุฑู ููุจุงู
3. ุญู CAPTCHA
4. ูุงุฑุฏ ฺฉุฑุฏู OTP
5. ุฏุณุชุฑุณ ุจู `/api/admin/*`

### **ุจุฑุง ฺฉุงุฑุจุฑ:**
1. ุฑูุชู ุจู `/api/login`
2. ูุงุฑุฏ ฺฉุฑุฏู ุดูุงุฑู ููุจุงู
3. ุญู CAPTCHA
4. ูุงุฑุฏ ฺฉุฑุฏู OTP  
5. ุฏุณุชุฑุณ ุจู `/api/user/*`

### **ุจุฑุง Demo (ุจุฏูู ุงุญุฑุงุฒ ููุช):**
- `/demo/admin/*` - ููฺูุงู ุจุฏูู ุงุญุฑุงุฒ ููุช
- `/demo/user/*` - ููฺูุงู ุจุฏูู ุงุญุฑุงุฒ ููุช

---

## โ๏ธ ูฺฉุงุช ููู

### **ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู:**
- ุชูุงู ุฑูุชโูุง ุฌุฏุฏ API ุจุงุฏ ุงุฒ `ProtectedRoute` ุงุณุชูุงุฏู ฺฉููุฏ
- Tokenโูุง ุฏุฑ `localStorage` ุฐุฎุฑู ูโุดููุฏ
- ูุฑ ุชุบุฑ ุฏุฑ ุณุงุฎุชุงุฑ User ุจุงุฏ ุฏุฑ `AuthContext` ุงุนูุงู ุดูุฏ

### **ุจุฑุง ฺฉุงุฑุจุฑุงู:**
- ูฺ ุฑุงู ูุงูุจุฑ ุจุฑุง ุนุจูุฑ ุงุฒ ุงุญุฑุงุฒ ููุช ูุฌูุฏ ูุฏุงุฑุฏ
- CAPTCHA ู OTP ุงุฌุจุงุฑ ูุณุชูุฏ
- ููุด ฺฉุงุฑุจุฑ ุชุนูโฺฉููุฏู ุฏุณุชุฑุณโูุงุณุช

### **ุจุฑุง ุงููุช:**
- ุชูุงู Tokenโูุง ุงุฒ API ูุงูุน ุฏุฑุงูุช ูโุดููุฏ
- ูฺ Mock Data ุฏุฑ ุฑูุชโูุง ูุญุงูุธุช ุดุฏู ุงุณุชูุงุฏู ููโุดูุฏ
- ุฏุณุชุฑุณโูุง ุจุฑ ุงุณุงุณ ููุด ฺฉุงุฑุจุฑ ฺฉูุชุฑู ูโุดููุฏ

---

## ๐ง ูุงูโูุง ุชุบุฑ ุงูุชู

1. **`/components/common/ProtectedRoute.tsx`** - ุฌุฏุฏ
2. **`/App.tsx`** - ุงุถุงูู ุดุฏู ProtectedRoute
3. **`/contexts/AuthContext.tsx`** - ุญุฐู mock ุจุฑุง API routes
4. **`/components/api-auth/Login.tsx`** - ุจูุจูุฏ ุงุนุชุจุงุฑุณูุฌ
5. **`/components/api-auth/OTPVerification.tsx`** - CAPTCHA ุจุฑุง ุงุฑุณุงู ูุฌุฏุฏ

---

*ุชุงุฑุฎ ุงุนูุงู: ุฏ ฑดฐณ*  
*ูุถุนุช: ูุนุงู ู ุชุณุช ุดุฏู*  
*ุงูููุช: ุจุงูุง - ุงููุช ุณุณุชู*