import{r as x,j as e,a7 as ye,a9 as we,a3 as le,a6 as Ce,ab as de,ac as ie,a2 as Pe,B as k,V as se,C as A,e as $,x as W,W as ke,O as De,L as o,p as N,b as Se,c as Ie,d as Fe,o as S,M as Ee,Q as _e,H as oe,t as D,v as Te}from"./index-tH8kGzNV.js";import{T as Me,a as Re,b as ce,c as F,d as Oe,e as E}from"./table-DC3MYrD8.js";import{D as G,b as K,c as Q,d as X,e as J}from"./dialog-DAjwwShP.js";import{D as Be,a as Le,b as Ae,c as ae}from"./dropdown-menu-BKfQT_JD.js";import{u as $e,S as _,a as T,b as M,c as R,d as f}from"./select-B8NiX_r6.js";import{T as q}from"./textarea-1hTYB3HE.js";import{d as He}from"./Combination-Dzecd94B.js";import{C as Ve}from"./check-DV_4N94Y.js";import{PersianDatePicker as re}from"./PersianDatePicker-1MwY2jFT.js";import{E as Ue}from"./ElevatorRegistrationForm-C4UDbIJW.js";import{Q as qe}from"./QRCodeGenerator-DzqPO6-F.js";import{e as ze}from"./elevators.service-B-2JX4Vq.js";import{P as me}from"./plus-A2-5MgKF.js";import{C as Ge}from"./clock-BiwlPOks.js";import{S as Ke}from"./search-8LTSveb2.js";import{F as Qe}from"./folder-tree-CoiUlgID.js";import{E as Xe}from"./ellipsis-J_HkHiqq.js";import{D as Je}from"./download-BGqk_jGh.js";import"./index-DGGMjIYi.js";import"./x-B6dSK8zO.js";import"./chevron-right-B97jr1RJ.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";import"./popover-B3pW-y7H.js";import"./utils-BvTIn9cQ.js";import"./ProvinceAndCitySelector-ByNK_lw_.js";import"./iran-provinces-cities-ClUeFN4S.js";import"./copy-CIVXPvX_.js";var Z="Checkbox",[We]=ye(Z),[Ze,te]=We(Z);function Ye(a){const{__scopeCheckbox:h,checked:u,children:g,defaultChecked:r,disabled:l,form:d,name:b,onCheckedChange:m,required:y,value:w="on",internal_do_not_use_render:j}=a,[p,t]=Ce({prop:u,defaultProp:r??!1,onChange:m,caller:Z}),[i,v]=x.useState(null),[C,s]=x.useState(null),n=x.useRef(!1),P=i?!!d||!!i.closest("form"):!0,O={checked:p,disabled:l,setChecked:t,control:i,setControl:v,name:b,form:d,value:w,hasConsumerStoppedPropagationRef:n,required:y,defaultChecked:I(r)?!1:r,isFormControl:P,bubbleInput:C,setBubbleInput:s};return e.jsx(Ze,{scope:h,...O,children:es(j)?j(O):g})}var xe="CheckboxTrigger",he=x.forwardRef(({__scopeCheckbox:a,onKeyDown:h,onClick:u,...g},r)=>{const{control:l,value:d,disabled:b,checked:m,required:y,setControl:w,setChecked:j,hasConsumerStoppedPropagationRef:p,isFormControl:t,bubbleInput:i}=te(xe,a),v=de(r,w),C=x.useRef(m);return x.useEffect(()=>{const s=l?.form;if(s){const n=()=>j(C.current);return s.addEventListener("reset",n),()=>s.removeEventListener("reset",n)}},[l,j]),e.jsx(le.button,{type:"button",role:"checkbox","aria-checked":I(m)?"mixed":m,"aria-required":y,"data-state":Ne(m),"data-disabled":b?"":void 0,disabled:b,value:d,...g,ref:v,onKeyDown:ie(h,s=>{s.key==="Enter"&&s.preventDefault()}),onClick:ie(u,s=>{j(n=>I(n)?!0:!n),i&&t&&(p.current=s.isPropagationStopped(),p.current||s.stopPropagation())})})});he.displayName=xe;var ue=x.forwardRef((a,h)=>{const{__scopeCheckbox:u,name:g,checked:r,defaultChecked:l,required:d,disabled:b,value:m,onCheckedChange:y,form:w,...j}=a;return e.jsx(Ye,{__scopeCheckbox:u,checked:r,defaultChecked:l,disabled:b,required:d,onCheckedChange:y,name:g,form:w,value:m,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(he,{...j,ref:h,__scopeCheckbox:u}),p&&e.jsx(je,{__scopeCheckbox:u})]})})});ue.displayName=Z;var ge="CheckboxIndicator",pe=x.forwardRef((a,h)=>{const{__scopeCheckbox:u,forceMount:g,...r}=a,l=te(ge,u);return e.jsx(we,{present:g||I(l.checked)||l.checked===!0,children:e.jsx(le.span,{"data-state":Ne(l.checked),"data-disabled":l.disabled?"":void 0,...r,ref:h,style:{pointerEvents:"none",...a.style}})})});pe.displayName=ge;var be="CheckboxBubbleInput",je=x.forwardRef(({__scopeCheckbox:a,...h},u)=>{const{control:g,hasConsumerStoppedPropagationRef:r,checked:l,defaultChecked:d,required:b,disabled:m,name:y,value:w,form:j,bubbleInput:p,setBubbleInput:t}=te(be,a),i=de(u,t),v=$e(l),C=He(g);x.useEffect(()=>{const n=p;if(!n)return;const P=window.HTMLInputElement.prototype,B=Object.getOwnPropertyDescriptor(P,"checked").set,H=!r.current;if(v!==l&&B){const V=new Event("click",{bubbles:H});n.indeterminate=I(l),B.call(n,I(l)?!1:l),n.dispatchEvent(V)}},[p,v,l,r]);const s=x.useRef(I(l)?!1:l);return e.jsx(le.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??s.current,required:b,disabled:m,name:y,value:w,form:j,...h,tabIndex:-1,ref:i,style:{...h.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});je.displayName=be;function es(a){return typeof a=="function"}function I(a){return a==="indeterminate"}function Ne(a){return I(a)?"indeterminate":a?"checked":"unchecked"}function ss({className:a,...h}){return e.jsx(ue,{"data-slot":"checkbox",className:Pe("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),...h,children:e.jsx(pe,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:e.jsx(Ve,{className:"size-3.5"})})})}function Ts(){const[a,h]=x.useState(""),[u,g]=x.useState("all"),[r,l]=x.useState(null),[d,b]=x.useState(!1),[m,y]=x.useState([{id:"1",uid:"ELV-2024-001",buildingName:"برج میلاد",buildingType:"اداری",address:"تهران، خیابان ولیعصر، کوچه میلاد، پلاک 15",province:"تهران",city:"تهران",municipalRegion:"6",postalCode:"1234567890",buildingPermit:"BP-2024-001",registrationPlate:"RP-2024-001",installationDate:"1403/01/15",floors:12,capacity:"8 نفر - 630 کیلوگرم",motorType:"موتور کششی",status:"active",lastInspection:"1403/05/10",nextInspection:"1403/11/10",parts:[{id:"p1",name:"موتور اصلی",brand:"شیندلر",model:"VF30-S",serialNumber:"SH2023001",installationDate:"1403/01/15",warrantyExpiry:"1405/01/15",status:"working"},{id:"p2",name:"کنترلر فرکانس",brand:"زیمنس",model:"SINAMICS-G120",serialNumber:"SI2023002",installationDate:"1403/01/15",warrantyExpiry:"1405/01/15",status:"working"}],owner:{name:"احمد محمدی",phone:"09123456789",email:"ahmad@example.com"},manager:{name:"علی رضایی",phone:"09123456790",company:"شرکت مدیریت ساختمان"},installer:{name:"محسن احمدی",phone:"09123456791",company:"شرکت نصب آسانسور پارس",license:"LIC-2024-001"},createdAt:"1403/01/15",updatedAt:"1403/05/20"},{id:"2",uid:"ELV-2024-002",buildingName:"مجتمع آزادی",buildingType:"مسکونی",address:"تهران، خیابان آزادی، کوچه گلستان، پلاک 25",province:"تهران",city:"تهران",municipalRegion:"2",postalCode:"1234567891",buildingPermit:"BP-2024-002",registrationPlate:"RP-2024-002",installationDate:"1403/02/10",floors:8,capacity:"6 نفر - 450 کیلوگرم",motorType:"موتور هیدرولیک",status:"maintenance",lastInspection:"1403/04/15",nextInspection:"1403/10/15",parts:[{id:"p3",name:"پمپ هیدرولیک",brand:"کونه",model:"KH-450",serialNumber:"KH2023003",installationDate:"1403/02/10",warrantyExpiry:"1405/02/10",status:"needs_maintenance"}],owner:{name:"فاطمه کریمی",phone:"09123456792",email:"fateme@example.com"},manager:{name:"حسن موسوی",phone:"09123456793",company:"شرکت مدیریت املاک"},installer:{name:"رضا زارعی",phone:"09123456794",company:"شرکت آسانسور سازان",license:"LIC-2024-002"},createdAt:"1403/02/10",updatedAt:"1403/05/18"}]),w={active:"bg-green-100 text-green-800 border-green-300",maintenance:"bg-yellow-100 text-yellow-800 border-yellow-300",out_of_order:"bg-red-100 text-red-800 border-red-300",installing:"bg-blue-100 text-blue-800 border-blue-300"},j={active:"🟢 فعال",maintenance:"🟡 تعمیرات",out_of_order:"🔴 خراب",installing:"🔵 در حال نصب"},p=()=>({total:m.length,active:m.filter(c=>c.status==="active").length,maintenance:m.filter(c=>c.status==="maintenance").length,outOfOrder:m.filter(c=>c.status==="out_of_order").length}),t=m.filter(c=>{const L=c.buildingName.toLowerCase().includes(a.toLowerCase())||c.uid.toLowerCase().includes(a.toLowerCase())||c.address.includes(a),U=u==="all"||c.status===u;return L&&U}),i=c=>{ee(c),P(!0)},v=p(),[C,s]=x.useState(!1),[n,P]=x.useState(!1),[O,B]=x.useState(!1),[H,V]=x.useState(null),[Y,ee]=x.useState(null),[ne,z]=x.useState(!1),ve=async()=>{s(!0),await new Promise(c=>setTimeout(c,1e3)),s(!1),D.success("✅ اطلاعات بروزرسانی شد")};return e.jsxs("div",{className:"p-6 space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"مدیریت آسانسورها"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"مدیریت آسانسورهای تحت مالکیت و مشاهده شناسنامه"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(k,{onClick:ve,variant:"outline",disabled:C,className:"flex items-center gap-2",children:[e.jsx(se,{className:`w-4 h-4 ${C?"animate-spin":""}`}),"بروزرسانی"]}),e.jsxs(k,{onClick:()=>z(!0),className:"flex items-center gap-2 bg-black hover:bg-gray-800 text-white",children:[e.jsx(me,{className:"w-4 h-4"}),"ثبت آسانسور جدید"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(A,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(W,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"کل آسانسورها"}),e.jsx("p",{className:"text-xl font-bold",children:v.total})]})]})})}),e.jsx(A,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(ke,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"فعال"}),e.jsx("p",{className:"text-xl font-bold text-green-600",children:v.active})]})]})})}),e.jsx(A,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(Ge,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"در تعمیرات"}),e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:v.maintenance})]})]})})}),e.jsx(A,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(De,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"خارج از سرویس"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:v.outOfOrder})]})]})})})]}),e.jsx(A,{children:e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"جستجو"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(N,{placeholder:"جستجو بر اساس نام ساختمان، شناسه یا آدرس...",value:a,onChange:c=>h(c.target.value),className:"pr-10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{children:"وضعیت"}),e.jsxs(_,{value:u,onValueChange:c=>g(c),children:[e.jsx(T,{children:e.jsx(M,{placeholder:"همه وضعیت‌ها"})}),e.jsxs(R,{children:[e.jsx(f,{value:"all",children:"همه وضعیت‌ها"}),e.jsx(f,{value:"active",children:"فعال"}),e.jsx(f,{value:"maintenance",children:"تعمیرات"}),e.jsx(f,{value:"out_of_order",children:"خارج از سرویس"}),e.jsx(f,{value:"installing",children:"در حال نصب"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs(k,{variant:"outline",onClick:()=>{h(""),g("all")},className:"w-full",children:[e.jsx(se,{className:"w-4 h-4 ml-2"}),"پاک کردن فیلترها"]})})]})})}),e.jsxs(A,{children:[e.jsxs(Se,{children:[e.jsxs(Ie,{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"w-5 h-5"}),"فهرست آسانسورها"]}),e.jsx(Fe,{children:"مدیریت و مشاهده جزئیات آسانسورهای تحت مالکیت"})]}),e.jsxs($,{className:"p-0",children:[e.jsxs(Me,{children:[e.jsx(Re,{children:e.jsxs(ce,{children:[e.jsx(F,{children:"شناسه آسانسور"}),e.jsx(F,{children:"نام ساختمان"}),e.jsx(F,{children:"نوع ساختمان"}),e.jsx(F,{children:"موقعیت"}),e.jsx(F,{children:"وضعیت"}),e.jsx(F,{children:"آخرین بازرسی"}),e.jsx(F,{children:"عملیات"})]})}),e.jsx(Oe,{children:t.map(c=>e.jsxs(ce,{children:[e.jsx(E,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.uid}),e.jsxs("p",{className:"text-sm text-gray-500",children:["طبقات: ",c.floors]})]})}),e.jsx(E,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:c.buildingName}),e.jsx("p",{className:"text-sm text-gray-500",children:c.capacity})]})}),e.jsx(E,{children:e.jsx(S,{variant:"outline",children:c.buildingType})}),e.jsx(E,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ee,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{className:"text-sm",children:c.city})]})}),e.jsx(E,{children:e.jsx(S,{className:w[c.status],children:j[c.status]})}),e.jsx(E,{children:c.lastInspection}),e.jsx(E,{children:e.jsxs(Be,{children:[e.jsx(Le,{asChild:!0,children:e.jsx(k,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(Xe,{className:"h-4 w-4"})})}),e.jsxs(Ae,{align:"end",className:"w-48",children:[e.jsxs(ae,{onClick:()=>{l(c),b(!0)},children:[e.jsx(_e,{className:"w-4 h-4 ml-2"}),"شناسنامه آسانسور"]}),e.jsxs(ae,{onClick:()=>i(c),children:[e.jsx(oe,{className:"w-4 h-4 ml-2"}),"تغییر قطعات"]}),e.jsxs(ae,{onClick:()=>{V(c),B(!0)},children:[e.jsx(se,{className:"w-4 h-4 ml-2"}),"ثبت تعمیرات"]})]})]})})]},c.id))})]}),t.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(W,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"هیچ آسانسوری یافت نشد"})]})]})]}),d&&r&&e.jsx(G,{open:d,onOpenChange:()=>{b(!1),l(null)},children:e.jsxs(K,{className:"max-w-4xl max-h-[90vh] overflow-hidden",dir:"rtl",children:[e.jsxs(Q,{className:"text-right shrink-0",children:[e.jsx(X,{className:"text-right",children:"شناسنامه آسانسور"}),e.jsxs(J,{className:"text-right",children:["اطلاعات جامع آسانسور ",r.buildingName]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto modal-scroll-container",children:e.jsx(as,{elevator:r})})]})}),n&&Y&&e.jsx(G,{open:n,onOpenChange:()=>{P(!1),ee(null)},children:e.jsxs(K,{className:"max-w-5xl max-h-[90vh] overflow-hidden",dir:"rtl",children:[e.jsxs(Q,{className:"text-right shrink-0",children:[e.jsx(X,{className:"text-right",children:"تعویض قطعات آسانسور"}),e.jsxs(J,{className:"text-right",children:["ثبت تعویض قطعات آسانسور ",Y.buildingName]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto modal-scroll-container",children:e.jsx(rs,{elevator:Y,onClose:()=>{P(!1),ee(null)}})})]})}),O&&H&&e.jsx(G,{open:O,onOpenChange:()=>{B(!1),V(null)},children:e.jsxs(K,{className:"max-w-3xl max-h-[90vh] overflow-hidden",dir:"rtl",children:[e.jsxs(Q,{className:"text-right shrink-0",children:[e.jsx(X,{className:"text-right",children:"ثبت تعمیرات آسانسور"}),e.jsxs(J,{className:"text-right",children:["ثبت اطلاعات تعمیرات و نگهداری آسانسور ",H.buildingName]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto modal-scroll-container",children:e.jsx(ls,{elevator:H,onClose:()=>{B(!1),V(null)}})})]})}),ne&&e.jsx(G,{open:ne,onOpenChange:()=>z(!1),children:e.jsxs(K,{className:"max-w-6xl max-h-[95vh] overflow-hidden",dir:"rtl",children:[e.jsxs(Q,{className:"text-right shrink-0",children:[e.jsx(X,{className:"text-right",children:"ثبت آسانسور جدید"}),e.jsx(J,{className:"text-right",children:"ثبت اطلاعات آسانسور جدید در سامانه ملی ردیابی آسانسور"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto modal-scroll-container",children:e.jsx(Ue,{mode:"user",onClose:()=>z(!1),onSubmit:async c=>{try{const L={municipalityZone:c.municipalRegion,buildPermitNo:c.buildingPermit||"N/A",registryPlate:c.registrationPlate||"N/A",province:c.provinceName||"",city:c.cityName||"",address:c.address,postalCode:c.postalCode||"0000000000",installerCompanyId:1,parts:c.parts.map(fe=>({partId:fe.partId}))};console.log("Sending elevator data to API:",L);const U=await ze.createElevator(L);U.success&&U.data?(D.success(`✅ آسانسور جدید با شناسه ${U.data.uid} ثبت شد`),z(!1)):D.error("خطا در ثبت آسانسور")}catch(L){console.error("Error creating elevator:",L),D.error("خطا در ثبت آسانسور. لطفاً دوباره تلاش کنید.")}}})})]})})]})}function as({elevator:a}){const h={active:"bg-green-100 text-green-800 border-green-300",maintenance:"bg-yellow-100 text-yellow-800 border-yellow-300",out_of_order:"bg-red-100 text-red-800 border-red-300",installing:"bg-blue-100 text-blue-800 border-blue-300"},u={active:"🟢 فعال",maintenance:"🟡 تعمیرات",out_of_order:"🔴 خراب",installing:"🔵 در حال نصب"},g={type:"elevator_certificate",elevatorId:a.uid,buildingName:a.buildingName,verificationUrl:`https://elevatorid.ieeu.ir/verify/${a.uid}`,issuedAt:new Date().toISOString()},r=()=>{D.success("📄 شناسنامه آسانسور در حال دانلود است",{description:`فایل PDF شناسنامه آسانسور ${a.buildingName} آماده می‌باشد`,duration:4e3})},l=()=>{navigator.clipboard.writeText(g.verificationUrl),D.success("🔗 لینک کپی شد",{description:"لینک تایید شناسنامه در کلیپ‌بورد کپی شد",duration:3e3})};return e.jsxs("div",{className:"space-y-6 p-6",dir:"rtl",children:[e.jsxs("div",{className:"text-center border-b pb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"شناسنامه آسانسور"}),e.jsx("p",{className:"text-gray-600",children:"سامانه ملی ردیابی آسانسور"}),e.jsx("div",{className:"mt-4",children:e.jsxs(S,{className:"bg-blue-100 text-blue-800 border-blue-300 text-lg px-4 py-2",children:["شناسه: ",a.uid]})})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-blue-50 to-blue-100 section",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 section-title",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-bold text-blue-800",children:"اطلاعات ساختمان"})]}),e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"نام ساختمان:"}),e.jsx("span",{className:"font-medium",children:a.buildingName})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"نوع ساختمان:"}),e.jsx("span",{className:"font-medium",children:a.buildingType})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"استان:"}),e.jsx("span",{className:"font-medium",children:a.province})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"شهر:"}),e.jsx("span",{className:"font-medium",children:a.city})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"منطقه شهرداری:"}),e.jsx("span",{className:"font-medium",children:a.municipalRegion})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"کد پستی:"}),e.jsx("span",{className:"font-medium font-mono",children:a.postalCode})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"پروانه ساختمان:"}),e.jsx("span",{className:"font-medium",children:a.buildingPermit})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"پلاک ثبتی:"}),e.jsx("span",{className:"font-medium",children:a.registrationPlate})]}),e.jsxs("div",{className:"flex justify-between border-b border-blue-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"تاریخ نصب:"}),e.jsx("span",{className:"font-medium",children:a.installationDate})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-200 rounded-lg",children:[e.jsx("p",{className:"font-medium text-blue-700 mb-1",children:"آدرس کامل:"}),e.jsx("p",{className:"text-blue-800",children:a.address})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-green-50 to-green-100 section",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 section-title",children:[e.jsx(oe,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"text-lg font-bold text-green-800",children:"مشخصات فنی آسانسور"})]}),e.jsxs("div",{className:"section-content",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-green-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-800",children:a.floors}),e.jsx("div",{className:"text-sm text-green-700",children:"تعداد طبقات"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-200 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-800",children:a.capacity}),e.jsx("div",{className:"text-sm text-green-700",children:"ظرفیت بار"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-200 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-green-800",children:a.motorType}),e.jsx("div",{className:"text-sm text-green-700",children:"نوع موتور"})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between border-b border-green-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"وضعیت فعلی:"}),e.jsx(S,{className:`${h[a.status]}`,children:u[a.status]})]}),e.jsxs("div",{className:"flex justify-between border-b border-green-200 pb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"آخرین بازرسی:"}),e.jsx("span",{className:"font-medium",children:a.lastInspection})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-orange-50 to-orange-100 section",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 section-title",children:[e.jsx(Te,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"text-lg font-bold text-orange-800",children:"قطعات آسانسور"})]}),e.jsx("div",{className:"section-content",children:e.jsx("div",{className:"grid gap-4",children:a.parts.map(d=>e.jsxs("div",{className:"bg-orange-200 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600",children:"نام قطعه:"}),e.jsx("p",{className:"font-medium text-orange-800",children:d.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600",children:"برند و مدل:"}),e.jsxs("p",{className:"font-medium text-orange-800",children:[d.brand," - ",d.model]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600",children:"شماره سریال:"}),e.jsx("p",{className:"font-medium text-orange-800 font-mono",children:d.serialNumber})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600",children:"وضعیت:"}),e.jsx(S,{className:d.status==="working"?"bg-green-100 text-green-800 border-green-300":d.status==="needs_maintenance"?"bg-yellow-100 text-yellow-800 border-yellow-300":"bg-red-100 text-red-800 border-red-300",children:d.status==="working"?"✅ سالم":d.status==="needs_maintenance"?"⚠️ نیاز به تعمیر":"❌ خراب"})]})]}),e.jsxs("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600",children:"تاریخ نصب:"}),e.jsx("span",{className:"font-medium text-orange-800 mr-2",children:d.installationDate})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-orange-600",children:"انقضای گارانتی:"}),e.jsx("span",{className:"font-medium text-orange-800 mr-2",children:d.warrantyExpiry})]})]})]},d.id))})})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-purple-50 to-purple-100 section",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 section-title",children:[e.jsx(Je,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"text-lg font-bold text-purple-800",children:"کد تایید و دانلود"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 items-center",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(qe,{data:JSON.stringify(g),size:200,className:"mx-auto"}),e.jsx("p",{className:"text-sm text-purple-700 mt-2",children:"کد QR برای تایید اصالت شناسنامه"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-purple-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"لینک تایید:"}),e.jsx("p",{className:"text-sm font-mono bg-white p-2 rounded border text-purple-900 break-all",children:g.verificationUrl})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{onClick:l,variant:"outline",className:"w-full border-purple-300 text-purple-700 hover:bg-purple-50",children:"کپی لینک تایید"}),e.jsx(k,{onClick:r,className:"w-full bg-purple-600 hover:bg-purple-700 text-white",children:"دانلود شناسنامه PDF"})]})]})]})})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gradient-to-r from-gray-50 to-gray-100 section",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4 section-title",children:[e.jsx(W,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"اطلاعات تماس"})]}),e.jsx("div",{className:"section-content",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 bg-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"مالک ساختمان"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-gray-700",children:["نام: ",a.owner.name]}),e.jsxs("p",{className:"text-gray-700",children:["تلفن: ",a.owner.phone]}),e.jsxs("p",{className:"text-gray-700",children:["ایمیل: ",a.owner.email]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"مدیر ساختمان"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-gray-700",children:["نام: ",a.manager.name]}),e.jsxs("p",{className:"text-gray-700",children:["تلفن: ",a.manager.phone]}),e.jsxs("p",{className:"text-gray-700",children:["شرکت: ",a.manager.company]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 mb-2",children:"نصاب آسانسور"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{className:"text-gray-700",children:["نام: ",a.installer.name]}),e.jsxs("p",{className:"text-gray-700",children:["تلفن: ",a.installer.phone]}),e.jsxs("p",{className:"text-gray-700",children:["شرکت: ",a.installer.company]}),e.jsxs("p",{className:"text-gray-700",children:["مجوز: ",a.installer.license]})]})]})]})})]}),e.jsxs("div",{className:"text-center text-sm text-gray-500 border-t pt-4",children:[e.jsx("p",{children:"این شناسنامه توسط سامانه ملی ردیابی آسانسور صادر شده است"}),e.jsxs("p",{children:["تاریخ صدور: ",new Date().toLocaleDateString("fa-IR")]})]})]})}function rs({elevator:a,onClose:h}){const u={active:"bg-green-100 text-green-800 border-green-300",maintenance:"bg-yellow-100 text-yellow-800 border-yellow-300",out_of_order:"bg-red-100 text-red-800 border-red-300",installing:"bg-blue-100 text-blue-800 border-blue-300"},g={active:"🟢 فعال",maintenance:"🟡 تعمیرات",out_of_order:"🔴 خراب",installing:"🔵 در حال نصب"},[r,l]=x.useState({oldPartName:"",newPartName:"",oldPartBrand:"",newPartBrand:"",oldPartModel:"",newPartModel:"",oldPartSerial:"",newPartSerial:"",changeDate:"",reason:"",technicianName:"",technicianPhone:"",warranteDuration:"",cost:"",notes:"",priority:"normal"}),[d,b]=x.useState(""),m=[{value:"motor",label:"🔧 موتور و محرک",parts:["موتور اصلی","گیربکس","ترمز اضطراری","کوپلینگ"]},{value:"control",label:"⚡ سیستم کنترل",parts:["کنترلر فرکانس","برد کنترل","رله‌های اصلی","ترانسفورماتور"]},{value:"safety",label:"🛡️ سیستم ایمنی",parts:["سنسور طبقه","میکروسوئیچ درب","سنسور بار اضافی","سیستم اعلام خطر"]},{value:"cabin",label:"🏠 کابین آسانسور",parts:["دکمه‌های کابین","چراغ LED","فن کابین","آینه کابین","نرده دست"]},{value:"doors",label:"🚪 سیستم درب",parts:["موتور درب","سنسور درب","ریل درب","قفل الکترونیکی"]},{value:"cables",label:"🔗 کابل‌ها",parts:["کابل فولادی اصلی","کابل کنترل","کابل برق","کابل مسافری"]},{value:"mechanical",label:"⚙️ قطعات مکانیکی",parts:["شیو موتور","گاید ریل","کنترل وزن","سیستم تعادل"]}],y=["🔴 خرابی و عدم عملکرد","⚠️ استهلاک طبیعی","🔧 تعمیرات پیشگیرانه","📈 ارتقاء و بهبود عملکرد","🛡️ افزایش ایمنی","⚡ بهینه‌سازی مصرف انرژی","🔊 کاهش صدا و لرزش","📋 مطابقت با استاندارد","💡 سایر دلایل"],w=()=>m.find(i=>i.value===d)?{name:"موتور اصلی",brand:"شیندلر",model:"VF30-S",serial:"SH2023001",installDate:"1402/03/15"}:null,j=t=>{if(t.preventDefault(),!d||!r.newPartName||!r.changeDate||!r.reason){D.error("خطا در اعتبارسنجی",{description:"لطفاً فیلدهای الزامی را تکمیل کنید",duration:3e3});return}const i=`CHG-${Date.now().toString().slice(-6)}`;({elevatorId:a.id,elevatorUid:a.uid,buildingName:a.buildingName,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},D.success(`تعویض قطعه با شناسه ${i} ثبت شد`,{description:`قطعه ${r.newPartName} در آسانسور ${a.buildingName} با موفقیت ثبت گردید`,duration:4e3})),h()},p=w();return e.jsx("div",{className:"space-y-6",dir:"rtl",children:e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 flex items-center gap-2 mb-3",children:"🏢 اطلاعات آسانسور"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"شناسه:"}),e.jsx("span",{className:"font-medium mr-2",children:a.uid})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"ساختمان:"}),e.jsx("span",{className:"font-medium mr-2",children:a.buildingName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"وضعیت فعلی:"}),e.jsx(S,{className:`${u[a.status]} mr-2`,children:g[a.status]})]})]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h3",{className:"font-medium text-orange-800 flex items-center gap-2 mb-4",children:"🔧 انتخاب دسته‌بندی قطعه"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"partCategory",className:"text-orange-700",children:"دسته‌بندی قطعه *"}),e.jsxs(_,{value:d,onValueChange:b,children:[e.jsx(T,{className:"bg-white border-orange-300",children:e.jsx(M,{placeholder:"انتخاب دسته‌بندی قطعه"})}),e.jsx(R,{children:m.map(t=>e.jsx(f,{value:t.value,children:t.label},t.value))})]})]}),d&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"text-orange-700",children:"قطعات موجود در این دسته:"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:m.find(t=>t.value===d)?.parts.map(t=>e.jsx("div",{className:`p-2 rounded border cursor-pointer transition-colors ${r.oldPartName===t?"bg-orange-200 border-orange-400 text-orange-800":"bg-white border-orange-300 hover:bg-orange-50"}`,onClick:()=>l(i=>({...i,oldPartName:t})),children:e.jsx("span",{className:"text-sm",children:t})},t))})]})]})]}),p&&r.oldPartName&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("h3",{className:"font-medium text-red-800 flex items-center gap-2 mb-4",children:"🔴 اطلاعات قطعه فعلی"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-b border-red-200 pb-1",children:[e.jsx("span",{className:"text-red-600",children:"نام قطعه:"}),e.jsx("span",{className:"font-medium",children:p.name})]}),e.jsxs("div",{className:"flex justify-between border-b border-red-200 pb-1",children:[e.jsx("span",{className:"text-red-600",children:"برند:"}),e.jsx("span",{className:"font-medium",children:p.brand})]}),e.jsxs("div",{className:"flex justify-between border-b border-red-200 pb-1",children:[e.jsx("span",{className:"text-red-600",children:"مدل:"}),e.jsx("span",{className:"font-medium",children:p.model})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between border-b border-red-200 pb-1",children:[e.jsx("span",{className:"text-red-600",children:"سریال:"}),e.jsx("span",{className:"font-medium font-mono",children:p.serial})]}),e.jsxs("div",{className:"flex justify-between border-b border-red-200 pb-1",children:[e.jsx("span",{className:"text-red-600",children:"تاریخ نصب:"}),e.jsx("span",{className:"font-medium",children:p.installDate})]})]})]}),e.jsx("div",{className:"mt-3 p-2 bg-red-100 rounded border border-red-300",children:e.jsx("p",{className:"text-red-700 text-sm",children:"💡 این قطعه پس از تایید تعویض، از شناسنامه آسانسور حذف و قطعه جدید جایگزین آن خواهد شد"})})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-medium text-green-800 flex items-center gap-2 mb-4",children:"🟢 اطلاعات قطعه جدید"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"newPartName",className:"text-green-700",children:"نام قطعه جدید *"}),e.jsx(N,{id:"newPartName",placeholder:"نام دقیق قطعه جدید",value:r.newPartName,onChange:t=>l(i=>({...i,newPartName:t.target.value})),className:"bg-white border-green-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"newPartBrand",className:"text-green-700",children:"برند قطعه جدید"}),e.jsx(N,{id:"newPartBrand",placeholder:"برند سازنده",value:r.newPartBrand,onChange:t=>l(i=>({...i,newPartBrand:t.target.value})),className:"bg-white border-green-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"newPartModel",className:"text-green-700",children:"مدل قطعه جدید"}),e.jsx(N,{id:"newPartModel",placeholder:"شماره مدل",value:r.newPartModel,onChange:t=>l(i=>({...i,newPartModel:t.target.value})),className:"bg-white border-green-300"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"newPartSerial",className:"text-green-700",children:"شماره سریال جدید"}),e.jsx(N,{id:"newPartSerial",placeholder:"شماره سریال یکتا",value:r.newPartSerial,onChange:t=>l(i=>({...i,newPartSerial:t.target.value})),className:"bg-white border-green-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"warranteDuration",className:"text-green-700",children:"مدت گارانتی (ماه)"}),e.jsx(N,{id:"warranteDuration",type:"number",placeholder:"24",value:r.warranteDuration,onChange:t=>l(i=>({...i,warranteDuration:t.target.value})),className:"bg-white border-green-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"cost",className:"text-green-700",children:"هزینه (تومان)"}),e.jsx(N,{id:"cost",type:"number",placeholder:"1500000",value:r.cost,onChange:t=>l(i=>({...i,cost:t.target.value})),className:"bg-white border-green-300"})]})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h3",{className:"font-medium text-yellow-800 flex items-center gap-2 mb-4",children:"📝 جزئیات تعویض"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"changeDate",className:"text-yellow-700",children:"تاریخ تعویض *"}),e.jsx(re,{value:r.changeDate,onChange:t=>l(i=>({...i,changeDate:t})),placeholder:"انتخاب تاریخ",className:"bg-white border-yellow-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"reason",className:"text-yellow-700",children:"دلیل تعویض *"}),e.jsxs(_,{value:r.reason,onValueChange:t=>l(i=>({...i,reason:t})),children:[e.jsx(T,{className:"bg-white border-yellow-300",children:e.jsx(M,{placeholder:"انتخاب دلیل تعویض"})}),e.jsx(R,{children:y.map(t=>e.jsx(f,{value:t,children:t},t))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"priority",className:"text-yellow-700",children:"اولویت تعویض"}),e.jsxs(_,{value:r.priority,onValueChange:t=>l(i=>({...i,priority:t})),children:[e.jsx(T,{className:"bg-white border-yellow-300",children:e.jsx(M,{placeholder:"انتخاب اولویت"})}),e.jsxs(R,{children:[e.jsx(f,{value:"low",children:"🟢 کم"}),e.jsx(f,{value:"normal",children:"🟡 متوسط"}),e.jsx(f,{value:"high",children:"🟠 بالا"}),e.jsx(f,{value:"critical",children:"🔴 بحرانی"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"technicianName",className:"text-yellow-700",children:"نام تکنسین"}),e.jsx(N,{id:"technicianName",placeholder:"نام و نام خانوادگی",value:r.technicianName,onChange:t=>l(i=>({...i,technicianName:t.target.value})),className:"bg-white border-yellow-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"technicianPhone",className:"text-yellow-700",children:"شماره تماس تکنسین"}),e.jsx(N,{id:"technicianPhone",placeholder:"09123456789",value:r.technicianPhone,onChange:t=>l(i=>({...i,technicianPhone:t.target.value})),className:"bg-white border-yellow-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"notes",className:"text-yellow-700",children:"یادداشت‌های اضافی"}),e.jsx(q,{id:"notes",placeholder:"توضیحات تکمیلی در مورد تعویض...",value:r.notes,onChange:t=>l(i=>({...i,notes:t.target.value})),className:"bg-white border-yellow-300",rows:3})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(k,{type:"button",variant:"outline",onClick:h,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"انصراف"}),e.jsx(k,{type:"submit",className:"bg-black hover:bg-gray-800 text-white",children:"ثبت تعویض قطعه"})]})]})})}function ls({elevator:a,onClose:h}){const u={active:"bg-green-100 text-green-800 border-green-300",maintenance:"bg-yellow-100 text-yellow-800 border-yellow-300",out_of_order:"bg-red-100 text-red-800 border-red-300",installing:"bg-blue-100 text-blue-800 border-blue-300"},g={active:"🟢 فعال",maintenance:"🟡 تعمیرات",out_of_order:"🔴 خراب",installing:"🔵 در حال نصب"},[r,l]=x.useState({maintenanceType:"",description:"",technicianName:"",technicianPhone:"",problemDescription:"",solutionDescription:"",partsUsed:[],priority:"normal",estimatedDuration:"",actualDuration:"",cost:"",maintenanceDate:"",completionDate:"",status:"in_progress",nextMaintenanceDate:"",notes:""}),[d,b]=x.useState([]),[m,y]=x.useState(""),w=[{value:"preventive",label:"🔧 تعمیرات پیشگیرانه"},{value:"corrective",label:"⚠️ تعمیرات اصلاحی"},{value:"emergency",label:"🚨 تعمیرات اضطراری"},{value:"inspection",label:"🔍 بازرسی دوره‌ای"},{value:"upgrade",label:"⬆️ ارتقاء سیستم"},{value:"cleaning",label:"🧽 نظافت و نگهداری"}],j=[{value:"low",label:"🟢 کم",color:"bg-green-100 text-green-800 border-green-300"},{value:"normal",label:"🟡 متوسط",color:"bg-yellow-100 text-yellow-800 border-yellow-300"},{value:"high",label:"🟠 بالا",color:"bg-orange-100 text-orange-800 border-orange-300"},{value:"critical",label:"🔴 بحرانی",color:"bg-red-100 text-red-800 border-red-300"}],p=[{value:"scheduled",label:"📅 زمان‌بندی شده",color:"bg-blue-100 text-blue-800"},{value:"in_progress",label:"⚙️ در حال انجام",color:"bg-yellow-100 text-yellow-800"},{value:"completed",label:"✅ تکمیل شده",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"❌ لغو شده",color:"bg-red-100 text-red-800"}],t=["موتور آسانسور","کنترلر فرکانس","کابل فولادی","سنسور طبقه","دکمه‌های کابین","چراغ LED","فن کابین","سیستم ایمنی","گیربکس","ترمز اضطراری","رله کنترل","ترانسفورماتور"],i=s=>{if(s.preventDefault(),!r.maintenanceType||!r.description||!r.technicianName){D.error("خطا در اعتبارسنجی",{description:"لطفاً فیلدهای الزامی را تکمیل کنید",duration:3e3});return}const n=`MNT-${Date.now().toString().slice(-6)}`;({elevatorId:a.id,elevatorUid:a.uid,buildingName:a.buildingName,...r,partsUsed:[...d,...m?[m]:[]],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},D.success(`تعمیرات با شناسه ${n} ثبت شد`,{description:`تعمیرات آسانسور ${a.buildingName} با موفقیت در سیستم ثبت گردید`,duration:4e3})),h()},v=()=>{m.trim()&&!d.includes(m)&&(b(s=>[...s,m]),y(""))},C=s=>{b(n=>n.filter(P=>P!==s))};return e.jsx("div",{className:"p-6 space-y-6",dir:"rtl",children:e.jsxs("form",{onSubmit:i,className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 flex items-center gap-2 mb-3",children:"🏢 اطلاعات آسانسور"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"شناسه:"}),e.jsx("span",{className:"font-medium mr-2",children:a.uid})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"ساختمان:"}),e.jsx("span",{className:"font-medium mr-2",children:a.buildingName})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-600",children:"وضعیت فعلی:"}),e.jsx(S,{className:`${u[a.status]} mr-2`,children:g[a.status]})]})]})]}),e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsx("h3",{className:"font-medium text-orange-800 flex items-center gap-2 mb-4",children:"🔧 جزئیات تعمیرات"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"maintenanceType",className:"text-orange-700",children:"نوع تعمیرات *"}),e.jsxs(_,{value:r.maintenanceType,onValueChange:s=>l(n=>({...n,maintenanceType:s})),children:[e.jsx(T,{className:"bg-white border-orange-300",children:e.jsx(M,{placeholder:"انتخاب نوع تعمیرات"})}),e.jsx(R,{children:w.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"priority",className:"text-orange-700",children:"اولویت"}),e.jsxs(_,{value:r.priority,onValueChange:s=>l(n=>({...n,priority:s})),children:[e.jsx(T,{className:"bg-white border-orange-300",children:e.jsx(M,{placeholder:"انتخاب اولویت"})}),e.jsx(R,{children:j.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(o,{htmlFor:"description",className:"text-orange-700",children:"شرح تعمیرات *"}),e.jsx(q,{id:"description",placeholder:"شرح کاملی از تعمیرات انجام شده ارائه دهید...",value:r.description,onChange:s=>l(n=>({...n,description:s.target.value})),className:"bg-white border-orange-300",rows:3,required:!0})]})]})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-medium text-green-800 flex items-center gap-2 mb-4",children:"👷 اطلاعات تکنسین"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"technicianName",className:"text-green-700",children:"نام تکنسین *"}),e.jsx(N,{id:"technicianName",placeholder:"نام و نام خانوادگی تکنسین",value:r.technicianName,onChange:s=>l(n=>({...n,technicianName:s.target.value})),className:"bg-white border-green-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"technicianPhone",className:"text-green-700",children:"شماره تماس تکنسین"}),e.jsx(N,{id:"technicianPhone",placeholder:"09123456789",value:r.technicianPhone,onChange:s=>l(n=>({...n,technicianPhone:s.target.value})),className:"bg-white border-green-300"})]})]})]}),e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("h3",{className:"font-medium text-red-800 flex items-center gap-2 mb-4",children:"🔍 مشکل و راه‌حل"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"problemDescription",className:"text-red-700",children:"شرح مشکل"}),e.jsx(q,{id:"problemDescription",placeholder:"مشکلات مشاهده شده در آسانسور را شرح دهید...",value:r.problemDescription,onChange:s=>l(n=>({...n,problemDescription:s.target.value})),className:"bg-white border-red-300",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"solutionDescription",className:"text-red-700",children:"شرح راه‌حل"}),e.jsx(q,{id:"solutionDescription",placeholder:"اقدامات انجام شده برای حل مشکل را شرح دهید...",value:r.solutionDescription,onChange:s=>l(n=>({...n,solutionDescription:s.target.value})),className:"bg-white border-red-300",rows:2})]})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"font-medium text-purple-800 flex items-center gap-2 mb-4",children:"🔩 قطعات استفاده شده"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{className:"text-purple-700",children:"انتخاب قطعات"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-2",children:t.map(s=>e.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[e.jsx(ss,{id:s,checked:d.includes(s),onCheckedChange:n=>{n?b(P=>[...P,s]):C(s)}}),e.jsx(o,{htmlFor:s,className:"text-sm text-purple-700 cursor-pointer",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"text-purple-700",children:"قطعه سفارشی"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{placeholder:"نام قطعه",value:m,onChange:s=>y(s.target.value),className:"bg-white border-purple-300",onKeyPress:s=>s.key==="Enter"&&(s.preventDefault(),v())}),e.jsx(k,{type:"button",onClick:v,variant:"outline",size:"sm",className:"border-purple-300 text-purple-700 hover:bg-purple-50",children:e.jsx(me,{className:"w-4 h-4"})})]})]})]}),d.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{className:"text-purple-700",children:"قطعات انتخاب شده:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(s=>e.jsxs(S,{variant:"secondary",className:"bg-purple-100 text-purple-800 border-purple-300 flex items-center gap-1",children:[s,e.jsx("button",{type:"button",onClick:()=>C(s),className:"ml-1 hover:text-purple-600",children:"×"})]},s))})]})]})]}),e.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-200",children:[e.jsx("h3",{className:"font-medium text-yellow-800 flex items-center gap-2 mb-4",children:"⏱️ زمان‌بندی و هزینه"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"maintenanceDate",className:"text-yellow-700",children:"تاریخ شروع تعمیرات"}),e.jsx(re,{value:r.maintenanceDate,onChange:s=>l(n=>({...n,maintenanceDate:s})),placeholder:"انتخاب تاریخ",className:"bg-white border-yellow-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"estimatedDuration",className:"text-yellow-700",children:"مدت زمان تخمینی (ساعت)"}),e.jsx(N,{id:"estimatedDuration",type:"number",placeholder:"2",value:r.estimatedDuration,onChange:s=>l(n=>({...n,estimatedDuration:s.target.value})),className:"bg-white border-yellow-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"actualDuration",className:"text-yellow-700",children:"مدت زمان واقعی (ساعت)"}),e.jsx(N,{id:"actualDuration",type:"number",placeholder:"1.5",value:r.actualDuration,onChange:s=>l(n=>({...n,actualDuration:s.target.value})),className:"bg-white border-yellow-300"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"cost",className:"text-yellow-700",children:"هزینه (تومان)"}),e.jsx(N,{id:"cost",type:"number",placeholder:"500000",value:r.cost,onChange:s=>l(n=>({...n,cost:s.target.value})),className:"bg-white border-yellow-300"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsx("h3",{className:"font-medium text-gray-800 flex items-center gap-2 mb-4",children:"📋 وضعیت و یادداشت‌ها"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"status",className:"text-gray-700",children:"وضعیت تعمیرات"}),e.jsxs(_,{value:r.status,onValueChange:s=>l(n=>({...n,status:s})),children:[e.jsx(T,{className:"bg-white border-gray-300",children:e.jsx(M,{placeholder:"انتخاب وضعیت"})}),e.jsx(R,{children:p.map(s=>e.jsx(f,{value:s.value,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"nextMaintenanceDate",className:"text-gray-700",children:"تاریخ تعمیرات بعدی"}),e.jsx(re,{value:r.nextMaintenanceDate,onChange:s=>l(n=>({...n,nextMaintenanceDate:s})),placeholder:"انتخاب تاریخ",className:"bg-white border-gray-300"})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(o,{htmlFor:"notes",className:"text-gray-700",children:"یادداشت‌های اضافی"}),e.jsx(q,{id:"notes",placeholder:"یادداشت‌ها، توصیه‌ها یا نکات مهم دیگر...",value:r.notes,onChange:s=>l(n=>({...n,notes:s.target.value})),className:"bg-white border-gray-300",rows:3})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(k,{type:"button",variant:"outline",onClick:h,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"انصراف"}),e.jsx(k,{type:"submit",className:"bg-black hover:bg-gray-800 text-white",children:"ثبت تعمیرات"})]})]})})}export{Ts as default};
