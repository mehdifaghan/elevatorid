import{a1 as ce,r as c,j as e,o as l,C as b,b as S,c as C,d as U,e as O,L as n,A as B,n as $,p as P,B as j,q as ne,W as le,Q as V,z as de,D as oe,E as w,F as E,t as q}from"./index-tH8kGzNV.js";import{S as F,a as H,b as Q,c as M,d as A}from"./select-B8NiX_r6.js";import{T as X}from"./textarea-1hTYB3HE.js";import{S as K}from"./separator-DLBvRYDr.js";import{r as y}from"./real-api-client-o-2gE2Hp.js";import{S as J}from"./send-DAIw7Hq6.js";import{I as W}from"./info-BmNqUgv1.js";import{C as Y}from"./copy-CIVXPvX_.js";import{C as me}from"./circle-x-D2gTA4o0.js";import"./index-BdQq_4o_.js";import"./Combination-Dzecd94B.js";import"./index-BuiImgyP.js";import"./check-DV_4N94Y.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ue=ce("eye-off",he),x=[{id:"send-otp",name:"ارسال OTP",method:"POST",path:"/auth/send-otp",description:"ارسال کد OTP به شماره موبایل",requiresAuth:!1,category:"احراز هویت",bodyExample:JSON.stringify({mobile:"09123456789",captcha_token:"captured_token_from_captcha"},null,2)},{id:"verify-otp",name:"تأیید OTP",method:"POST",path:"/auth/verify-otp",description:"تأیید کد OTP و دریافت توکن",requiresAuth:!1,category:"احراز هویت",bodyExample:JSON.stringify({mobile:"09123456789",otp_code:"123456"},null,2)},{id:"refresh-token",name:"تجدید توکن",method:"POST",path:"/auth/refresh",description:"تجدید توکن دسترسی",requiresAuth:!0,category:"احراز هویت"},{id:"me",name:"اطلاعات کاربر",method:"GET",path:"/auth/me",description:"دریافت اطلاعات کاربر جاری",requiresAuth:!0,category:"احراز هویت"},{id:"captcha-generate",name:"تولید CAPTCHA",method:"GET",path:"/captcha/generate",description:"تولید کپچای جدید",requiresAuth:!1,category:"امنیت"},{id:"admin-users-list",name:"لیست کاربران",method:"GET",path:"/admin/users",description:"دریافت لیست تمام کاربران",requiresAuth:!0,category:"مدیریت کاربران",queryParams:[{name:"page",type:"number",required:!1,description:"شماره صفحه"},{name:"limit",type:"number",required:!1,description:"تعداد در هر صفحه"}]},{id:"admin-user-detail",name:"جزئیات کاربر",method:"GET",path:"/admin/users/{user_id}",description:"دریافت جزئیات یک کاربر",requiresAuth:!0,category:"مدیریت کاربران"},{id:"admin-parts-list",name:"لیست قطعات",method:"GET",path:"/admin/parts",description:"دریافت لیست تمام قطعات",requiresAuth:!0,category:"مدیریت قطعات",queryParams:[{name:"page",type:"number",required:!1,description:"شماره صفحه"},{name:"limit",type:"number",required:!1,description:"تعداد در هر صفحه"},{name:"category_id",type:"number",required:!1,description:"فیلتر براساس دسته‌بندی"}]},{id:"admin-parts-create",name:"ایجاد قطعه",method:"POST",path:"/admin/parts",description:"ایجاد قطعه جدید",requiresAuth:!0,category:"مدیریت قطعات",bodyExample:JSON.stringify({name:"نام قطعه",description:"توضیحات قطعه",category_id:1,manufacturer:"سازنده",price:1e5},null,2)},{id:"admin-categories-list",name:"لیست دسته‌بندی‌ها",method:"GET",path:"/admin/categories",description:"دریافت لیست دسته‌بندی‌های قطعات",requiresAuth:!0,category:"مدیریت دسته‌بندی"},{id:"admin-categories-create",name:"ایجاد دسته‌بندی",method:"POST",path:"/admin/categories",description:"ایجاد دسته‌بندی جدید",requiresAuth:!0,category:"مدیریت دسته‌بندی",bodyExample:JSON.stringify({name:"نام دسته‌بندی",description:"توضیحات دسته‌بندی",parent_id:null},null,2)},{id:"user-products-list",name:"محصولات کاربر",method:"GET",path:"/user/products",description:"دریافت لیست محصولات کاربر",requiresAuth:!0,category:"محصولات کاربر"},{id:"catalog-parts",name:"کاتالوگ قطعات",method:"GET",path:"/catalog/parts",description:"دریافت کاتالوگ عمومی قطعات",requiresAuth:!1,category:"کاتالوگ عمومی",queryParams:[{name:"search",type:"string",required:!1,description:"جستجو در نام قطعات"},{name:"category",type:"number",required:!1,description:"فیلتر براساس دسته‌بندی"}]}],Z=[...new Set(x.map(r=>r.category))],Pe=()=>{const[r,ee]=c.useState(null),[f,se]=c.useState("all"),[m,g]=c.useState(""),[d,k]=c.useState({}),[h,_]=c.useState({}),[i,p]=c.useState(null),[I,G]=c.useState(!1),[R,D]=c.useState(null),[N,v]=c.useState(!1),ae=f==="all"?x:x.filter(s=>s.category===f);c.useEffect(()=>{r?.bodyExample?g(r.bodyExample):g(""),k({}),_({}),p(null)},[r]);const T=()=>{if(!r)return"";let s=r.path;Object.keys(h).forEach(a=>{s=s.replace(`{${a}}`,h[a])});const t=Object.keys(d).filter(a=>d[a]).map(a=>`${a}=${encodeURIComponent(d[a])}`).join("&");return t&&(s+=`?${t}`),`https://elevatorid.ieeu.ir/v1${s}`},te=async()=>{if(!r)return;G(!0),p(null);const s=Date.now();try{let t=r.path;Object.keys(h).forEach(o=>{t=t.replace(`{${o}}`,h[o])});let a;const re=Object.keys(d).reduce((o,u)=>(d[u]&&(o[u]=d[u]),o),{});switch(r.method){case"GET":a=await y.get(t,re);break;case"POST":const o=m?JSON.parse(m):{};a=await y.post(t,o);break;case"PUT":const u=m?JSON.parse(m):{};a=await y.put(t,u);break;case"DELETE":a=await y.delete(t);break;default:throw new Error("متد HTTP پشتیبانی نمی‌شود")}const ie=Date.now();D(ie-s),p({success:!0,data:a}),v(!0),q.success("درخواست با موفقیت ارسال شد")}catch(t){const a=Date.now();D(a-s),p({success:!1,error:{message:t.message||"خطا در ارسال درخواست",statusCode:t.statusCode,details:t.details}}),v(!0),q.error(t.message||"خطا در ارسال درخواست")}finally{G(!1)}},L=s=>{navigator.clipboard.writeText(s),q.success("کپی شد")},z=s=>{const t=s.match(/\{([^}]+)\}/g);return t?t.map(a=>a.slice(1,-1)):[]};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6 max-w-6xl",dir:"rtl",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"فرم تست API"}),e.jsx("p",{className:"text-muted-foreground",children:"تست و آزمایش endpoint های سیستم ردیابی قطعات آسانسور"}),e.jsx("div",{className:"flex items-center justify-center gap-2 text-sm text-muted-foreground",children:e.jsx(l,{variant:"secondary",children:"Base URL: https://elevatorid.ieeu.ir/v1"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(b,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-5 w-5"}),"تنظیمات درخواست"]}),e.jsx(U,{children:"endpoint مورد نظر را انتخاب کرده و پارامترهای لازم را وارد کنید"})]}),e.jsxs(O,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"دسته‌بندی"}),e.jsxs(F,{value:f,onValueChange:se,children:[e.jsx(H,{children:e.jsx(Q,{placeholder:"انتخاب دسته‌بندی"})}),e.jsxs(M,{children:[e.jsx(A,{value:"all",children:"همه دسته‌ها"}),Z.map(s=>e.jsx(A,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"انتخاب Endpoint"}),e.jsxs(F,{value:r?.id||"",onValueChange:s=>{const t=x.find(a=>a.id===s);ee(t||null)},children:[e.jsx(H,{children:e.jsx(Q,{placeholder:"انتخاب endpoint"})}),e.jsx(M,{children:ae.map(s=>e.jsx(A,{value:s.id,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l,{variant:s.method==="GET"?"secondary":s.method==="POST"?"default":s.method==="PUT"?"outline":"destructive",children:s.method}),s.name]})},s.id))})]})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsx(W,{className:"h-4 w-4"}),e.jsxs($,{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"توضیحات:"})," ",r.description]}),e.jsxs("div",{children:[e.jsx("strong",{children:"آدرس:"})," ",T()]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("strong",{children:"نیاز به احراز هویت:"}),r.requiresAuth?e.jsx(l,{variant:"destructive",children:"بله"}):e.jsx(l,{variant:"secondary",children:"خیر"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"آدرس کامل درخواست"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{value:T(),readOnly:!0,className:"font-mono text-sm"}),e.jsx(j,{size:"sm",variant:"outline",onClick:()=>L(T()),children:e.jsx(Y,{className:"h-4 w-4"})})]})]}),z(r.path).length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"پارامترهای مسیر"}),z(r.path).map(s=>e.jsxs("div",{className:"space-y-1",children:[e.jsx(n,{className:"text-sm",children:s}),e.jsx(P,{placeholder:`مقدار ${s} را وارد کنید`,value:h[s]||"",onChange:t=>_(a=>({...a,[s]:t.target.value}))})]},s))]}),r.queryParams&&r.queryParams.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"پارامترهای Query"}),r.queryParams.map(s=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{className:"text-sm",children:s.name}),s.required&&e.jsx(l,{variant:"destructive",className:"text-xs",children:"ضروری"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",s.type,")"]})]}),e.jsx(P,{placeholder:s.description,value:d[s.name]||"",onChange:t=>k(a=>({...a,[s.name]:t.target.value}))})]},s.name))]}),(r.method==="POST"||r.method==="PUT")&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"محتوای درخواست (JSON)"}),e.jsx(X,{placeholder:"محتوای JSON درخواست را وارد کنید",value:m,onChange:s=>g(s.target.value),rows:8,className:"font-mono text-sm"})]}),e.jsx(j,{onClick:te,disabled:I,className:"w-full",size:"lg",children:I?e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"h-4 w-4 animate-spin ml-2"}),"در حال ارسال..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 ml-2"}),"ارسال درخواست"]})})]})]})]}),e.jsxs(b,{children:[e.jsxs(S,{children:[e.jsxs(C,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[i?.success?e.jsx(le,{className:"h-5 w-5 text-green-500"}):i?.error?e.jsx(me,{className:"h-5 w-5 text-red-500"}):e.jsx(V,{className:"h-5 w-5"}),"پاسخ درخواست"]}),i&&e.jsxs("div",{className:"flex items-center gap-2",children:[R&&e.jsxs(l,{variant:"outline",className:"text-xs",children:[R,"ms"]}),e.jsx(j,{size:"sm",variant:"outline",onClick:()=>v(!N),children:N?e.jsx(ue,{className:"h-4 w-4"}):e.jsx(V,{className:"h-4 w-4"})})]})]}),e.jsx(U,{children:i?i.success?"درخواست با موفقیت اجرا شد":"خطا در اجرای درخواست":"پاسخ درخواست در اینجا نمایش داده می‌شود"})]}),e.jsx(O,{children:i?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(n,{children:"وضعیت:"}),e.jsx(l,{variant:i.success?"default":"destructive",children:i.success?"موفق":"ناموفق"}),i.error?.statusCode&&e.jsx(l,{variant:"outline",children:i.error.statusCode})]}),N&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(n,{children:"محتوای پاسخ:"}),e.jsxs(j,{size:"sm",variant:"outline",onClick:()=>L(JSON.stringify(i,null,2)),children:[e.jsx(Y,{className:"h-4 w-4 ml-1"}),"کپی"]})]}),e.jsx(X,{readOnly:!0,value:JSON.stringify(i,null,2),rows:15,className:"font-mono text-sm"})]})]}):e.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[e.jsx(J,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"هنوز درخواستی ارسال نشده است"}),e.jsx("p",{className:"text-sm mt-2",children:"ابتدا یک endpoint انتخاب کنید و درخواست را ارسال کنید"})]})})]})]}),e.jsxs(b,{children:[e.jsx(S,{children:e.jsx(C,{children:"راهنمای استفاده"})}),e.jsx(O,{children:e.jsxs(de,{defaultValue:"endpoints",className:"w-full",children:[e.jsxs(oe,{className:"grid w-full grid-cols-3",children:[e.jsx(w,{value:"endpoints",children:"Endpoints"}),e.jsx(w,{value:"auth",children:"احراز هویت"}),e.jsx(w,{value:"examples",children:"نمونه‌ها"})]}),e.jsx(E,{value:"endpoints",className:"space-y-4",children:e.jsxs("div",{className:"text-sm space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"دسته‌بندی Endpoints:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Z.map(s=>{const t=x.filter(a=>a.category===s);return e.jsxs("div",{className:"space-y-2",children:[e.jsx("h5",{className:"font-medium text-primary",children:s}),e.jsx("ul",{className:"space-y-1 text-muted-foreground",children:t.map(a=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(l,{size:"sm",variant:"outline",children:a.method}),e.jsx("span",{className:"text-xs",children:a.name})]},a.id))})]},s)})})]})}),e.jsx(E,{value:"auth",className:"space-y-4",children:e.jsxs("div",{className:"text-sm space-y-4",children:[e.jsxs(B,{children:[e.jsx(W,{className:"h-4 w-4"}),e.jsx($,{children:"برای استفاده از endpoint های محافظت شده، ابتدا باید از طریق OTP وارد شوید."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"مراحل احراز هویت:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground",children:[e.jsx("li",{children:"ابتدا CAPTCHA تولید کنید"}),e.jsx("li",{children:"با شماره موبایل و توکن CAPTCHA، OTP دریافت کنید"}),e.jsx("li",{children:"کد OTP را تأیید کنید تا توکن دسترسی دریافت کنید"}),e.jsx("li",{children:"حالا می‌توانید از endpoint های محافظت شده استفاده کنید"})]})]})]})}),e.jsx(E,{value:"examples",className:"space-y-4",children:e.jsxs("div",{className:"text-sm space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"نمونه درخواست ارسال OTP:"}),e.jsx("pre",{className:"bg-muted p-3 rounded text-xs overflow-x-auto",children:`{
  "mobile": "09123456789",
  "captcha_token": "captured_token_from_captcha"
}`})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"نمونه درخواست تأیید OTP:"}),e.jsx("pre",{className:"bg-muted p-3 rounded text-xs overflow-x-auto",children:`{
  "mobile": "09123456789",
  "otp_code": "123456"
}`})]}),e.jsx(K,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"نمونه پاسخ موفق:"}),e.jsx("pre",{className:"bg-muted p-3 rounded text-xs overflow-x-auto",children:`{
  "success": true,
  "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
  "user": {
    "id": 1,
    "mobile": "09123456789",
    "role": "user"
  }
}`})]})]})})]})})]})]})};export{Pe as default};
