import{r as d,j as e,B as p,C as x,e as o,b as se,p as H,V as te,O as P,W as $,o as u,G as le,Q as ae,t as N,L as g}from"./index-tH8kGzNV.js";import{T as re,a as ie,b as L,c as m,d as ne,e as h}from"./table-DC3MYrD8.js";import{D as I,a as ce,b as M,c as k,d as V,e as B}from"./dialog-DAjwwShP.js";import{D as de,a as xe,b as oe,c as me}from"./dropdown-menu-BKfQT_JD.js";import{S as v,a as f,b,c as y,d as l}from"./select-B8NiX_r6.js";import{T as he}from"./textarea-1hTYB3HE.js";import{P as je}from"./plus-A2-5MgKF.js";import{S as pe}from"./search-8LTSveb2.js";import{C as z}from"./circle-x-D2gTA4o0.js";import{C as A}from"./clock-BiwlPOks.js";import{M as E}from"./message-square-Gum9_klA.js";import{E as ue}from"./ellipsis-J_HkHiqq.js";import"./index-DGGMjIYi.js";import"./Combination-Dzecd94B.js";import"./x-B6dSK8zO.js";import"./chevron-right-B97jr1RJ.js";import"./check-DV_4N94Y.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";const O=[{id:"1",type:"profile_update",title:"درخواست به‌روزرسانی آدرس شرکت",description:"به دلیل تغییر محل دفتر، نیاز به به‌روزرسانی آدرس ثبت‌شده در سیستم داریم.",submitDate:"۱۴۰۲/۰۹/۱۵",status:"pending",priority:"medium"},{id:"2",type:"support",title:"راهنمایی برای ثبت آسانسور جدید",description:"نحوه ثبت آسانسور جدید در سیستم را متوجه نمی‌شوم. لطفاً راهنمایی کنید.",submitDate:"۱۴۰۲/۰۹/۱۰",status:"approved",priority:"low",adminResponse:"راهنمای کامل ثبت آسانسور برای شما ارسال شد. در صورت نیاز به راهنمایی بیشتر با پشتیبانی تماس بگیرید.",responseDate:"۱۴۰۲/۰۹/۱۱"},{id:"3",type:"complaint",title:"شکایت از تأخیر در تایید انتقال",description:"درخواست انتقال قطعه با کد P001 بیش از ۲ هفته است که در انتظار تایید مانده است.",submitDate:"۱۴۰۲/۰۹/۰۸",status:"rejected",priority:"high",adminResponse:"با بررسی انجام شده، درخواست انتقال شما به دلیل عدم تطبیق مدارک رد شده است. لطفاً مدارک کامل را ارسال کنید.",responseDate:"۱۴۰۲/۰۹/۰۹"}],G={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",in_review:"bg-blue-100 text-blue-800"},Q={pending:"در انتظار",approved:"تایید شده",rejected:"رد شده",in_review:"در حال بررسی"},W={pending:A,approved:$,rejected:z,in_review:P},X={low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"},J={low:"کم",medium:"متوسط",high:"بالا",urgent:"فوری"},K={profile_update:"به‌روزرسانی پروفایل",part_change:"تغییر قطعه",complaint:"شکایت",support:"پشتیبانی"};function He(){const[s,r]=d.useState(O),[c,w]=d.useState(""),[a,n]=d.useState("all"),[C,U]=d.useState("all"),j={total:s.length,pending:s.filter(i=>i.status==="pending").length,in_review:s.filter(i=>i.status==="in_review").length,approved:s.filter(i=>i.status==="approved").length,rejected:s.filter(i=>i.status==="rejected").length},[S,R]=d.useState(null),[D,T]=d.useState(!1),[Y,_]=d.useState(!1),Z=async()=>{T(!0);try{await new Promise(t=>setTimeout(t,1e3)),r(O),N.success("داده‌ها با موفقیت به‌روزرسانی شد")}catch{N.error("خطا در به‌روزرسانی داده‌ها")}finally{T(!1)}},F=s.filter(t=>{const i=t.title.toLowerCase().includes(c.toLowerCase())||t.description.toLowerCase().includes(c.toLowerCase()),q=a==="all"||t.status===a,ee=C==="all"||t.type===C;return i&&q&&ee});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"درخواست‌ها و شکایات"}),e.jsx("p",{className:"text-muted-foreground",children:"ثبت و پیگیری درخواست‌های شما"})]}),e.jsxs(I,{open:Y,onOpenChange:_,children:[e.jsx(ce,{asChild:!0,children:e.jsxs(p,{children:[e.jsx(je,{className:"w-4 h-4 ml-2"}),"ثبت درخواست جدید"]})}),e.jsxs(M,{className:"max-w-2xl",children:[e.jsxs(k,{children:[e.jsx(V,{children:"ثبت درخواست جدید"}),e.jsx(B,{children:"درخواست یا شکایت خود را ثبت کنید"})]}),e.jsx(ge,{onClose:()=>_(!1)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx(x,{className:"border-l-4 border-l-blue-500",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-blue-600",children:j.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"کل درخواست‌ها"})]})})}),e.jsx(x,{className:"border-l-4 border-l-yellow-500",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:j.pending}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"در انتظار"})]})})}),e.jsx(x,{className:"border-l-4 border-l-indigo-500",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-indigo-600",children:j.in_review}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"در حال بررسی"})]})})}),e.jsx(x,{className:"border-l-4 border-l-green-500",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-green-600",children:j.approved}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"تایید شده"})]})})}),e.jsx(x,{className:"border-l-4 border-l-red-500",children:e.jsx(o,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-red-600",children:j.rejected}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"رد شده"})]})})})]}),e.jsxs(x,{children:[e.jsx(se,{children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(pe,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(H,{placeholder:"جستجو بر اساس عنوان یا شرح...",value:c,onChange:t=>w(t.target.value),className:"pr-10"})]}),e.jsxs(p,{variant:"outline",size:"sm",onClick:Z,disabled:D,className:"gap-2 shrink-0",children:[e.jsx(te,{className:`h-4 w-4 ${D?"animate-spin":""}`}),D?"در حال بارگذاری...":"تازه‌سازی"]}),e.jsxs(v,{value:C,onValueChange:U,children:[e.jsx(f,{className:"w-40",children:e.jsx(b,{placeholder:"نوع درخواست"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"همه انواع"}),e.jsx(l,{value:"profile_update",children:"به‌روزرسانی پروفایل"}),e.jsx(l,{value:"part_change",children:"تغییر قطعه"}),e.jsx(l,{value:"complaint",children:"شکایت"}),e.jsx(l,{value:"support",children:"پشتیبانی"})]})]}),e.jsxs(v,{value:a,onValueChange:n,children:[e.jsx(f,{className:"w-32",children:e.jsx(b,{placeholder:"وضعیت"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"همه"}),e.jsx(l,{value:"pending",children:"در انتظار"}),e.jsx(l,{value:"in_review",children:"در حال بررسی"}),e.jsx(l,{value:"approved",children:"تایید شده"}),e.jsx(l,{value:"rejected",children:"رد شده"})]})]})]})})}),e.jsxs(o,{children:[e.jsx("div",{className:"rounded-lg border",children:e.jsxs(re,{children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(m,{children:"عنوان درخواست"}),e.jsx(m,{children:"نوع"}),e.jsx(m,{children:"تاریخ ثبت"}),e.jsx(m,{children:"اولویت"}),e.jsx(m,{children:"وضعیت"}),e.jsx(m,{children:"عملیات"})]})}),e.jsx(ne,{children:F.map(t=>{const i=W[t.status];return e.jsxs(L,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium max-w-xs truncate",children:t.title}),e.jsx("div",{className:"text-sm text-muted-foreground max-w-xs truncate",children:t.description})]})]})}),e.jsx(h,{children:e.jsx(u,{variant:"outline",children:K[t.type]})}),e.jsx(h,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(le,{className:"w-4 h-4 text-gray-500"}),t.submitDate]})}),e.jsx(h,{children:e.jsx(u,{variant:"secondary",className:X[t.priority],children:J[t.priority]})}),e.jsx(h,{children:e.jsxs(u,{variant:"secondary",className:`${G[t.status]} flex items-center gap-1 w-fit`,children:[e.jsx(i,{className:"w-3 h-3"}),Q[t.status]]})}),e.jsx(h,{children:e.jsxs(de,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(p,{variant:"ghost",size:"sm",children:e.jsx(ue,{className:"w-4 h-4"})})}),e.jsx(oe,{align:"end",children:e.jsxs(me,{onClick:()=>R(t),children:[e.jsx(ae,{className:"w-4 h-4 ml-2"}),"مشاهده جزئیات"]})})]})})]},t.id)})})]})}),F.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"درخواستی یافت نشد"})]})]})]}),S&&e.jsx(I,{open:!!S,onOpenChange:()=>R(null),children:e.jsxs(M,{className:"max-w-2xl",children:[e.jsxs(k,{children:[e.jsx(V,{children:"جزئیات درخواست"}),e.jsx(B,{children:"اطلاعات کامل درخواست ثبت‌شده"})]}),e.jsx(Ne,{request:S})]})})]})}function ge({onClose:s}){const[r,c]=d.useState({type:"",title:"",description:"",priority:"medium"}),w=a=>{if(a.preventDefault(),!r.type||!r.title||!r.description){N.error("لطفاً تمام فیلدهای ضروری را پر کنید");return}N.success("درخواست شما ثبت شد و در حال بررسی است"),s()};return e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"type",children:"نوع درخواست *"}),e.jsxs(v,{value:r.type,onValueChange:a=>c(n=>({...n,type:a})),children:[e.jsx(f,{children:e.jsx(b,{placeholder:"انتخاب کنید"})}),e.jsxs(y,{children:[e.jsx(l,{value:"profile_update",children:"به‌رو��رسانی پروفایل"}),e.jsx(l,{value:"part_change",children:"تغییر قطعه"}),e.jsx(l,{value:"complaint",children:"شکایت"}),e.jsx(l,{value:"support",children:"پشتیبانی"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"priority",children:"اولویت"}),e.jsxs(v,{value:r.priority,onValueChange:a=>c(n=>({...n,priority:a})),children:[e.jsx(f,{children:e.jsx(b,{})}),e.jsxs(y,{children:[e.jsx(l,{value:"low",children:"کم"}),e.jsx(l,{value:"medium",children:"متوسط"}),e.jsx(l,{value:"high",children:"بالا"}),e.jsx(l,{value:"urgent",children:"فوری"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"title",children:"عنوان درخواست *"}),e.jsx(H,{id:"title",value:r.title,onChange:a=>c(n=>({...n,title:a.target.value})),placeholder:"عنوان کوتاه و واضح",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"description",children:"شرح درخواست *"}),e.jsx(he,{id:"description",value:r.description,onChange:a=>c(n=>({...n,description:a.target.value})),placeholder:"شرح کامل درخواست یا شکایت خود را بنویسید...",rows:5,required:!0})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"راهنمای ثبت درخواست"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• برای درخواست‌های فوری، با پشتیبانی تماس بگیرید"}),e.jsx("li",{children:"• شرح کامل و واضح درخواست را ارائه دهید"}),e.jsx("li",{children:"• در صورت نیاز، مدارک مربوطه را پیوست کنید"}),e.jsx("li",{children:"• زمان پاسخ‌دهی معمولاً ۲-۳ روز کاری است"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{type:"button",variant:"outline",onClick:s,children:"انصراف"}),e.jsx(p,{type:"submit",children:"ثبت درخواست"})]})]})}function Ne({request:s}){const r=W[s.status];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"اطلاعات درخواست"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"نوع:"}),e.jsx("span",{className:"mr-2 font-medium",children:K[s.type]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"اولویت:"}),e.jsx(u,{className:`mr-2 ${X[s.priority]}`,children:J[s.priority]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"تاریخ ثبت:"}),e.jsx("span",{className:"mr-2 font-medium",children:s.submitDate})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"وضعیت درخواست"}),e.jsxs(u,{variant:"secondary",className:`${G[s.status]} flex items-center gap-1 w-fit mb-2`,children:[e.jsx(r,{className:"w-3 h-3"}),Q[s.status]]}),s.responseDate&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["تاریخ پاسخ: ",s.responseDate]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"عنوان درخواست"}),e.jsx("p",{className:"font-medium",children:s.title})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"شرح درخواست"}),e.jsx("p",{className:"text-sm bg-gray-50 p-3 rounded-lg",children:s.description})]}),s.adminResponse&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"پاسخ مدیر"}),e.jsx("p",{className:"text-sm bg-blue-50 p-3 rounded-lg",children:s.adminResponse})]}),e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"راهنمای وضعیت‌ها"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-3 h-3 text-yellow-600"}),e.jsx("span",{className:"text-yellow-600",children:"در انتظار:"}),e.jsx("span",{children:"درخواست ثبت شده و در صف بررسی است"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-3 h-3 text-blue-600"}),e.jsx("span",{className:"text-blue-600",children:"در حال بررسی:"}),e.jsx("span",{children:"درخواست توسط کارشناس در حال بررسی است"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{className:"w-3 h-3 text-green-600"}),e.jsx("span",{className:"text-green-600",children:"تایید شده:"}),e.jsx("span",{children:"درخواست تایید و اقدام لازم انجام شده"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-3 h-3 text-red-600"}),e.jsx("span",{className:"text-red-600",children:"رد شده:"}),e.jsx("span",{children:"درخواست رد شده است"})]})]})]})]})}export{He as default};
