import{r,t as R,v as P,w as k,x as A,y as F,j as e,q as E,C as l,e as n,T as I,b as o,c as i,d}from"./index-tH8kGzNV.js";import{T as L}from"./trending-down-HaRH2stY.js";import{R as j,A as $,C as q,X as B,Y as K,T as u,a as x,P as U,b as X,c as Y}from"./AreaChart-D5HVI-Po.js";function J(){const[t,f]=r.useState(null),[h,p]=r.useState([]),[c,N]=r.useState([]),[m,v]=r.useState([]),[y,g]=r.useState(!0);r.useEffect(()=>{b()},[]);const b=async()=>{try{g(!0),await Promise.all([C(),w(),D(),S()])}catch(s){console.error("Error fetching dashboard data:",s),R.error("خطا در بارگذاری اطلاعات داشبورد")}finally{g(!1)}},C=async()=>{try{f({totalParts:0,totalTransfers:0,totalElevators:0,totalRequests:0,partsChange:"+0%",transfersChange:"+0%",elevatorsChange:"+0%",requestsChange:"+0%"})}catch(s){throw s}},w=async()=>{try{p([])}catch(s){throw s}},D=async()=>{try{N([])}catch(s){throw s}},S=async()=>{try{v([])}catch(s){throw s}},T=[{title:"تعداد قطعات",value:t?.totalParts.toLocaleString("fa-IR")||"0",change:t?.partsChange||"+0%",trend:"up",icon:P,color:"text-blue-600",bgColor:"bg-blue-50"},{title:"انتقال‌ها",value:t?.totalTransfers.toLocaleString("fa-IR")||"0",change:t?.transfersChange||"+0%",trend:"up",icon:k,color:"text-green-600",bgColor:"bg-green-50"},{title:"آسانسورها",value:t?.totalElevators.toLocaleString("fa-IR")||"0",change:t?.elevatorsChange||"+0%",trend:"up",icon:A,color:"text-purple-600",bgColor:"bg-purple-50"},{title:"درخواست‌ها",value:t?.totalRequests.toLocaleString("fa-IR")||"0",change:t?.requestsChange||"+0%",trend:"down",icon:F,color:"text-orange-600",bgColor:"bg-orange-50"}];return y?e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(E,{className:"h-8 w-8 animate-spin mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"در حال بارگذاری داده‌های داشبورد..."})]})}):e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"داشبورد"}),e.jsx("p",{className:"text-muted-foreground",children:"خلاصه‌ای از وضعیت سامانه"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:T.map((s,a)=>e.jsx(l,{children:e.jsx(n,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx("p",{className:"text-2xl font-bold",children:s.value}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.trend==="up"?e.jsx(I,{className:"h-4 w-4 text-green-600"}):e.jsx(L,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:`text-sm ${s.trend==="up"?"text-green-600":"text-red-600"}`,children:s.change})]})]}),e.jsx("div",{className:`p-3 rounded-lg ${s.bgColor}`,children:e.jsx(s.icon,{className:`h-6 w-6 ${s.color}`})})]})})},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(l,{children:[e.jsxs(o,{children:[e.jsx(i,{children:"روند فعالیت‌ها"}),e.jsx(d,{children:"نمودار روند قطعات، انتقال‌ها و آسانسورها در ۶ ماه اخیر"})]}),e.jsx(n,{children:e.jsx("div",{className:"h-80",children:h.length>0?e.jsx(j,{width:"100%",height:"100%",children:e.jsxs($,{data:h,children:[e.jsx(q,{strokeDasharray:"3 3"}),e.jsx(B,{dataKey:"month"}),e.jsx(K,{}),e.jsx(u,{}),e.jsx(x,{type:"monotone",dataKey:"parts",stackId:"1",stroke:"#0088FE",fill:"#0088FE",name:"قطعات"}),e.jsx(x,{type:"monotone",dataKey:"transfers",stackId:"1",stroke:"#00C49F",fill:"#00C49F",name:"انتقال‌ها"}),e.jsx(x,{type:"monotone",dataKey:"elevators",stackId:"1",stroke:"#FFBB28",fill:"#FFBB28",name:"آسانسورها"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"داده‌ای برای نمایش وجود ندارد"})})})})]}),e.jsxs(l,{children:[e.jsxs(o,{children:[e.jsx(i,{children:"توزیع انواع قطعات"}),e.jsx(d,{children:"درصد انواع مختلف قطعات در سامانه"})]}),e.jsx(n,{children:e.jsx("div",{className:"h-80",children:c.length>0?e.jsx(j,{width:"100%",height:"100%",children:e.jsxs(U,{children:[e.jsx(X,{data:c,cx:"50%",cy:"50%",outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:s,percent:a})=>`${s} ${(a*100).toFixed(0)}%`,children:c.map((s,a)=>e.jsx(Y,{fill:s.color},`cell-${a}`))}),e.jsx(u,{})]})}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("p",{className:"text-muted-foreground",children:"داده‌ای برای نمایش وجود ندارد"})})})})]})]}),e.jsxs(l,{children:[e.jsxs(o,{children:[e.jsx(i,{children:"فعالیت‌های اخیر"}),e.jsx(d,{children:"آخرین تغییرات و فعالیت‌ها در سامانه"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:m.length>0?m.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.type==="create"?"bg-green-500":s.type==="transfer"?"bg-blue-500":s.type==="elevator"?"bg-purple-500":s.type==="request"?"bg-orange-500":"bg-gray-500"}`}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:s.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.user})]})]}),e.jsx("span",{className:"text-sm text-muted-foreground",children:s.time})]},a)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"فعالیت اخیری وجود ندارد"})})})})]})]})}export{J as default};
