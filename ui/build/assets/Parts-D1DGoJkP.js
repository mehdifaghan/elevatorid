import{r as o,j as e,B as M,C as S,e as P,L as i,p as u,t as m,v as Y,o as z,Q as Z,R as ee,z as te,D as se,E,F as ae,b as q,c as B}from"./index-tH8kGzNV.js";import{D as L,a as re,b as G,c as O,d as K,e as W}from"./dialog-DAjwwShP.js";import{S as _}from"./scroll-area-VRfuIe_R.js";import{D as le,a as ne,b as ie,c as R}from"./dropdown-menu-BKfQT_JD.js";import{S as N,a as v,b as C,c as w,d as h}from"./select-B8NiX_r6.js";import{S as ce}from"./switch-DOMxWR7b.js";import{Q as de}from"./QRCodeGenerator-DzqPO6-F.js";import{A as me}from"./AdvancedTable-BFnDxHqp.js";import{PersianDatePicker as oe}from"./PersianDatePicker-1MwY2jFT.js";import{P as ue}from"./plus-A2-5MgKF.js";import{E as xe}from"./ellipsis-J_HkHiqq.js";import{S as he}from"./square-pen-BV4EFpYT.js";import{T as pe}from"./trash-2-BwVZTJjK.js";import"./index-DGGMjIYi.js";import"./Combination-Dzecd94B.js";import"./x-B6dSK8zO.js";import"./index-BdQq_4o_.js";import"./chevron-right-B97jr1RJ.js";import"./check-DV_4N94Y.js";import"./index-BuiImgyP.js";import"./download-BGqk_jGh.js";import"./copy-CIVXPvX_.js";import"./table-DC3MYrD8.js";import"./search-8LTSveb2.js";import"./popover-B3pW-y7H.js";import"./utils-BvTIn9cQ.js";const J=[{id:"1",name:"موتور",technicalSpecs:[{name:"قدرت",type:"number",unit:"HP"},{name:"ولتاژ",type:"number",unit:"V"},{name:"فرکانس",type:"number",unit:"Hz"},{name:"دور در دقیقه",type:"number",unit:"RPM"},{name:"نوع موتور",type:"list",unit:"AC/DC/سرو"}],children:[{id:"1-1",name:"موتور AC",parentId:"1",technicalSpecs:[{name:"قدرت",type:"number",unit:"HP"},{name:"ولتاژ ورودی",type:"number",unit:"V"},{name:"فرکانس",type:"number",unit:"Hz"},{name:"نوع روتور",type:"list",unit:"قفسه سنجابی/حلقه‌ای"},{name:"راندمان",type:"number",unit:"%"}]},{id:"1-2",name:"موتور DC",parentId:"1",technicalSpecs:[{name:"قدرت",type:"number",unit:"HP"},{name:"ولتاژ",type:"number",unit:"V"},{name:"جریان",type:"number",unit:"A"},{name:"نوع کموتاتور",type:"list",unit:"کربنی/مسی"},{name:"مقاوم به آب",type:"boolean",unit:"بله/خیر"}]},{id:"1-3",name:"موتور گیربکس",parentId:"1",technicalSpecs:[{name:"قدرت",type:"number",unit:"HP"},{name:"نسبت گیربکس",type:"text",unit:"نسبت"},{name:"گشتاور خروجی",type:"number",unit:"Nm"},{name:"نوع گیربکس",type:"list",unit:"چرخ دنده‌ای/کرمی"}]}]},{id:"2",name:"کنترلر",technicalSpecs:[{name:"قدرت",type:"number",unit:"KW"},{name:"ولتاژ ورودی",type:"number",unit:"V"},{name:"ولتاژ خروجی",type:"number",unit:"V"},{name:"نوع ارتباط",type:"list",unit:"RS485/CAN/Ethernet"},{name:"تنظیمات قابل برنامه‌ریزی",type:"boolean",unit:"بله/خیر"}],children:[{id:"2-1",name:"کنترلر فرکانس",parentId:"2",technicalSpecs:[{name:"قدرت",type:"number",unit:"KW"},{name:"ولتاژ ورودی",type:"number",unit:"V"},{name:"محدوده فرکانس",type:"text",unit:"Hz"},{name:"نوع کنترل",type:"list",unit:"V/f/Vector/DTC"},{name:"محافظت از موتور",type:"boolean",unit:"بله/خیر"}]},{id:"2-2",name:"کنترلر حرکت",parentId:"2",technicalSpecs:[{name:"تعداد محور",type:"number",unit:"محور"},{name:"دقت موقعیت",type:"number",unit:"mm"},{name:"سرعت حداکثر",type:"number",unit:"m/s"},{name:"نوع انکودر",type:"list",unit:"افزایشی/مطلق"}]}]},{id:"3",name:"کابل",technicalSpecs:[{name:"قطر",type:"number",unit:"mm"},{name:"ظرفیت جریان",type:"number",unit:"A"},{name:"ولتاژ مجاز",type:"number",unit:"V"},{name:"جنس",type:"list",unit:"مس/آلومینیوم/فولاد"},{name:"عایق",type:"list",unit:"PVC/XLPE/EPR"}],children:[{id:"3-1",name:"کابل فولادی",parentId:"3",technicalSpecs:[{name:"قطر",type:"number",unit:"mm"},{name:"استحکام شکست",type:"number",unit:"N"},{name:"تعداد رشته",type:"number",unit:"رشته"},{name:"پوشش",type:"list",unit:"گالوانیزه/استنلس/بدون"},{name:"انعطاف‌پذیری",type:"list",unit:"نرم/سخت/نیمه‌نرم"}]},{id:"3-2",name:"کابل برق",parentId:"3",technicalSpecs:[{name:"مقطع",type:"number",unit:"mm²"},{name:"تعداد رشته",type:"number",unit:"رشته"},{name:"نوع عایق",type:"list",unit:"PVC/XLPE/EPR"},{name:"ولتاژ مجاز",type:"number",unit:"V"},{name:"مقاوم به حریق",type:"boolean",unit:"بله/خیر"}]}]}],U=[{id:"1",name:"موتور آسانسور AC",model:"AC-2000",serialNumber:"AC20001234",categoryId:"1-1",categoryName:"موتور AC",manufacturer:"شرکت موتور پارس",specifications:{power:"10HP",voltage:"380V",frequency:"50Hz",speed:"1450RPM"},status:"available",ownerId:"1",ownerName:"شرکت آسانسار تهران",createdAt:"۱۴۰۲/۰۹/۱۵",qrCode:"QR123456"},{id:"2",name:"کنترلر فرکانس VFD",model:"VFD-500",serialNumber:"VFD5005678",categoryId:"2-1",categoryName:"کنترلر فرکانس",manufacturer:"شرکت الکترونیک پیشرو",specifications:{power:"5.5KW",inputVoltage:"380V",outputVoltage:"0-380V",frequency:"0-50Hz"},status:"installed",ownerId:"2",ownerName:"شرکت نصب سریع",createdAt:"۱۴۰۲/۰۹/۱۲",qrCode:"QR789012"}],ge={available:"bg-green-100 text-green-800",sold:"bg-blue-100 text-blue-800",installed:"bg-purple-100 text-purple-800",maintenance:"bg-yellow-100 text-yellow-800"},je={available:"موجود",sold:"فروخته شده",installed:"نصب شده",maintenance:"در تعمیر"};function Ke(){const[d,D]=o.useState(U),[a,c]=o.useState(J),[p,T]=o.useState(null),[A,V]=o.useState(!1),[g,j]=o.useState(!1),b={total:d.length,inStock:d.filter(l=>l.status==="in_stock").length,inUse:d.filter(l=>l.status==="in_use").length,broken:d.filter(l=>l.status==="broken").length},x=r=>{confirm(`آیا از حذف ${r.name} اطمینان دارید؟`)&&(D(l=>l.filter(f=>f.id!==r.id)),m.success(`${r.name} حذف شد`))},$=async()=>{j(!0);try{await new Promise(r=>setTimeout(r,1e3)),D(U),c(J),m.success("داده‌ها با موفقیت به‌روزرسانی شد")}catch{m.error("خطا در به‌روزرسانی داده‌ها")}finally{j(!1)}},H=(r,l)=>{let f=null;for(const F of a)if(F.children&&F.children.find(t=>t.id===r)){f=F;break}return f?`${f.name} / ${l}`:l},k=[{key:"name",label:"نام قطعه",sortable:!0,render:(r,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:r})]})},{key:"model",label:"مدل/سریال",sortable:!0,render:(r,l)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:r}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l.serialNumber})]})},{key:"categoryName",label:"دسته‌بندی",filterable:!0,render:(r,l)=>e.jsx(z,{variant:"outline",className:"text-xs",children:H(l.categoryId,r)})},{key:"manufacturer",label:"سازنده",sortable:!0},{key:"ownerName",label:"مالک",sortable:!0},{key:"status",label:"وضعیت",filterable:!0,sortable:!0,render:r=>e.jsx(z,{variant:"secondary",className:ge[r],children:je[r]})},{key:"createdAt",label:"تاریخ ثبت",sortable:!0},{key:"actions",label:"عملیات",render:(r,l)=>e.jsxs(le,{children:[e.jsx(ne,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(xe,{className:"w-4 h-4"})})}),e.jsxs(ie,{align:"end",style:{direction:"rtl"},children:[e.jsxs(R,{onClick:()=>T(l),style:{textAlign:"right",justifyContent:"flex-end"},children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"شناسنامه قطعه"]}),e.jsxs(R,{style:{textAlign:"right",justifyContent:"flex-end"},children:[e.jsx(he,{className:"w-4 h-4 mr-2"}),"ویرایش"]}),e.jsxs(R,{style:{textAlign:"right",justifyContent:"flex-end"},children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"QR Code"]}),e.jsxs(R,{onClick:()=>x(l),className:"text-destructive focus:text-destructive",style:{textAlign:"right",justifyContent:"flex-end"},children:[e.jsx(pe,{className:"w-4 h-4 mr-2"}),"حذف"]})]})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"مدیریت قطعات"}),e.jsx("p",{className:"text-muted-foreground",children:"لیست و مدیریت تمامی قطعات سیستم"})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(L,{open:A,onOpenChange:V,children:[e.jsx(re,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(ue,{className:"w-4 h-4 ml-2"}),"ثبت قطعه جدید"]})}),e.jsxs(G,{className:"max-w-4xl max-h-[90vh]",style:{direction:"rtl",textAlign:"right"},children:[e.jsxs(O,{style:{textAlign:"right"},children:[e.jsx(K,{style:{textAlign:"right"},children:"ثبت قطعه جدید"}),e.jsx(W,{style:{textAlign:"right"},children:"اطلاعات قطعه جدید را وارد کنید"})]}),e.jsx(_,{className:"max-h-[calc(90vh-8rem)] overflow-auto",style:{direction:"rtl"},children:e.jsx(be,{categories:a,onClose:()=>V(!1)})})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsx(S,{className:"border-l-4 border-l-blue-500",children:e.jsx(P,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"کل قطعات"})]})})}),e.jsx(S,{className:"border-l-4 border-l-green-500",children:e.jsx(P,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-green-600",children:b.inStock}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"در انبار"})]})})}),e.jsx(S,{className:"border-l-4 border-l-yellow-500",children:e.jsx(P,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:b.inUse}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"در استفاده"})]})})}),e.jsx(S,{className:"border-l-4 border-l-red-500",children:e.jsx(P,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-red-600",children:b.broken}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"خراب"})]})})})]}),e.jsx(me,{data:d,columns:k,searchable:!0,filterable:!0,exportable:!0,pagination:!0,pageSize:15,emptyMessage:"قطعه‌ای یافت نشد",onRowClick:r=>T(r),onRefresh:$,refreshing:g}),p&&e.jsx(L,{open:!!p,onOpenChange:()=>T(null),children:e.jsxs(G,{className:"max-w-5xl max-h-[90vh]",style:{direction:"rtl",textAlign:"right"},children:[e.jsxs(O,{style:{textAlign:"right"},children:[e.jsxs(K,{style:{textAlign:"right"},children:["شناسنامه قطعه: ",p.name]}),e.jsx(W,{style:{textAlign:"right"},children:"مشاهده اطلاعات کامل و مشخصات فنی قطعه"})]}),e.jsx(_,{className:"max-h-[calc(90vh-8rem)] overflow-auto",style:{direction:"rtl"},children:e.jsx(fe,{part:p})})]})})]})}const X=["ایران","آلمان","ایتالیا","ترکیه","چین","کره جنوبی","ژاپن","فنلاند","سوئد","سوئیس"];function be({categories:d,onClose:D}){const[a,c]=o.useState({name:"",model:"",serialNumber:"",categoryId:"",manufacturer:"",brand:"",price:"",productType:"manufactured",manufacturerCountry:"ایران",originCountry:"",productionDate:"",specifications:{}}),[p,T]=o.useState(!1),[A,V]=o.useState(1),[g,j]=o.useState([""]),[I,b]=o.useState(null),x=o.useMemo(()=>{if(!a.categoryId)return null;const t=d.find(s=>s.id===a.categoryId);if(t)return t;for(const s of d)if(s.children){const n=s.children.find(y=>y.id===a.categoryId);if(n)return n}return null},[a.categoryId,d]),$=t=>{if(t.preventDefault(),a.productType==="imported"&&!I){m.error("برای قطعات وارداتی، بارگذاری برگه سبز ترخیص کالا الزامی است");return}if(p){if(g.filter(y=>!y.trim()).length>0){m.error("لطفاً تمام شماره‌های سریال را وارد کنید");return}if(new Set(g).size!==g.length){m.error("شماره‌های سریال نمی‌توانند تکراری باشند");return}m.success(`${A} قطعه ${a.productType==="imported"?"وارداتی":"تولیدی"} دسته‌ای ثبت شد`)}else m.success(`قطعه ${a.productType==="imported"?"وارداتی":"تولیدی"} جدید ثبت شد`);D()},H=t=>{console.log("Category changed to:",t),c(s=>({...s,categoryId:t,specifications:{}}))},k=(t,s)=>{c(n=>({...n,specifications:{...n.specifications,[t]:s}}))},r=t=>{T(t),t?(j(Array(A).fill("")),c(s=>({...s,serialNumber:""}))):(j([""]),V(1))},l=t=>{V(t);const s=Array(t).fill("");for(let n=0;n<Math.min(t,g.length);n++)s[n]=g[n]||"";j(s)},f=(t,s)=>{j(n=>{const y=[...n];return y[t]=s,y})},F=t=>{const s=t.target.files?.[0];if(s){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(s.type)){m.error("فقط فایل‌های PDF، JPG و PNG مجاز هستند");return}if(s.size>5*1024*1024){m.error("حجم فایل نباید بیشتر از ۵ مگابایت باشد");return}b(s),m.success("فایل برگه سبز ترخیص کالا بارگذاری شد")}},Q=t=>{c(s=>{const n={...s,productType:t};return t==="manufactured"?n.manufacturerCountry="ایران":t==="imported"&&(n.manufacturerCountry=""),n}),t==="manufactured"&&I&&b(null)};return e.jsx("div",{className:"space-y-6",dir:"rtl",children:e.jsxs("form",{onSubmit:$,className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 flex items-center gap-2 mb-4",children:"📦 اطلاعات پایه قطعه"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",className:"text-blue-700 flex items-center gap-2",children:"📝 نام قطعه *"}),e.jsx(u,{id:"name",placeholder:"نام قطع�� را وارد کنید",value:a.name,onChange:t=>c(s=>({...s,name:t.target.value})),className:"bg-white border-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"model",className:"text-blue-700 flex items-center gap-2",children:"🏷️ مدل *"}),e.jsx(u,{id:"model",placeholder:"مدل قطعه",value:a.model,onChange:t=>c(s=>({...s,model:t.target.value})),className:"bg-white border-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"category",className:"text-blue-700 flex items-center gap-2",children:"📂 دسته‌بندی قطعه *"}),e.jsxs(N,{value:a.categoryId,onValueChange:H,children:[e.jsx(v,{className:"bg-white border-blue-300",children:e.jsx(C,{placeholder:"انتخاب دسته‌بندی"})}),e.jsx(w,{children:d.flatMap(t=>t.children?t.children.map(s=>e.jsx(h,{value:s.id,children:s.name},s.id)):[e.jsx(h,{value:t.id,children:t.name},t.id)])})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"manufacturer",className:"text-blue-700 flex items-center gap-2",children:"🏭 سازنده *"}),e.jsx(u,{id:"manufacturer",placeholder:"نام سازنده",value:a.manufacturer,onChange:t=>c(s=>({...s,manufacturer:t.target.value})),className:"bg-white border-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"brand",className:"text-blue-700 flex items-center gap-2",children:"🏢 برند"}),e.jsx(u,{id:"brand",placeholder:"نام برند",value:a.brand,onChange:t=>c(s=>({...s,brand:t.target.value})),className:"bg-white border-blue-300"})]})]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-indigo-800 flex items-center gap-2",children:"📊 نحوه ثبت قطعه"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{htmlFor:"batch-mode",className:"text-indigo-700 flex items-center gap-2",children:"📦 ثبت دسته‌ای"}),e.jsx(ce,{id:"batch-mode",checked:p,onCheckedChange:r})]})]}),p?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-300",children:[e.jsx("p",{className:"text-indigo-700 mb-3 flex items-center gap-2",children:"✨ حالت ثبت دسته‌ای فعال است"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-indigo-700 flex items-center gap-2",children:"🔢 تعداد قطعات *"}),e.jsx(u,{type:"number",min:1,max:50,value:A,onChange:t=>l(Math.max(1,Math.min(50,parseInt(t.target.value)||1))),className:"bg-white border-indigo-300 text-left",dir:"ltr"}),e.jsx("p",{className:"text-xs text-indigo-600",children:"💡 حداکثر ۵۰ قطعه در هر بار"})]})})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-300",children:[e.jsx("h4",{className:"font-medium text-indigo-800 mb-3 flex items-center gap-2",children:"🏷️ شماره‌های سریال قطعات"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:g.map((t,s)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs(i,{className:"text-indigo-700 text-sm",children:["قطعه ",s+1]}),e.jsx(u,{placeholder:`Serial Number ${s+1}`,value:t,onChange:n=>f(s,n.target.value),className:"bg-white border-indigo-300 text-left",dir:"ltr",required:!0})]},s))}),e.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"⚠️ تمام شماره‌های سریال باید منحصر به فرد باشند"})]})]}):e.jsx("div",{className:"bg-white p-3 rounded border border-indigo-300",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"serialNumber",className:"text-indigo-700 flex items-center gap-2",children:"🔢 شماره سریال *"}),e.jsx(u,{id:"serialNumber",placeholder:"Serial Number",value:a.serialNumber,onChange:t=>c(s=>({...s,serialNumber:t.target.value})),className:"bg-white border-indigo-300 text-left",dir:"ltr",required:!0}),e.jsx("p",{className:"text-xs text-indigo-600",children:"💡 برای ثبت چندین قطعه با مشخصات یکسان، حالت دسته‌ای را فعال کنید"})]})})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-medium text-green-800 flex items-center gap-2 mb-4",children:"💰 اطلاعات قیمت"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"price",className:"text-green-700 flex items-center gap-2",children:"💵 قیمت (ریال)"}),e.jsx(u,{id:"price",type:"number",placeholder:"قیمت قطعه به ریال",value:a.price,onChange:t=>c(s=>({...s,price:t.target.value})),className:"bg-white border-green-300 text-left",dir:"ltr"}),e.jsx("p",{className:"text-xs text-green-600",children:'💡 در صورت عدم وارد کردن، قیمت به عنوان "تعیین نشده" ثبت خواهد شد'})]})]}),a.categoryId&&e.jsx("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-300",children:e.jsxs("p",{className:"text-xs text-yellow-800",children:["🐛 Debug: categoryId = ",a.categoryId,", selectedCategory = ",x?.name||"null",", specs = ",x?.technicalSpecs?.length||0]})}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"font-medium text-purple-800 flex items-center gap-2 mb-4",children:"🌍 اطلاعات تولید/واردات"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-purple-700 flex items-center gap-2",children:"🏭 نوع قطعه *"}),e.jsxs(N,{value:a.productType,onValueChange:Q,children:[e.jsx(v,{className:"bg-white border-purple-300",children:e.jsx(C,{})}),e.jsxs(w,{children:[e.jsx(h,{value:"manufactured",children:"🏭 تولیدی"}),e.jsx(h,{value:"imported",children:"🚢 وارداتی"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-purple-700 flex items-center gap-2",children:["📅 ",a.productType==="manufactured"?"تاریخ تولید":"تاریخ واردات"]}),e.jsx(oe,{value:a.productionDate,onChange:t=>c(s=>({...s,productionDate:t})),placeholder:a.productType==="manufactured"?"انتخاب تاریخ تولید":"انتخاب تاریخ واردات"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-purple-700 flex items-center gap-2",children:["🏳️ کشور سازنده *",a.productType==="manufactured"&&e.jsx("span",{className:"text-xs text-green-600",children:"(اتوماتیک)"})]}),e.jsxs(N,{value:a.manufacturerCountry,onValueChange:t=>c(s=>({...s,manufacturerCountry:t})),disabled:a.productType==="manufactured",children:[e.jsx(v,{className:`bg-white border-purple-300 ${a.productType==="manufactured"?"opacity-75 cursor-not-allowed":""}`,children:e.jsx(C,{placeholder:a.productType==="manufactured"?"ایران":"انتخاب کشور"})}),e.jsx(w,{children:X.map(t=>e.jsx(h,{value:t,children:t},t))})]}),a.productType==="manufactured"&&e.jsx("p",{className:"text-xs text-green-600 flex items-center gap-1",children:"✨ برای قطعات تولیدی، کشور سازنده اتوماتیک ایران انتخاب می‌شود"})]}),a.productType==="imported"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-purple-700 flex items-center gap-2",children:"🌍 کشور مبدأ"}),e.jsxs(N,{value:a.originCountry,onValueChange:t=>c(s=>({...s,originCountry:t})),children:[e.jsx(v,{className:"bg-white border-purple-300",children:e.jsx(C,{placeholder:"انتخاب کشور مبدأ"})}),e.jsx(w,{children:X.map(t=>e.jsx(h,{value:t,children:t},t))})]})]})]}),a.productType==="imported"&&e.jsx("div",{className:"mt-4 space-y-3",children:e.jsxs("div",{className:"bg-orange-50 p-3 rounded border border-orange-300",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-3 flex items-center gap-2",children:"📄 مدارک واردات (الزامی)"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-orange-700 flex items-center gap-2",children:"📋 برگه سبز ترخیص کالا *"}),e.jsx(u,{type:"file",accept:".pdf,.jpg,.jpeg,.png",onChange:F,className:"bg-white border-orange-300"}),I&&e.jsxs("p",{className:"text-xs text-green-600 flex items-center gap-1",children:["✅ فایل انتخاب شده: ",I.name]}),e.jsx("p",{className:"text-xs text-orange-600",children:"📎 فرمت‌های مجاز: PDF، JPG، PNG | حداکثر حجم: ۵ مگابایت"})]})})]})})]}),x&&x.technicalSpecs&&x.technicalSpecs.length>0&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:[e.jsxs("h3",{className:"font-medium text-gray-800 flex items-center gap-2 mb-4",children:["⚙️ مشخصات فنی (",x.name,")"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.technicalSpecs.map(t=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-gray-700 flex items-center gap-2",children:["🔧 ",t.name," ",t.unit&&`(${t.unit})`]}),t.type==="list"?e.jsxs(N,{value:a.specifications[t.name]||"",onValueChange:s=>k(t.name,s),children:[e.jsx(v,{className:"bg-white border-gray-300",children:e.jsx(C,{placeholder:`انتخاب ${t.name}`})}),e.jsx(w,{children:t.unit.split("/").map(s=>e.jsx(h,{value:s,children:s},s))})]}):t.type==="boolean"?e.jsxs(N,{value:a.specifications[t.name]||"",onValueChange:s=>k(t.name,s),children:[e.jsx(v,{className:"bg-white border-gray-300",children:e.jsx(C,{placeholder:`انتخاب ${t.name}`})}),e.jsxs(w,{children:[e.jsx(h,{value:"true",children:"بله"}),e.jsx(h,{value:"false",children:"خیر"})]})]}):e.jsx(u,{type:t.type==="number"?"number":"text",placeholder:`وارد کردن ${t.name}`,value:a.specifications[t.name]||"",onChange:s=>k(t.name,s.target.value),className:"bg-white border-gray-300"})]},t.name))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[e.jsx(M,{type:"button",variant:"outline",onClick:D,className:"border-gray-300 text-gray-700 hover:bg-gray-50",children:"انصراف"}),e.jsx(M,{type:"submit",className:"bg-black hover:bg-gray-800 text-white",children:"ثبت قطعه"})]})]})})}function fe({part:d}){return e.jsx("div",{className:"space-y-6",dir:"rtl",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsxs(te,{defaultValue:"info",className:"w-full",dir:"rtl",children:[e.jsxs(se,{className:"grid w-full grid-cols-2",dir:"rtl",children:[e.jsx(E,{value:"info",className:"text-right",children:"اطلاعات قطعه"}),e.jsx(E,{value:"history",className:"text-right",children:"تاریخچه"})]}),e.jsx(ae,{value:"info",className:"space-y-4",dir:"rtl",children:e.jsxs(S,{className:"text-right",children:[e.jsx(q,{className:"text-right",children:e.jsx(B,{className:"text-lg text-right",children:"اطلاعات کامل قطعه"})}),e.jsx(P,{className:"text-right",children:e.jsx("div",{className:"space-y-6 text-right",children:e.jsxs("div",{className:"text-right",children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-3 text-right",children:"اطلاعات پایه"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground text-right",children:"نام قطعه:"}),e.jsx("p",{className:"mt-1 font-medium text-right",children:d.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground text-right",children:"مدل:"}),e.jsx("p",{className:"mt-1 font-medium text-right",children:d.model})]})]})]})})})]})})]})}),e.jsx("div",{className:"lg:col-span-1",dir:"rtl",children:e.jsxs(S,{className:"text-right",children:[e.jsx(q,{className:"text-right",children:e.jsx(B,{className:"text-lg text-right",children:"کد QR قطعه"})}),e.jsx(P,{className:"flex flex-col items-center space-y-4 text-right",children:e.jsx(de,{data:`https://elevatorid.ieeu.ir/part/${d.serialNumber}`,title:"کد QR قطعه",size:180})})]})})]})})}export{Ke as default};
