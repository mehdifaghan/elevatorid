import{a1 as xe,r as o,t as r,$ as he,j as e,C,e as D,p as O,B as f,q as G,L as I,o as J,v as q,x as K,A as pe,O as ge,n as je,b as ve,c as ue,z as ye,D as fe,E as Y,F as Z}from"./index-tH8kGzNV.js";import{S as x}from"./skeleton-vzO12S3j.js";import{r as T}from"./real-api-client-o-2gE2Hp.js";import{D as Ne,a as be,b as we,c as Se,d as Ae,e as Ce}from"./dialog-DAjwwShP.js";import{S as F,a as P,b as z,c as Q,d as k}from"./select-B8NiX_r6.js";import{D as Te,a as Ee,b as Ie,c as ee}from"./dropdown-menu-BKfQT_JD.js";import{S as ke}from"./search-8LTSveb2.js";import{P as se}from"./plus-A2-5MgKF.js";import{T as te}from"./trash-2-BwVZTJjK.js";import{F as De,a as _e,E as Le}from"./folder-MPbAmMv8.js";import{P as Me}from"./pen-CJgjb0UZ.js";import Fe from"./ElevatorCategoryManagement-_CG_SBMk.js";import{W as Pe}from"./wifi-off-Dwx8fKBJ.js";import"./index-DGGMjIYi.js";import"./Combination-Dzecd94B.js";import"./x-B6dSK8zO.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";import"./check-DV_4N94Y.js";import"./chevron-right-B97jr1RJ.js";import"./switch-DOMxWR7b.js";import"./textarea-1hTYB3HE.js";import"./ellipsis-J_HkHiqq.js";import"./square-pen-BV4EFpYT.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Re=xe("wifi",ze);let V=[];const ae={"Ù…ÙˆØªÙˆØ± Ø¢Ø³Ø§Ù†Ø³ÙˆØ±":"âš™ï¸","Ú©Ø§Ø¨Ù„ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±":"ğŸ”Œ","Ø¯Ø±Ø¨ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±":"ğŸšª","ØªØ¬Ù‡ÛŒØ²Ø§Øª ÙˆØ±ÙˆØ¯ÛŒ":"ğŸ—ï¸","Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„":"ğŸ›ï¸",Ú†Ø±Ø§Øºâ€ŒÙ‡Ø§:"ğŸ’¡",Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§:"ğŸ”˜"},A=h=>({name:h?.name||"",type:h?.type&&["text","number","boolean","select","multiselect"].includes(h.type)?h.type:"text",unit:h?.unit||"",options:h?.options});function $e({triggerDialog:h,onStatsChange:R,apiError:_,isApiAvailable:L}){const[c,M]=o.useState([]),[u,N]=o.useState([]),[y,E]=o.useState(!0),[b,w]=o.useState(!0),[n,S]=o.useState(""),[i,d]=o.useState({name:"",elevatorTypeId:"",parentId:void 0,technicalSpecs:[A()]}),[p,m]=o.useState(null),[g,j]=o.useState(!1);o.useEffect(()=>{U(),$()},[]);const U=async()=>{try{if(w(!0),V.length>0&&L!==!1){N(V),w(!1);return}const s=await T.get("/admin/elevator-types"),a=s.elevator_types||s.elevatorTypes||s.data||s||[],l=Array.isArray(a)?a.map(t=>({id:t.id?.toString()||t._id?.toString(),name:t.name||t.title,description:t.description||""})):[];V=l,N(l)}catch(s){if(console.error("Error fetching elevator types:",s),V=[],N([]),s&&typeof s=="object"&&"isNetworkError"in s){const a=s;a.isNetworkError?r.error("Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±"):a.isAuthError?r.error("Ø®Ø·Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±"):r.error("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±")}else r.error("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±")}finally{w(!1)}},$=async()=>{try{E(!0);const s=await T.get("/admin/parts-categories"),a=s.categories||s.parts_categories||s.data||s||[],l=Array.isArray(a)?a.map(t=>({id:t.id?.toString()||t._id?.toString(),name:t.name||t.title,elevatorTypeId:t.elevator_type_id?.toString()||t.elevatorTypeId?.toString(),parentId:t.parent_id?.toString()||t.parentId?.toString(),technicalSpecs:t.technical_specs||t.technicalSpecs||[],createdAt:t.created_at||t.createdAt||new Date().toLocaleDateString("fa-IR"),updatedAt:t.updated_at||t.updatedAt,isActive:t.is_active!==void 0?t.is_active:t.isActive!==void 0?t.isActive:!0})):[];M(l)}catch(s){if(console.error("Error fetching categories:",s),M([]),s&&typeof s=="object"&&"isNetworkError"in s){const a=s;a.isNetworkError?r.error("Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§"):a.isAuthError?r.error("Ø®Ø·Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§"):r.error("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§")}else r.error("Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§")}finally{E(!1)}},B=()=>{d({name:"",elevatorTypeId:"",parentId:void 0,technicalSpecs:[A()]})};he.useEffect(()=>{h&&(B(),m(null),j(!0))},[h]);const re=()=>{d(s=>({...s,technicalSpecs:[...s.technicalSpecs,A()]}))},le=s=>{i.technicalSpecs.length>1&&d(a=>({...a,technicalSpecs:a.technicalSpecs.filter((l,t)=>t!==s)}))},W=(s,a,l)=>{d(t=>({...t,technicalSpecs:t.technicalSpecs.map((v,H)=>H===s?A({...v,[a]:l}):v)}))},ie=async s=>{if(s.preventDefault(),!i.name.trim()){r.error("Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª");return}if(u.length===0){r.error("Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø§Ø² API Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.");return}if(!i.elevatorTypeId){r.error("Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø§Ù„Ø²Ø§Ù…ÛŒ Ø§Ø³Øª");return}const a=i.technicalSpecs.map(A).filter(t=>t.name.trim()&&t.type&&t.unit.trim()),l={name:i.name.trim(),elevatorTypeId:i.elevatorTypeId,parentId:i.parentId,technicalSpecs:a};try{const t={name:l.name,elevator_type_id:l.elevatorTypeId,parent_id:l.parentId,technical_specs:l.technicalSpecs};p?(await T.put(`/admin/parts-categories/${p.id}`,t),r.success("Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯")):(await T.post("/admin/parts-categories",t),r.success("Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯")),j(!1),B(),m(null),$(),R?.()}catch(t){if(console.error("Error saving category:",t),t&&typeof t=="object"&&"isNetworkError"in t){const v=t;v.isNetworkError?r.error("Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ"):v.isAuthError?r.error("Ø®Ø·Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª - Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯"):r.error(p?"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ":"Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ")}else r.error(p?"Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ":"Ø®Ø·Ø§ Ø¯Ø± Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ")}},ne=s=>{m(s),d({name:s.name,elevatorTypeId:s.elevatorTypeId,parentId:s.parentId,technicalSpecs:s.technicalSpecs.length>0?s.technicalSpecs.map(A):[A()]}),j(!0)},ce=async s=>{const a=c.find(t=>t.id===s);if(!a)return;if(c.some(t=>t.parentId===s)){r.error("Ù†Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¯Ø§Ø±Ø§ÛŒ Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø±Ø§ Ø­Ø°Ù Ú©Ø±Ø¯");return}if(window.confirm(`Ø¢ÛŒØ§ Ø§Ø² Ø­Ø°Ù Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ "${a.name}" Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø¯Ø§Ø±ÛŒØ¯ØŸ`))try{await T.delete(`/admin/parts-categories/${s}`),r.success(`Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ "${a.name}" Ø­Ø°Ù Ø´Ø¯`),$(),R?.()}catch(t){if(console.error("Error deleting category:",t),t&&typeof t=="object"&&"isNetworkError"in t){const v=t;v.isNetworkError?r.error("Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ± Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ"):v.isAuthError?r.error("Ø®Ø·Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª - Ù„Ø·ÙØ§Ù‹ Ù…Ø¬Ø¯Ø¯Ø§Ù‹ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯"):r.error("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ")}else r.error("Ø®Ø·Ø§ Ø¯Ø± Ø­Ø°Ù Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ")}},X=c.filter(s=>s.name.toLowerCase().includes(n.toLowerCase())),oe=s=>s?c.find(l=>l.id===s)?.name:null,de=s=>u.find(l=>l.id===s)?.name||"Ù†Ø§Ù…Ø´Ø®Øµ",me=s=>c.filter(a=>a.parentId===s).length;return y?e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((s,a)=>e.jsx(C,{className:"border border-gray-200 bg-white",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"h-5 w-5"}),e.jsx(x,{className:"h-6 w-6"}),e.jsxs("div",{children:[e.jsx(x,{className:"h-5 w-32 mb-2"}),e.jsx(x,{className:"h-4 w-48"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-6 w-12"}),e.jsx(x,{className:"h-8 w-8"})]})]})})},a))}):e.jsxs("div",{className:"space-y-6",style:{direction:"rtl"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ke,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(O,{placeholder:"Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§...",value:n,onChange:s=>S(s.target.value),className:"pr-10",style:{textAlign:"right",direction:"rtl"}})]}),e.jsxs(Ne,{open:g,onOpenChange:j,children:[e.jsx(be,{asChild:!0,children:e.jsxs(f,{onClick:()=>{B(),m(null)},className:"bg-gray-900 hover:bg-gray-800 text-white",children:[e.jsx(se,{className:"w-4 h-4 ml-1"}),"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯"]})}),e.jsxs(we,{className:"max-w-2xl max-h-[90vh]",style:{direction:"rtl",textAlign:"right"},children:[e.jsxs(Se,{style:{textAlign:"right"},children:[e.jsx(Ae,{style:{textAlign:"right"},children:p?"ÙˆÛŒØ±Ø§ÛŒØ´ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ":"Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¬Ø¯ÛŒØ¯"}),e.jsx(Ce,{style:{textAlign:"right"},children:"Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‚Ø·Ø¹Ø§Øª Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"})]}),e.jsxs("div",{className:"max-h-[calc(90vh-8rem)] overflow-auto",children:[(L===!1||u.length===0&&!b)&&e.jsxs("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Ù‡Ø´Ø¯Ø§Ø±"})]}),e.jsx("p",{className:"text-sm text-orange-700 mt-1",children:"Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¨Ø±Ø®ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª API. Ù…Ù…Ú©Ù† Ø§Ø³Øª Ø¨Ø±Ø®ÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ Ù‚Ø§Ø¨Ù„ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø¨Ø§Ø´Ù†Ø¯."})]}),e.jsxs("form",{onSubmit:ie,className:"space-y-6",style:{direction:"rtl"},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"name",style:{textAlign:"right",display:"block"},children:"Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ *"}),e.jsx(O,{id:"name",value:i.name,onChange:s=>d(a=>({...a,name:s.target.value})),placeholder:"Ù†Ø§Ù… Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯",required:!0,style:{textAlign:"right",direction:"rtl"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"elevatorTypeId",style:{textAlign:"right",display:"block"},children:"Ù†ÙˆØ¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± *"}),b?e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"h-10 w-full"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±..."})]}):u.length===0?e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{disabled:!0,children:e.jsx(P,{style:{textAlign:"right",direction:"rtl"},className:"bg-gray-50",children:e.jsx(z,{placeholder:"Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª"})})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-red-600",children:"Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±. Ù„Ø·ÙØ§Ù‹ Ø§ØªØµØ§Ù„ Ø§ÛŒÙ†ØªØ±Ù†Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯."}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:U,disabled:b,className:"text-xs",children:[e.jsx(G,{className:`w-3 h-3 ml-1 ${b?"animate-spin":""}`}),b?"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ...":"ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯"]})]})]}):e.jsxs(F,{value:i.elevatorTypeId,onValueChange:s=>d(a=>({...a,elevatorTypeId:s})),children:[e.jsx(P,{style:{textAlign:"right",direction:"rtl"},children:e.jsx(z,{placeholder:"Ù†ÙˆØ¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯..."})}),e.jsx(Q,{style:{direction:"rtl"},children:u.map(s=>e.jsx(k,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(I,{htmlFor:"parentId",style:{textAlign:"right",display:"block"},children:"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÙˆØ§Ù„Ø¯ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)"}),y?e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{className:"h-10 w-full"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§..."})]}):i.elevatorTypeId?e.jsxs(e.Fragment,{children:[e.jsxs(F,{value:i.parentId||"none",onValueChange:s=>d(a=>({...a,parentId:s==="none"?void 0:s})),children:[e.jsx(P,{style:{textAlign:"right",direction:"rtl"},children:e.jsx(z,{placeholder:"Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯..."})}),e.jsxs(Q,{style:{direction:"rtl"},children:[e.jsx(k,{value:"none",children:"Ù‡ÛŒÚ† Ú©Ø¯Ø§Ù… (Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ø§ØµÙ„ÛŒ)"}),c.filter(s=>s.id!==p?.id&&s.elevatorTypeId===i.elevatorTypeId).map(s=>e.jsxs(k,{value:s.id,children:[ae[s.name]||"ğŸ“¦"," ",s.name]},s.id))]})]}),c.filter(s=>s.elevatorTypeId===i.elevatorTypeId).length===0&&c.length>0&&e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ù†ÙˆØ¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÙˆØ¬ÙˆØ¯ Ù†ÛŒØ³Øª."}),c.length===0&&!y&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-orange-600",children:"Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§. Ø§ØªØµØ§Ù„ API Ø¨Ø±Ø±Ø³ÛŒ Ø´ÙˆØ¯."}),e.jsxs(f,{type:"button",variant:"outline",size:"sm",onClick:$,disabled:y,className:"text-xs",children:[e.jsx(G,{className:`w-3 h-3 ml-1 ${y?"animate-spin":""}`}),y?"Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ...":"Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ"]})]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{disabled:!0,children:e.jsx(P,{style:{textAlign:"right",direction:"rtl"},className:"bg-gray-50",children:e.jsx(z,{placeholder:"Ø§Ø¨ØªØ¯Ø§ Ù†ÙˆØ¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"})})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÙˆØ§Ù„Ø¯ØŒ Ø§Ø¨ØªØ¯Ø§ Ù†ÙˆØ¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ± Ø±Ø§ Ù…Ø´Ø®Øµ Ú©Ù†ÛŒØ¯."})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(I,{className:"text-base font-medium",children:"Ù…Ø´Ø®ØµØ§Øª ÙÙ†ÛŒ"}),e.jsxs(f,{type:"button",onClick:re,size:"sm",variant:"outline",children:[e.jsx(se,{className:"w-4 h-4 ml-1"}),"Ø§ÙØ²ÙˆØ¯Ù† Ù…Ø´Ø®ØµÙ‡"]})]}),e.jsx("div",{className:"space-y-3",children:i.technicalSpecs.map((s,a)=>{const l=A(s);return e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(I,{className:"text-sm",children:"Ù†Ø§Ù… Ù…Ø´Ø®ØµÙ‡"}),e.jsx(O,{value:l.name,onChange:t=>W(a,"name",t.target.value),placeholder:"Ù†Ø§Ù… Ù…Ø´Ø®ØµÙ‡",style:{textAlign:"right",direction:"rtl"}})]}),e.jsxs("div",{className:"w-32",children:[e.jsx(I,{className:"text-sm",children:"Ù†ÙˆØ¹"}),e.jsxs(F,{value:l.type,onValueChange:t=>W(a,"type",t),children:[e.jsx(P,{children:e.jsx(z,{})}),e.jsxs(Q,{children:[e.jsx(k,{value:"text",children:"Ù…ØªÙ†"}),e.jsx(k,{value:"number",children:"Ø¹Ø¯Ø¯"}),e.jsx(k,{value:"select",children:"Ø§Ù†ØªØ®Ø§Ø¨ÛŒ"}),e.jsx(k,{value:"boolean",children:"Ø¨ÙˆÙ„ÛŒ"})]})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(I,{className:"text-sm",children:"ÙˆØ§Ø­Ø¯"}),e.jsx(O,{value:l.unit,onChange:t=>W(a,"unit",t.target.value),placeholder:"ÙˆØ§Ø­Ø¯",style:{textAlign:"right",direction:"rtl"}})]}),i.technicalSpecs.length>1&&e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>le(a),className:"mb-0",children:e.jsx(te,{className:"w-4 h-4 text-red-600"})})]},a)})})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(f,{type:"submit",className:"bg-gray-900 hover:bg-gray-800 text-white",children:p?"Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ":"Ø§ÛŒØ¬Ø§Ø¯"}),e.jsx(f,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Ø§Ù†ØµØ±Ø§Ù"})]})]})]})]})]})]}),e.jsx("div",{className:"space-y-4",children:X.length>0?X.map(s=>{const a=oe(s.parentId),l=de(s.elevatorTypeId),t=me(s.id);return e.jsx(C,{className:"border border-gray-200 bg-white hover:shadow-sm transition-shadow",children:e.jsxs(D,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.parentId?e.jsx(De,{className:"w-5 h-5 text-gray-600"}):e.jsx(_e,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-xl",children:ae[s.name]||"ğŸ“¦"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["Ù†ÙˆØ¹: ",l]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["ÙˆØ§Ù„Ø¯: ",a]})]}),t>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[t," Ø²ÛŒØ±Ù…Ø¬Ù…ÙˆØ¹Ù‡"]})]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[s.technicalSpecs.length," Ù…Ø´Ø®ØµÙ‡ ÙÙ†ÛŒ"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{variant:s.isActive?"default":"secondary",children:s.isActive?"ÙØ¹Ø§Ù„":"ØºÛŒØ±ÙØ¹Ø§Ù„"}),e.jsxs(Te,{children:[e.jsx(Ee,{asChild:!0,children:e.jsx(f,{variant:"ghost",size:"sm",children:e.jsx(Le,{className:"w-4 h-4"})})}),e.jsxs(Ie,{align:"end",style:{direction:"rtl"},children:[e.jsxs(ee,{onClick:()=>ne(s),children:[e.jsx(Me,{className:"w-4 h-4 ml-2"}),"ÙˆÛŒØ±Ø§ÛŒØ´"]}),e.jsxs(ee,{onClick:()=>ce(s.id),className:"text-red-600",children:[e.jsx(te,{className:"w-4 h-4 ml-2"}),"Ø­Ø°Ù"]})]})]})]})]}),s.technicalSpecs.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.technicalSpecs.slice(0,3).map((v,H)=>e.jsxs(J,{variant:"outline",className:"text-xs",children:[v.name," (",v.unit||"Ø¨Ø¯ÙˆÙ† ÙˆØ§Ø­Ø¯",")"]},H)),s.technicalSpecs.length>3&&e.jsxs(J,{variant:"outline",className:"text-xs text-gray-500",children:["+",s.technicalSpecs.length-3," Ù…ÙˆØ±Ø¯ Ø¯ÛŒÚ¯Ø±"]})]})})]})},s.id)}):e.jsxs(C,{className:"p-8 text-center border border-gray-200 bg-white",children:[e.jsx(q,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"Ù‡ÛŒÚ† Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯"}),e.jsx("p",{className:"text-gray-600",children:n?"Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø´Ù…Ø§ ÛŒØ§ÙØª Ù†Ø´Ø¯":"Ø§Ø¨ØªØ¯Ø§ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚Ø·Ø¹Ø§Øª Ø±Ø§ ØªØ¹Ø±ÛŒÙ Ú©Ù†ÛŒØ¯"})]})})]})}function ds(){const[h,R]=o.useState("parts"),[_,L]=o.useState({partsCategories:0,elevatorTypes:0,activeItems:0,totalManagement:0}),[c,M]=o.useState(!0),[u,N]=o.useState(null),[y,E]=o.useState(null);o.useEffect(()=>{b(),w()},[]);const b=async()=>{try{const n=await T.checkApiStatus();E(n),n||N({isNetworkError:!0,isAuthError:!1,isServerError:!1,message:"API Ø¯Ø± Ø¯Ø³ØªØ±Ø³ Ù†ÛŒØ³Øª"})}catch{E(!1),N({isNetworkError:!0,isAuthError:!1,isServerError:!1,message:"Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ±"})}},w=async()=>{try{M(!0),N(null);const[n,S]=await Promise.allSettled([T.get("/admin/parts-categories"),T.get("/admin/elevator-types")]);let i=0,d=0,p=0;if(n.status==="fulfilled"){const m=n.value,g=m.categories||m.parts_categories||m.data||[];i=Array.isArray(g)?g.length:0,p+=Array.isArray(g)?g.filter(j=>j.is_active!==!1&&j.isActive!==!1).length:0}if(S.status==="fulfilled"){const m=S.value,g=m.elevator_types||m.elevatorTypes||m.data||[];d=Array.isArray(g)?g.length:0,p+=Array.isArray(g)?g.filter(j=>j.is_active!==!1&&j.isActive!==!1).length:0}L({partsCategories:i,elevatorTypes:d,activeItems:p,totalManagement:i+d}),E(!0),(n.status==="rejected"||S.status==="rejected")&&r.warning("Ø¨Ø±Ø®ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¢Ù…Ø§Ø± Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù†ÛŒØ³Øª")}catch(n){if(console.error("Error fetching category stats:",n),N(n),E(!1),L({partsCategories:0,elevatorTypes:0,activeItems:0,totalManagement:0}),n&&typeof n=="object"&&"isNetworkError"in n){const S=n;S.isNetworkError?r.error("Ø¹Ø¯Ù… Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø³Ø±ÙˆØ±"):S.isAuthError?r.error("Ø®Ø·Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª"):r.error("Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª Ø¢Ù…Ø§Ø± Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§")}}finally{M(!1)}};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",style:{direction:"rtl"},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-6 h-6 text-gray-900"}),e.jsx(K,{className:"w-6 h-6 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl text-gray-900",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§"}),e.jsx("p",{className:"text-gray-600",children:"Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‚Ø·Ø¹Ø§Øª Ùˆ Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±"})]})]}),u&&!c&&e.jsxs(pe,{className:"border-orange-200 bg-orange-50",children:[e.jsx(ge,{className:"h-4 w-4 text-orange-600"}),e.jsx(je,{className:"text-orange-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„ Ø¨Ù‡ API:"})," ",u.message]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y===!1?e.jsx(Pe,{className:"w-4 h-4 text-red-500"}):e.jsx(Re,{className:"w-4 h-4 text-green-500"}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{b(),w()},className:"text-orange-700 border-orange-300 hover:bg-orange-100",children:"ØªÙ„Ø§Ø´ Ù…Ø¬Ø¯Ø¯"})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(C,{className:"border border-gray-200 bg-white",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-8 h-8 text-gray-700"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‚Ø·Ø¹Ø§Øª"}),c?e.jsx(x,{className:"h-6 w-8"}):e.jsx("p",{className:"text-xl text-gray-900",children:_.partsCategories})]})]})})}),e.jsx(C,{className:"border border-gray-200 bg-white",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-8 h-8 text-gray-700"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±"}),c?e.jsx(x,{className:"h-6 w-8"}):e.jsx("p",{className:"text-xl text-gray-900",children:_.elevatorTypes})]})]})})}),e.jsx(C,{className:"border border-gray-200 bg-white",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl text-gray-700",children:"âš¡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ù…ÙˆØ§Ø±Ø¯ ÙØ¹Ø§Ù„"}),c?e.jsx(x,{className:"h-6 w-8"}):e.jsx("p",{className:"text-xl text-gray-900",children:_.activeItems})]})]})})}),e.jsx(C,{className:"border border-gray-200 bg-white",children:e.jsx(D,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl text-gray-700",children:"ğŸ“Š"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Ú©Ù„ Ù…Ø¯ÛŒØ±ÛŒØªâ€ŒÙ‡Ø§"}),c?e.jsx(x,{className:"h-6 w-8"}):e.jsx("p",{className:"text-xl text-gray-900",children:_.totalManagement})]})]})})})]}),e.jsxs(C,{className:"border border-gray-200 bg-white",children:[e.jsx(ve,{children:e.jsxs(ue,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx("span",{className:"text-gray-700",children:"ğŸ“‹"}),"Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§"]})}),e.jsx(D,{children:e.jsxs(ye,{value:h,onValueChange:R,className:"w-full",style:{direction:"rtl"},children:[e.jsxs(fe,{className:"grid w-full grid-cols-2 bg-gray-100",children:[e.jsxs(Y,{value:"parts",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:text-gray-900",children:[e.jsx(q,{className:"w-4 h-4"}),"Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù‚Ø·Ø¹Ø§Øª"]}),e.jsxs(Y,{value:"elevators",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:text-gray-900",children:[e.jsx(K,{className:"w-4 h-4"}),"Ø§Ù†ÙˆØ§Ø¹ Ø¢Ø³Ø§Ù†Ø³ÙˆØ±"]})]}),e.jsx(Z,{value:"parts",className:"mt-6",children:e.jsx($e,{onStatsChange:w,apiError:u,isApiAvailable:y})}),e.jsx(Z,{value:"elevators",className:"mt-6",children:e.jsx(Fe,{onStatsChange:w,apiError:u,isApiAvailable:y})})]})})]})]})}export{ds as default};
