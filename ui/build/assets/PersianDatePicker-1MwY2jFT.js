import{r as m,$ as y,j as r,B as x,G as R,ae as V}from"./index-tH8kGzNV.js";import{P as W,a as B,b as F}from"./popover-B3pW-y7H.js";import{S as N,a as S,b as w,c as D,d as C}from"./select-B8NiX_r6.js";import{c as Y}from"./utils-BvTIn9cQ.js";import{C as K}from"./chevron-right-B97jr1RJ.js";import"./Combination-Dzecd94B.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";import"./check-DV_4N94Y.js";const k=[{value:1,label:"فروردین"},{value:2,label:"اردیبهشت"},{value:3,label:"خرداد"},{value:4,label:"تیر"},{value:5,label:"مرداد"},{value:6,label:"شهریور"},{value:7,label:"مهر"},{value:8,label:"آبان"},{value:9,label:"آذر"},{value:10,label:"دی"},{value:11,label:"بهمن"},{value:12,label:"اسفند"}],A=["ش","ی","د","س","چ","پ","ج"],b=t=>[1371,1375,1379,1383,1387,1391,1395,1399,1403,1408,1412,1416,1420,1424,1428,1433,1437,1441,1445,1449,1453,1457,1461,1465,1469,1473,1477,1481,1485,1489,1493,1497].includes(t),P=(t,l)=>t>=1&&t<=6?31:t>=7&&t<=11?30:t===12?b(l)?30:29:31,G=(t,l)=>{let n=0;if(t>1405)for(let s=1405;s<t;s++){const o=b(s)?366:365;n=(n+o)%7}else if(t<1405)for(let s=1404;s>=t;s--){const o=b(s)?366:365;n=(n-o+7*1e3)%7}if(l===1)return n;let a=0;for(let s=1;s<l;s++)a+=P(s,t);return(n+a)%7},_=(t,l)=>{const f=P(t,l),u=G(l,t),n=[];for(let a=0;a<u;a++)n.push(null);for(let a=1;a<=f;a++)n.push(a);return n},q=()=>({year:1404,month:7,day:3,weekDay:4});function se({value:t,onChange:l,placeholder:f="انتخاب تاریخ",disabled:u}){const[n,a]=m.useState(!1),s=q(),[o,g]=m.useState(s.year),[i,c]=m.useState(s.month),[p,d]=m.useState(null);y.useEffect(()=>{if(t){const e=t.split("/");e.length===3&&(g(parseInt(e[0])),c(parseInt(e[1])),d(parseInt(e[2])))}},[t]);const I=Array.from({length:141},(e,h)=>1490-h),v=e=>{d(e);const h=`${o}/${i.toString().padStart(2,"0")}/${e.toString().padStart(2,"0")}`;l(h),a(!1)},M=e=>{e.key==="Escape"&&a(!1)},T=e=>{c(parseInt(e)),d(null)},E=e=>{g(parseInt(e)),d(null)},O=()=>{i===1?(c(12),g(o-1)):c(i-1),d(null)},z=()=>{i===12?(c(1),g(o+1)):c(i+1),d(null)},L=()=>{g(s.year),c(s.month),v(s.day)},$=_(i,o);k.find(e=>e.value===i)?.label;const j=e=>o===s.year&&i===s.month&&e===s.day;return y.useEffect(()=>{},[]),r.jsxs(W,{open:n,onOpenChange:a,children:[r.jsx(B,{asChild:!0,children:r.jsxs(x,{variant:"outline",className:Y("w-full justify-between text-right h-10 px-3 py-2 bg-white border border-green-300 hover:border-green-400 focus:border-green-500",!t&&"text-muted-foreground",u&&"opacity-50 cursor-not-allowed"),disabled:u,children:[r.jsx("span",{className:"flex-1 text-right",children:t||f}),r.jsx(R,{className:"ml-2 h-4 w-4 shrink-0"})]})}),r.jsx(F,{className:"w-80 p-0 bg-white border border-green-200 shadow-lg",align:"start",onKeyDown:M,children:r.jsxs("div",{className:"p-4 space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx(x,{variant:"outline",size:"icon",onClick:z,className:"h-8 w-8 border-green-300 hover:border-green-400",children:r.jsx(V,{className:"h-4 w-4"})}),r.jsxs("div",{className:"flex gap-2 flex-1",children:[r.jsxs(N,{value:o.toString(),onValueChange:E,children:[r.jsx(S,{className:"h-8 text-sm border-green-300",children:r.jsx(w,{})}),r.jsx(D,{className:"max-h-60",children:I.map(e=>r.jsx(C,{value:e.toString(),children:e},e))})]}),r.jsxs(N,{value:i.toString(),onValueChange:T,children:[r.jsx(S,{className:"h-8 text-sm border-green-300",children:r.jsx(w,{})}),r.jsx(D,{children:k.map(e=>r.jsx(C,{value:e.value.toString(),children:e.label},e.value))})]})]}),r.jsx(x,{variant:"outline",size:"icon",onClick:O,className:"h-8 w-8 border-green-300 hover:border-green-400",children:r.jsx(K,{className:"h-4 w-4"})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"grid grid-cols-7 gap-1",dir:"rtl",children:A.map((e,h)=>r.jsx("div",{className:"h-8 flex items-center justify-center text-sm font-medium text-gray-600",children:e},h))}),r.jsx("div",{className:"grid grid-cols-7 gap-1",dir:"rtl",children:$.map((e,h)=>r.jsx("button",{type:"button",onClick:()=>e&&v(e),disabled:!e,className:Y("h-8 w-8 flex items-center justify-center text-sm rounded-md transition-colors",!e&&"invisible",e&&"hover:bg-green-50 hover:text-green-700",e===p&&"bg-green-500 text-white hover:bg-green-600",e&&j(e)&&e!==p&&"bg-blue-100 text-blue-700 font-semibold",e&&e!==p&&!j(e)&&"text-gray-700"),children:e},h))})]}),r.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-gray-200",children:[r.jsx(x,{variant:"ghost",size:"sm",onClick:()=>{l(""),d(null),a(!1)},className:"text-xs text-red-600 hover:text-red-700 hover:bg-red-50",children:"پاک کردن"}),r.jsx(x,{variant:"outline",size:"sm",onClick:L,className:"text-xs text-green-700 border-green-300 hover:border-green-400",children:"امروز (۳ مهر ۱۴۰۴)"})]})]})})]})}export{se as PersianDatePicker};
