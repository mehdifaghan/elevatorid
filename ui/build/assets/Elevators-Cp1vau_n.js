import{r as m,j as e,B as N,x as r,t as v,C as n,e as d,V as _,p as A,b as M,c as $,d as F,L as t,o as x,Q,v as V}from"./index-tH8kGzNV.js";import{D as b,a as G,b as w,c as C,d as I,e as E}from"./dialog-DAjwwShP.js";import{D as H,a as q,b as z,c as f}from"./dropdown-menu-BKfQT_JD.js";import{S as Z,a as J,b as K,c as U,d as h}from"./select-B8NiX_r6.js";import{A as W}from"./AdvancedTable-BFnDxHqp.js";import{Q as P}from"./QRCodeGenerator-DzqPO6-F.js";import{P as X}from"./PDFGenerator-Bp0TPodX.js";import{E as Y}from"./ElevatorRegistrationForm-C4UDbIJW.js";import{e as ee}from"./elevators.service-B-2JX4Vq.js";import{E as se}from"./ellipsis-J_HkHiqq.js";import"./index-DGGMjIYi.js";import"./Combination-Dzecd94B.js";import"./x-B6dSK8zO.js";import"./chevron-right-B97jr1RJ.js";import"./check-DV_4N94Y.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";import"./table-DC3MYrD8.js";import"./search-8LTSveb2.js";import"./download-BGqk_jGh.js";import"./copy-CIVXPvX_.js";import"./file-text-DbNNqFYp.js";import"./textarea-1hTYB3HE.js";import"./PersianDatePicker-1MwY2jFT.js";import"./popover-B3pW-y7H.js";import"./utils-BvTIn9cQ.js";import"./ProvinceAndCitySelector-ByNK_lw_.js";import"./iran-provinces-cities-ClUeFN4S.js";const ae=[{id:"1",uid:"ELE-001-2024",buildingName:"برج تجاری پارسیان",address:"تهران، میدان ونک، برج پارسیان",provinceId:8,provinceName:"تهران",cityId:301,cityName:"تهران",postalCode:"1991864312",municipalRegion:"منطقه 3",buildingPermit:"BP-2024-001",registrationPlate:"RP-2024-001",ownerCompanyId:"1",ownerCompanyName:"شرکت توسعه ساختمان پارس",installerCompanyId:"1",installerCompanyName:"شرکت نصب تکنولوژی",installationDate:"1403/06/15",status:"active",elevatorType:"passenger",capacity:8,floors:15,parts:[{id:"1",name:"موتور کششی",serialNumber:"MOT-001-2024",installedDate:"1403/06/15",status:"installed"},{id:"2",name:"کابین آسانسور",serialNumber:"CAB-001-2024",installedDate:"1403/06/15",status:"installed"}]},{id:"2",uid:"ELE-002-2024",buildingName:"مجتمع مسکونی نیاوران",address:"تهران، نیاوران، خیابان جماران",provinceId:8,provinceName:"تهران",cityId:301,cityName:"تهران",postalCode:"1991864313",municipalRegion:"منطقه 1",buildingPermit:"BP-2024-002",registrationPlate:"RP-2024-002",ownerCompanyId:"2",ownerCompanyName:"شرکت سرمایه‌گذاری آریا",installerCompanyId:"2",installerCompanyName:"شرکت نصب سریع",installationDate:"1403/07/20",status:"maintenance",elevatorType:"passenger",capacity:6,floors:8,parts:[]},{id:"3",uid:"ELE-003-2024",buildingName:"مرکز تجاری رز",address:"اصفهان، خیابان چهارباغ عباسی",provinceId:4,provinceName:"اصفهان",cityId:155,cityName:"اصفهان",postalCode:"8173673159",municipalRegion:"منطقه 6",buildingPermit:"BP-2024-003",registrationPlate:"RP-2024-003",ownerCompanyId:"3",ownerCompanyName:"شرکت مدیریت مراکز تجاری رز",installerCompanyId:"3",installerCompanyName:"شرکت ماشین‌سازی آریا",installationDate:"1403/05/10",status:"active",elevatorType:"freight",capacity:12,floors:6,parts:[]}],S={active:"bg-green-100 text-green-800",maintenance:"bg-yellow-100 text-yellow-800",out_of_order:"bg-red-100 text-red-800",installing:"bg-blue-100 text-blue-800"},D={active:"فعال",maintenance:"در تعمیر",out_of_order:"خارج از سرویس",installing:"در حال نصب"},T={passenger:"مسافربر",freight:"باربر",service:"خدماتی"};function Re(){const[i,le]=m.useState(ae),[l,j]=m.useState(null),[k,u]=m.useState(!1),[p,R]=m.useState(""),[g,L]=m.useState("all"),B=[{key:"uid",label:"شناسه آسانسور",sortable:!0,render:(s,a)=>e.jsx("div",{className:"font-medium",children:a.uid})},{key:"buildingName",label:"نام ساختمان",sortable:!0,render:(s,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.buildingName}),e.jsx("div",{className:"text-sm text-gray-500",children:a.municipalRegion})]})},{key:"address",label:"آدرس",render:(s,a)=>e.jsx("div",{className:"max-w-xs truncate",children:a.address})},{key:"ownerCompanyName",label:"شرکت مالک",sortable:!0,render:(s,a)=>e.jsx("div",{className:"text-sm",children:a.ownerCompanyName})},{key:"elevatorType",label:"نوع آسانسور",sortable:!0,filterable:!0,render:(s,a)=>e.jsx(x,{variant:"secondary",className:"text-xs",children:T[a.elevatorType]})},{key:"capacity",label:"ظرفیت",sortable:!0,render:(s,a)=>e.jsxs("div",{className:"text-center",children:[a.capacity," نفر"]})},{key:"floors",label:"طبقات",sortable:!0,render:(s,a)=>e.jsx("div",{className:"text-center",children:a.floors})},{key:"status",label:"وضعیت",sortable:!0,filterable:!0,render:(s,a)=>e.jsx(x,{className:S[a.status],children:D[a.status]})},{key:"installationDate",label:"تاریخ نصب",sortable:!0,render:(s,a)=>e.jsx("div",{className:"text-sm",children:a.installationDate})},{key:"actions",label:"عملیات",render:(s,a)=>e.jsxs(H,{children:[e.jsx(q,{asChild:!0,children:e.jsx(N,{variant:"ghost",className:"h-8 w-8 p-0",children:e.jsx(se,{className:"w-4 h-4"})})}),e.jsxs(z,{align:"end",className:"w-48",children:[e.jsxs(f,{onClick:()=>j(a),className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"مشاهده جزئیات"]}),e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-4 h-4"}),"ویرایش اطلاعات"]}),e.jsxs(f,{className:"flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"مدیریت قطعات"]})]})]})}],y=i.filter(s=>{const a=s.uid.toLowerCase().includes(p.toLowerCase())||s.buildingName.toLowerCase().includes(p.toLowerCase())||s.address.toLowerCase().includes(p.toLowerCase()),o=g==="all"||s.status===g;return a&&o}),c={total:i.length,active:i.filter(s=>s.status==="active").length,maintenance:i.filter(s=>s.status==="maintenance").length,outOfOrder:i.filter(s=>s.status==="out_of_order").length,installing:i.filter(s=>s.status==="installing").length};return e.jsxs("div",{className:"space-y-6",dir:"rtl",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"مدیریت آسانسورها"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"لیست و مدیریت تمامی آسانسورهای ثبت‌شده در سیستم"})]}),e.jsxs(b,{open:k,onOpenChange:u,children:[e.jsx(G,{asChild:!0,children:e.jsxs(N,{className:"bg-blue-600 hover:bg-blue-700 text-white",children:[e.jsx(r,{className:"w-4 h-4 ml-2"}),"ثبت آسانسور جدید"]})}),e.jsxs(w,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs(C,{className:"text-right shrink-0",dir:"rtl",children:[e.jsx(I,{className:"text-right",children:"ثبت آسانسور جدید"}),e.jsx(E,{className:"text-right",children:"اطلاعات آسانسور جدید را وارد کنید. تمامی فیلدهای ستاره‌دار الزامی می‌باشند."})]}),e.jsx("div",{className:"flex-1 overflow-y-auto modal-scroll-container",children:e.jsx(Y,{mode:"admin",onClose:()=>u(!1),onSubmit:async s=>{try{const a={municipalityZone:s.municipalRegion,buildPermitNo:s.buildingPermit||"N/A",registryPlate:s.registrationPlate||"N/A",province:s.provinceName||"",city:s.cityName||"",address:s.address,postalCode:s.postalCode||"0000000000",installerCompanyId:parseInt(s.installerCompanyId||"1"),parts:s.parts.map(O=>({partId:O.partId}))};console.log("Sending elevator data to API:",a);const o=await ee.createElevator(a);o.success&&o.data?(v.success(`✅ آسانسور جدید با شناسه ${o.data.uid} ثبت شد`),u(!1)):v.error("خطا در ثبت آسانسور")}catch(a){console.error("Error creating elevator:",a),v.error("خطا در ثبت آسانسور. لطفاً دوباره تلاش کنید.")}}})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(r,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"کل آسانسورها"}),e.jsx("p",{className:"text-2xl font-bold",children:c.total})]})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(r,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"فعال"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.active})]})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:e.jsx(_,{className:"w-5 h-5 text-yellow-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"در تعمیر"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:c.maintenance})]})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx(r,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"خارج از سرویس"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.outOfOrder})]})]})})}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(r,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"در حال نصب"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.installing})]})]})})})]}),e.jsx(n,{children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(A,{placeholder:"جستجو بر اساس شناسه، نام ساختمان یا آدرس...",value:p,onChange:s=>R(s.target.value),className:"w-full"})}),e.jsx("div",{className:"w-full sm:w-48",children:e.jsxs(Z,{value:g,onValueChange:L,children:[e.jsx(J,{children:e.jsx(K,{placeholder:"فیلتر وضعیت"})}),e.jsxs(U,{children:[e.jsx(h,{value:"all",children:"همه وضعیت‌ها"}),e.jsx(h,{value:"active",children:"فعال"}),e.jsx(h,{value:"maintenance",children:"در تعمیر"}),e.jsx(h,{value:"out_of_order",children:"خارج از سرویس"}),e.jsx(h,{value:"installing",children:"در حال نصب"})]})]})})]})})}),e.jsxs(n,{children:[e.jsxs(M,{children:[e.jsx($,{children:"لیست آسانسورها"}),e.jsxs(F,{children:[y.length," آسانسور از مجموع ",i.length," آسانسور"]})]}),e.jsx(d,{children:e.jsx(W,{data:y,columns:B,searchable:!1,exportable:!0})})]}),l&&e.jsx(b,{open:!!l,onOpenChange:()=>j(null),children:e.jsxs(w,{className:"max-w-4xl max-h-[90vh] overflow-hidden",dir:"rtl",children:[e.jsxs(C,{className:"text-right",children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(r,{className:"w-5 h-5"}),"جزئیات آسانسور ",l.uid]}),e.jsx(E,{className:"text-right",children:"اطلاعات کامل آسانسور و شناسنامه آن"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto modal-scroll-container",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"اطلاعات پایه"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"شناسه آسانسور"}),e.jsx("p",{className:"font-medium",children:l.uid})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"نام ساختمان"}),e.jsx("p",{className:"font-medium",children:l.buildingName})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"آدرس"}),e.jsx("p",{children:l.address})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"استان"}),e.jsx("p",{children:l.provinceName})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"شهر"}),e.jsx("p",{children:l.cityName})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"کد پستی"}),e.jsx("p",{children:l.postalCode})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"منطقه شهرداری"}),e.jsx("p",{children:l.municipalRegion})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"مشخصات فنی"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"نوع آسانسور"}),e.jsx("div",{className:"font-medium",children:e.jsx(x,{variant:"secondary",children:T[l.elevatorType]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"ظرفیت"}),e.jsxs("p",{children:[l.capacity," نفر"]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"تعداد طبقات"}),e.jsxs("p",{children:[l.floors," طبقه"]})]})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"تاریخ نصب"}),e.jsx("p",{children:l.installationDate})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"وضعیت"}),e.jsx("div",{children:e.jsx(x,{className:S[l.status],children:D[l.status]})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"اطلاعات شرکت‌ها"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"شرکت مالک"}),e.jsx("p",{className:"font-medium",children:l.ownerCompanyName})]}),e.jsxs("div",{children:[e.jsx(t,{className:"text-sm font-medium text-gray-600",children:"شرکت نصب‌کننده"}),e.jsx("p",{className:"font-medium",children:l.installerCompanyName})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"QR کد آسانسور"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(P,{value:`https://elevatorid.ieeu.ir/elevator/${l.uid}`,size:200})})]})]}),e.jsxs("div",{className:"p-6 border-t",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"قطعات نصب شده"}),l.parts.length>0?e.jsx("div",{className:"space-y-2",children:l.parts.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["شماره سریال: ",s.serialNumber]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["تاریخ نصب: ",s.installedDate]})]}),e.jsx(x,{className:s.status==="installed"?"bg-green-100 text-green-800":s.status==="replaced"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800",children:s.status==="installed"?"نصب شده":s.status==="replaced"?"تعویض شده":"در تعمیر"})]},s.id))}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"هیچ قطعه‌ای ثبت نشده است"})]}),e.jsxs("div",{className:"flex gap-3 p-6 border-t",children:[e.jsx(P,{value:`https://elevatorid.ieeu.ir/elevator/${l.uid}`,downloadButton:!0,filename:`elevator-${l.uid}-qr`}),e.jsx(X,{title:`شناسنامه آسانسور ${l.uid}`,data:l,filename:`elevator-${l.uid}-certificate.pdf`}),e.jsx(N,{variant:"outline",onClick:()=>j(null),children:"بستن"})]})]})]})})]})}export{Re as default};
