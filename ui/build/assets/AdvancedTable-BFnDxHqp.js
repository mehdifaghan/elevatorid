import{a1 as j,r as d,j as e,C as G,b as J,p as K,B as f,V as Q,e as W,ae as X,t as Y}from"./index-tH8kGzNV.js";import{T as ee,a as se,b as v,c as te,d as ae,e as S}from"./table-DC3MYrD8.js";import{S as re,a as ne,b as le,c as ie,d as $}from"./select-B8NiX_r6.js";import{S as ce}from"./search-8LTSveb2.js";import{C as oe}from"./chevron-right-B97jr1RJ.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],he=j("arrow-down",de);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],me=j("arrow-up-down",xe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],je=j("arrow-up",fe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],ue=j("chevrons-left",pe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],ve=j("chevrons-right",ye);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],ke=j("file-spreadsheet",be);function Me({data:b,columns:r,searchable:T=!0,filterable:q=!0,exportable:A=!0,pagination:k=!0,pageSize:h=10,onRowClick:M,loading:L=!1,emptyMessage:D="هیچ داده‌ای یافت نشد",className:B="",onRefresh:V,refreshing:w=!1}){const[u,E]=d.useState(""),[i,I]=d.useState(null),[N,R]=d.useState({}),[n,p]=d.useState(1),g=d.useMemo(()=>{let s=[...b];return u&&(s=s.filter(a=>r.some(t=>{const l=a[t.key];return l&&l.toString().toLowerCase().includes(u.toLowerCase())}))),Object.entries(N).forEach(([a,t])=>{t&&t!=="all"&&(s=s.filter(l=>{const o=l[a];return o&&o.toString()===t}))}),s},[b,u,N,r]),c=d.useMemo(()=>i?[...g].sort((s,a)=>{const t=s[i.key],l=a[i.key];if(t===l)return 0;const o=t<l?-1:1;return i.direction==="asc"?o:-o}):g,[g,i]),_=d.useMemo(()=>{if(!k)return c;const s=(n-1)*h;return c.slice(s,s+h)},[c,n,h,k]),x=Math.ceil(c.length/h),U=s=>{r.find(t=>t.key===s)?.sortable&&I(t=>!t||t.key!==s?{key:s,direction:"asc"}:t.direction==="asc"?{key:s,direction:"desc"}:null)},z=(s,a)=>{R(t=>({...t,[s]:a})),p(1)},H=s=>{{const a=r.map(C=>C.label).join(","),t=c.map(C=>r.map(Z=>{const y=C[Z.key];return typeof y=="string"&&y.includes(",")?`"${y}"`:y||""}).join(",")),l=[a,...t].join(`
`),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),m=document.createElement("a"),O=URL.createObjectURL(o);m.setAttribute("href",O),m.setAttribute("download",`data-${Date.now()}.csv`),m.style.visibility="hidden",document.body.appendChild(m),m.click(),document.body.removeChild(m),Y.success("فایل CSV دانلود شد")}},F=s=>!s.sortable||!i||i.key!==s.key?e.jsx(me,{className:"h-4 w-4 text-gray-400 ml-1"}):i.direction==="asc"?e.jsx(je,{className:"h-4 w-4 text-blue-600 ml-1"}):e.jsx(he,{className:"h-4 w-4 text-blue-600 ml-1"}),P=s=>{const a=b.map(t=>t[s]).filter(Boolean);return[...new Set(a)]};return e.jsxs(G,{className:`w-full ${B}`,children:[e.jsx(J,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[T&&e.jsxs("div",{className:"flex items-center gap-2 flex-1 max-w-lg",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ce,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(K,{placeholder:"جستجو در داده‌ها...",value:u,onChange:s=>E(s.target.value),className:"pr-10"})]}),V&&e.jsxs(f,{variant:"outline",size:"sm",onClick:V,disabled:w,className:"gap-2 shrink-0",children:[e.jsx(Q,{className:`h-4 w-4 ${w?"animate-spin":""}`}),w?"در حال بارگذاری...":"تازه‌سازی"]})]}),A&&e.jsx("div",{className:"flex gap-2",children:e.jsxs(f,{variant:"outline",size:"sm",onClick:()=>H(),className:"gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),"CSV"]})})]}),q&&e.jsx("div",{className:"flex flex-wrap gap-4",children:r.filter(s=>s.filterable).map(s=>e.jsx("div",{className:"min-w-32",children:e.jsxs(re,{value:N[s.key]||"all",onValueChange:a=>z(s.key,a),children:[e.jsx(ne,{className:"h-9",children:e.jsx(le,{placeholder:s.label})}),e.jsxs(ie,{children:[e.jsxs($,{value:"all",children:["همه ",s.label]}),P(s.key).map(a=>e.jsx($,{value:a.toString(),children:a.toString()},a))]})]})},s.key))})]})}),e.jsxs(W,{children:[e.jsx("div",{className:"rounded-lg border overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(ee,{children:[e.jsx(se,{children:e.jsx(v,{children:r.map(s=>e.jsx(te,{className:`text-right ${s.sortable?"cursor-pointer select-none hover:bg-gray-50":""} ${s.width?`w-${s.width}`:""}`,onClick:()=>U(s.key),children:e.jsxs("div",{className:"flex items-center justify-end flex-row-reverse",children:[s.label,s.sortable&&F(s)]})},s.key))})}),e.jsx(ae,{children:L?e.jsx(v,{children:e.jsx(S,{colSpan:r.length,className:"text-center py-8",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{children:"در حال بارگذاری..."})]})})}):_.length===0?e.jsx(v,{children:e.jsx(S,{colSpan:r.length,className:"text-center py-8 text-muted-foreground",children:D})}):_.map((s,a)=>e.jsx(v,{className:M?"cursor-pointer hover:bg-gray-50":"",onClick:()=>M?.(s),children:r.map(t=>e.jsx(S,{className:"text-right",children:t.render?t.render(s[t.key],s):s[t.key]},t.key))},a))})]})})}),k&&x>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["نمایش ",(n-1)*h+1," تا ",Math.min(n*h,c.length)," از ",c.length," رکورد"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>p(1),disabled:n===1,children:e.jsx(ue,{className:"h-4 w-4"})}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>p(s=>Math.max(s-1,1)),disabled:n===1,children:e.jsx(X,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm font-medium px-2",children:["صفحه ",n," از ",x]}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>p(s=>Math.min(s+1,x)),disabled:n===x,children:e.jsx(oe,{className:"h-4 w-4"})}),e.jsx(f,{variant:"outline",size:"sm",onClick:()=>p(x),disabled:n===x,children:e.jsx(ve,{className:"h-4 w-4"})})]})]})]})]})}export{Me as A};
