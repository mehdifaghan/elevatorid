import{u as Z,r as m,t as l,j as e,z as O,D as W,E as A,ah as R,Y as G,Q as H,J as q,F as D,C as N,b as v,c as w,d as y,e as C,L as a,ai as X,B as T,q as F,p as z,o as L}from"./index-tH8kGzNV.js";import{S as d}from"./switch-DOMxWR7b.js";import{S as B}from"./separator-DLBvRYDr.js";import{S as b,a as P,b as S,c as k,d as r}from"./select-B8NiX_r6.js";import{r as M}from"./real-api-client-o-2gE2Hp.js";import{M as _}from"./mail-B9fXdK0_.js";import{S as $}from"./save-DxawmBER.js";import{K as ee}from"./key-QVqY-mlN.js";import"./Combination-Dzecd94B.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";import"./check-DV_4N94Y.js";function je(){const{user:se}=Z(),[x,V]=m.useState(!1),[J,I]=m.useState(!0),[o,h]=m.useState({email:!0,sms:!1,push:!0,transferUpdates:!0,requestResponses:!0,systemAlerts:!1}),[p,j]=m.useState({profileVisibility:"limited",showEmail:!1,showPhone:!1,allowDataExport:!0}),[f,g]=m.useState({language:"fa",timezone:"Asia/Tehran",dateFormat:"persian",theme:"system"}),[n,K]=m.useState({isActive:!0,userType:"کاربر عادی",phoneVerified:!0,emailVerified:!1,lastLogin:"امروز، ۱۴:۳۰",registrationDate:"۱۴۰۳/۰۱/۱۵"}),[i,E]=m.useState({currentPassword:"",newPassword:"",confirmPassword:""});m.useEffect(()=>{Q()},[]);const Q=async()=>{try{I(!0);const t=(await M.get("/user/settings")).data;h(t.notifications||{email:!1,sms:!1,push:!1,transferUpdates:!1,requestResponses:!1,systemAlerts:!1}),j(t.privacy||{profileVisibility:"private",showEmail:!1,showPhone:!1,allowDataExport:!1}),g(t.display||{language:"fa",timezone:"Asia/Tehran",dateFormat:"persian",theme:"system"}),K(t.accountStatus||{isActive:!1,userType:"نامشخص",phoneVerified:!1,emailVerified:!1,lastLogin:"نامشخص",registrationDate:"نامشخص"})}catch(s){console.error("Error fetching settings:",s),l.error("خطا در بارگذاری تنظیمات"),h({email:!1,sms:!1,push:!1,transferUpdates:!1,requestResponses:!1,systemAlerts:!1}),j({profileVisibility:"private",showEmail:!1,showPhone:!1,allowDataExport:!1}),g({language:"fa",timezone:"Asia/Tehran",dateFormat:"persian",theme:"system"}),K({isActive:!1,userType:"نامشخص",phoneVerified:!1,emailVerified:!1,lastLogin:"نامشخص",registrationDate:"نامشخص"})}finally{I(!1)}},U=async(s,t)=>{V(!0);try{let c="";switch(s){case"اعلانات":c="/user/settings/notifications";break;case"حریم خصوصی":c="/user/settings/privacy";break;case"نمایش":c="/user/settings/display";break;default:c="/user/settings"}const u=await M.put(c,t);l.success(`⚙️ تنظیمات ${s} با موفقیت ذخیره شد!`,{description:"تغییرات شما اعمال و در سیستم ثبت گردید",duration:4e3})}catch(c){console.error(`Error saving ${s} settings:`,c),c.response?.data?.message?l.error(`❌ خطا در ذخیره تنظیمات ${s}`,{description:c.response.data.message,duration:5e3}):l.error("❌ خطا در ذخیره تنظیمات",{description:"لطفاً دوباره تلاش کنید یا با پشتیبانی تماس بگیرید",duration:5e3})}finally{V(!1)}},Y=async()=>{if(!i.currentPassword||!i.newPassword){l.error("⚠️ لطفاً تمام فیلدها را تکمیل کنید",{description:"برای تغییر رمز عبور باید رمز فعلی و رمز جدید را وارد کنید",duration:4e3});return}if(i.newPassword!==i.confirmPassword){l.error("🔐 تکرار رمز عبور مطابقت ندارد",{description:"رمز عبور جدید و تکرار آن باید یکسان باشند",duration:4e3});return}if(i.newPassword.length<8){l.error("🔒 رمز عبور باید حداقل ۸ کاراکتر باشد",{description:"برای امنیت بیشتر، رمز عبور باید شامل حروف، اعداد و نمادها باشد",duration:4e3});return}const s=/[A-Z]/.test(i.newPassword),t=/[a-z]/.test(i.newPassword),c=/\d/.test(i.newPassword);if(!s||!t||!c){l.error("🔒 رمز عبور باید شامل حروف بزرگ، کوچک و عدد باشد",{description:"برای امنیت بیشتر، رمز عبور قوی‌تری انتخاب کنید",duration:4e3});return}V(!0);try{const u=await M.post("/user/change-password",{currentPassword:i.currentPassword,newPassword:i.newPassword});l.success("✅ رمز عبور با موفقیت تغییر یافت!",{description:"رمز عبور جدید شما در سیستم ثبت شد. از این پس از رمز جدید استفاده کنید",duration:5e3}),E({currentPassword:"",newPassword:"",confirmPassword:""})}catch(u){console.error("Error changing password:",u),u.response?.data?.message?l.error("❌ خطا در تغییر رمز عبور",{description:u.response.data.message,duration:5e3}):u.response?.status===400?l.error("❌ رمز عبور فعلی اشتباه است",{description:"لطفاً رمز عبور فعلی را بررسی کنید",duration:5e3}):l.error("❌ خطا در تغییر رمز عبور",{description:"ممکن است رمز فعلی اشتباه باشد. لطفاً دوباره تلاش کنید",duration:5e3})}finally{V(!1)}};return J?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"در حال بارگذاری تنظیمات..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("h1",{className:"text-2xl font-semibold text-right",children:"تنظیمات"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-right",children:"مدیریت تنظیمات حساب کاربری و تنظیمات شخصی‌سازی"})]}),e.jsxs(O,{defaultValue:"notifications",className:"space-y-6",children:[e.jsxs(W,{className:"grid w-full grid-cols-4",children:[e.jsxs(A,{value:"security",className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"امنیت"}),e.jsx(R,{className:"w-4 h-4"})]}),e.jsxs(A,{value:"display",className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"نمایش"}),e.jsx(G,{className:"w-4 h-4"})]}),e.jsxs(A,{value:"privacy",className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"حریم خصوصی"}),e.jsx(H,{className:"w-4 h-4"})]}),e.jsxs(A,{value:"notifications",className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"اعلانات"}),e.jsx(q,{className:"w-4 h-4"})]})]}),e.jsx(D,{value:"notifications",children:e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"تنظیمات اعلانات"}),e.jsx(q,{className:"w-5 h-5"})]}),e.jsx(y,{className:"text-right",children:"نحوه دریافت اعلانات از سامانه را مشخص کنید"})]}),e.jsxs(C,{className:"space-y-6 text-right",children:[e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("h4",{className:"font-medium text-right",children:"روش‌های دریافت اعلان"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"ایمیل"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"دریافت اعلانات از طریق ایمیل"})]})]}),e.jsx(d,{checked:o.email,onCheckedChange:s=>h(t=>({...t,email:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"پیامک"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"دریافت اعلانات از طریق SMS"})]})]}),e.jsx(d,{checked:o.sms,onCheckedChange:s=>h(t=>({...t,sms:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"اعلانات Push"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"اعلانات فوری در مرورگر"})]})]}),e.jsx(d,{checked:o.push,onCheckedChange:s=>h(t=>({...t,push:s}))})]})]})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsx("h4",{className:"font-medium text-right",children:"انواع اعلانات"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"به‌روزرسانی انتقالات"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"اطلاع از تغییرات وضعیت انتقالات"})]}),e.jsx(d,{checked:o.transferUpdates,onCheckedChange:s=>h(t=>({...t,transferUpdates:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"پاسخ درخواست‌ها"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"اطلاع از پاسخ درخواست‌های ارسالی"})]}),e.jsx(d,{checked:o.requestResponses,onCheckedChange:s=>h(t=>({...t,requestResponses:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"هشدارهای سیستم"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"اطلاع از مشکلات و نگهداری سیستم"})]}),e.jsx(d,{checked:o.systemAlerts,onCheckedChange:s=>h(t=>({...t,systemAlerts:s}))})]})]})]}),e.jsx("div",{className:"flex justify-start pt-4",children:e.jsx(T,{onClick:()=>U("اعلانات",o),disabled:x,className:"flex items-center gap-2 flex-row-reverse",children:x?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"در حال ذخیره..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"ذخیره تنظیمات"})]})})})]})]})}),e.jsx(D,{value:"privacy",children:e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"تنظیمات حریم خصوصی"}),e.jsx(H,{className:"w-5 h-5"})]}),e.jsx(y,{className:"text-right",children:"کنترل نمایش اطلاعات شخصی و دسترسی دیگران"})]}),e.jsxs(C,{className:"space-y-6 text-right",children:[e.jsxs("div",{className:"space-y-4 text-right",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-base text-right",children:"نمایش پروفایل"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3 text-right",children:"تعیین کنید چه کسانی می‌توانند پروفایل شما را مشاهده کنند"}),e.jsxs(b,{value:p.profileVisibility,onValueChange:s=>j(t=>({...t,profileVisibility:s})),children:[e.jsx(P,{className:"text-right",dir:"rtl",children:e.jsx(S,{})}),e.jsxs(k,{dir:"rtl",children:[e.jsx(r,{value:"public",children:"عمومی"}),e.jsx(r,{value:"limited",children:"محدود"}),e.jsx(r,{value:"private",children:"خصوصی"})]})]})]}),e.jsx(B,{}),e.jsxs("div",{className:"space-y-3 text-right",children:[e.jsx("h4",{className:"font-medium text-right",children:"نمایش اطلاعات تماس"}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"نمایش ایمیل"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"آدرس ایمیل در پروفایل نمایش داده شود"})]}),e.jsx(d,{checked:p.showEmail,onCheckedChange:s=>j(t=>({...t,showEmail:s}))})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"نمایش شماره تلفن"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"شماره تلفن در پروفایل نمایش داده شود"})]}),e.jsx(d,{checked:p.showPhone,onCheckedChange:s=>j(t=>({...t,showPhone:s}))})]})]}),e.jsx(B,{}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsxs("div",{className:"text-right",children:[e.jsx(a,{className:"text-right",children:"امکان صادرات داده‌ها"}),e.jsx("p",{className:"text-sm text-muted-foreground text-right",children:"اجازه دانلود کپی از اطلاعات شخصی"})]}),e.jsx(d,{checked:p.allowDataExport,onCheckedChange:s=>j(t=>({...t,allowDataExport:s}))})]})]}),e.jsx("div",{className:"flex justify-start pt-4",children:e.jsx(T,{onClick:()=>U("حریم خصوصی",p),disabled:x,className:"flex items-center gap-2 flex-row-reverse",children:x?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"در حال ذخیره..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"ذخیره تنظیمات"})]})})})]})]})}),e.jsx(D,{value:"display",children:e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"تنظیمات نمایش"}),e.jsx(G,{className:"w-5 h-5"})]}),e.jsx(y,{className:"text-right",children:"شخصی‌سازی ظاهر و نحوه نمایش اطلاعات"})]}),e.jsxs(C,{className:"space-y-6 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"زبان"}),e.jsxs(b,{value:f.language,onValueChange:s=>g(t=>({...t,language:s})),children:[e.jsx(P,{className:"text-right",dir:"rtl",children:e.jsx(S,{})}),e.jsxs(k,{dir:"rtl",children:[e.jsx(r,{value:"fa",children:"فارسی"}),e.jsx(r,{value:"en",children:"English"}),e.jsx(r,{value:"ar",children:"العربية"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"منطقه زمانی"}),e.jsxs(b,{value:f.timezone,onValueChange:s=>g(t=>({...t,timezone:s})),children:[e.jsx(P,{className:"text-right",dir:"rtl",children:e.jsx(S,{})}),e.jsxs(k,{dir:"rtl",children:[e.jsx(r,{value:"Asia/Tehran",children:"تهران (UTC+3:30)"}),e.jsx(r,{value:"Asia/Dubai",children:"دبی (UTC+4:00)"}),e.jsx(r,{value:"Europe/London",children:"لندن (UTC+0:00)"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"فرمت تاریخ"}),e.jsxs(b,{value:f.dateFormat,onValueChange:s=>g(t=>({...t,dateFormat:s})),children:[e.jsx(P,{className:"text-right",dir:"rtl",children:e.jsx(S,{})}),e.jsxs(k,{dir:"rtl",children:[e.jsx(r,{value:"persian",children:"شمسی (۱۴۰۳/۰۱/۰۱)"}),e.jsx(r,{value:"gregorian",children:"میلادی (2024/03/21)"}),e.jsx(r,{value:"hijri",children:"قمری (۱۴۴۵/۰۹/۱۰)"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"تم ظاهری"}),e.jsxs(b,{value:f.theme,onValueChange:s=>g(t=>({...t,theme:s})),children:[e.jsx(P,{className:"text-right",dir:"rtl",children:e.jsx(S,{})}),e.jsxs(k,{dir:"rtl",children:[e.jsx(r,{value:"light",children:"روشن"}),e.jsx(r,{value:"dark",children:"تیره"}),e.jsx(r,{value:"system",children:"خودکار"})]})]})]})]}),e.jsx("div",{className:"flex justify-start pt-4",children:e.jsx(T,{onClick:()=>U("نمایش",f),disabled:x,className:"flex items-center gap-2 flex-row-reverse",children:x?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"در حال ذخیره..."})]}):e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"ذخیره تنظیمات"})]})})})]})]})}),e.jsx(D,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"تغییر رمز عبور"}),e.jsx(ee,{className:"w-5 h-5"})]}),e.jsx(y,{className:"text-right",children:"برای امنیت بیشتر، رمز عبور خود را به‌روزرسانی کنید"})]}),e.jsxs(C,{className:"space-y-4 text-right",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"رمز عبور فعلی"}),e.jsx(z,{type:"password",value:i.currentPassword,onChange:s=>E(t=>({...t,currentPassword:s.target.value})),placeholder:"رمز عبور فعلی",className:"text-left",dir:"ltr"})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"رمز عبور جدید"}),e.jsx(z,{type:"password",value:i.newPassword,onChange:s=>E(t=>({...t,newPassword:s.target.value})),placeholder:"رمز عبور جدید",className:"text-left",dir:"ltr"})]}),e.jsxs("div",{className:"space-y-2 text-right",children:[e.jsx(a,{className:"text-right",children:"تکرار رمز عبور جدید"}),e.jsx(z,{type:"password",value:i.confirmPassword,onChange:s=>E(t=>({...t,confirmPassword:s.target.value})),placeholder:"تکرار رمز عبور جدید",className:"text-left",dir:"ltr"})]})]}),e.jsx("div",{className:"flex justify-start",children:e.jsx(T,{onClick:Y,disabled:x,className:"flex items-center gap-2 flex-row-reverse",children:x?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"در حال تغییر..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:"تغییر رمز عبور"})]})})})]})]}),e.jsxs(N,{children:[e.jsxs(v,{children:[e.jsxs(w,{className:"flex items-center gap-2 flex-row-reverse",children:[e.jsx("span",{children:"وضعیت حساب کاربری"}),e.jsx(R,{className:"w-5 h-5"})]}),e.jsx(y,{className:"text-right",children:"اطلاعات امنیتی و وضعیت فعلی حساب شما"})]}),e.jsx(C,{className:"space-y-4 text-right",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3 text-right",children:[e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsx("span",{className:"text-sm text-right",children:"وضعیت حساب:"}),e.jsx(L,{variant:n.isActive?"default":"destructive",children:n.isActive?"فعال":"غیرفعال"})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsx("span",{className:"text-sm text-right",children:"نوع کاربر:"}),e.jsx(L,{variant:"secondary",children:n.userType})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsx("span",{className:"text-sm text-right",children:"تایید شماره تلفن:"}),e.jsx(L,{variant:n.phoneVerified?"default":"secondary",children:n.phoneVerified?"تایید شده":"در انتظار تایید"})]})]}),e.jsxs("div",{className:"space-y-3 text-right",children:[e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsx("span",{className:"text-sm text-right",children:"تایید ایمیل:"}),e.jsx(L,{variant:n.emailVerified?"default":"secondary",children:n.emailVerified?"تایید شده":"در انتظار تایید"})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsx("span",{className:"text-sm text-right",children:"آخرین ورود:"}),e.jsx("span",{className:"text-sm text-muted-foreground text-right",children:n.lastLogin})]}),e.jsxs("div",{className:"flex items-center justify-between",dir:"rtl",children:[e.jsx("span",{className:"text-sm text-right",children:"تاریخ ثبت‌نام:"}),e.jsx("span",{className:"text-sm text-muted-foreground text-right",children:n.registrationDate})]})]})]})})]})]})})]})]})}export{je as default};
