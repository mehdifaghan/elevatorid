import{r as n,u as C,i as S,a as T,j as e,C as k,b as I,c as L,d as O,e as P,L as R,I as D,f as E,g as t,B as i,t as f}from"./index-tH8kGzNV.js";function B(){const[o,c]=n.useState(""),[d,u]=n.useState(!1),[g,b]=n.useState(!1),[m,x]=n.useState(180),{verifyOTP:h,login:j}=C(),p=S(),l=T(),r=p.state?.mobile;n.useEffect(()=>{if(!r){l("/login");return}const s=setInterval(()=>{x(a=>a<=1?(b(!0),0):a-1)},1e3);return()=>clearInterval(s)},[r,l]);const y=s=>{const a=Math.floor(s/60),v=s%60;return`${a}:${v.toString().padStart(2,"0")}`},w=async s=>{if(s.preventDefault(),o.length!==6){f.error("کد تایید باید ۶ رقم باشد");return}u(!0);try{await h(r,o),l("/dashboard")}catch{c("")}finally{u(!1)}},N=async()=>{if(g)try{const s=`captcha_resend_${Date.now()}`;await j(r,s),b(!1),x(180),f.success("کد تایید مجدداً ارسال شد")}catch{}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 px-4",children:e.jsxs(k,{className:"w-full max-w-md",children:[e.jsxs(I,{className:"text-center",children:[e.jsx(L,{className:"text-2xl",children:"تایید شماره موبایل"}),e.jsxs(O,{children:["کد تایید ۶ رقمی ارسال شده به شماره ",e.jsx("span",{className:"font-mono",dir:"ltr",children:r})," را وارد کنید"]})]}),e.jsxs(P,{children:[e.jsx("div",{className:"mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 text-center",children:"💡 برای دمو: هر کد ۶ رقمی قابل قبول است (مثال: 123456)"})}),e.jsxs("form",{onSubmit:w,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(R,{htmlFor:"otp",className:"block text-center",children:"کد تایید"}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{dir:"ltr",className:"flex justify-center",children:e.jsx(D,{value:o,onChange:c,maxLength:6,dir:"ltr",children:e.jsxs(E,{className:"flex-row gap-1.5 sm:gap-2",children:[e.jsx(t,{index:0,className:"w-9 h-11 sm:w-11 sm:h-13 text-base sm:text-lg font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200"}),e.jsx(t,{index:1,className:"w-9 h-11 sm:w-11 sm:h-13 text-base sm:text-lg font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200"}),e.jsx(t,{index:2,className:"w-9 h-11 sm:w-11 sm:h-13 text-base sm:text-lg font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200"}),e.jsx(t,{index:3,className:"w-9 h-11 sm:w-11 sm:h-13 text-base sm:text-lg font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200"}),e.jsx(t,{index:4,className:"w-9 h-11 sm:w-11 sm:h-13 text-base sm:text-lg font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200"}),e.jsx(t,{index:5,className:"w-9 h-11 sm:w-11 sm:h-13 text-base sm:text-lg font-bold border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-100 bg-gray-50 focus:bg-white transition-all duration-200"})]})})})})]}),e.jsx(i,{type:"submit",className:"w-full",disabled:d||o.length!==6,children:d?"در حال تایید...":"تایید و ورود"}),e.jsxs("div",{className:"text-center space-y-2",children:[m>0?e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ارسال مجدد کد تا: ",y(m)]}):e.jsx(i,{type:"button",variant:"ghost",onClick:N,disabled:!g,children:"ارسال مجدد کد تایید"}),e.jsx(i,{type:"button",variant:"ghost",onClick:()=>l("/login"),className:"text-sm",children:"بازگشت به صفحه ورود"})]})]})]})]})})}export{B as default};
