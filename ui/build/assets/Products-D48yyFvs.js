import{r as o,j as e,B as w,C as u,e as p,b as A,p as h,V as ce,v as Q,o as C,Q as ne,R as de,t as x,L as i,z as me,D as oe,E as G,F as J,c as z,d as W}from"./index-tH8kGzNV.js";import{T as xe,a as he,b as K,c as v,d as ue,e as y}from"./table-DC3MYrD8.js";import{D as U,a as pe,b as X,c as Y,d as Z,e as _}from"./dialog-DAjwwShP.js";import{S as ee}from"./scroll-area-VRfuIe_R.js";import{D as ge,a as je,b as Ne,c as k}from"./dropdown-menu-BKfQT_JD.js";import{S as F,a as L,b as V,c as B,d as j}from"./select-B8NiX_r6.js";import{S as fe}from"./switch-DOMxWR7b.js";import{T as be,a as ve,b as ye,c as Ce}from"./tooltip-CkdpyXMD.js";import{a as we,S as Se}from"./SellModal-B1TPinsx.js";import{Q as Te}from"./QRCodeGenerator-DzqPO6-F.js";import{PersianDatePicker as Pe}from"./PersianDatePicker-1MwY2jFT.js";import{P as ke}from"./plus-A2-5MgKF.js";import{S as De}from"./search-8LTSveb2.js";import{S as Ie}from"./ship-CTFlTIuv.js";import{E as Ae}from"./ellipsis-J_HkHiqq.js";import{S as Fe}from"./square-pen-BV4EFpYT.js";import{F as te}from"./file-text-DbNNqFYp.js";import{T as Le}from"./trash-2-BwVZTJjK.js";import"./index-DGGMjIYi.js";import"./Combination-Dzecd94B.js";import"./x-B6dSK8zO.js";import"./index-BdQq_4o_.js";import"./chevron-right-B97jr1RJ.js";import"./check-DV_4N94Y.js";import"./index-BuiImgyP.js";import"./download-BGqk_jGh.js";import"./copy-CIVXPvX_.js";import"./popover-B3pW-y7H.js";import"./utils-BvTIn9cQ.js";const se=[{id:"1",name:"موتور آسانسور AC",model:"AC-2000",serialNumber:"AC20001234",categoryId:"1-1",categoryName:"موتور AC",manufacturer:"شرکت موتور پارس",specifications:{power:"10HP",voltage:"380V",frequency:"50Hz",speed:"1450RPM"},status:"available",createdAt:"۱۴۰۲/۰۹/۱۵",price:25e6,productType:"manufactured"},{id:"2",name:"کنترلر فرکانس VFD",model:"VFD-500",serialNumber:"VFD5005678",categoryId:"2-1",categoryName:"کنترلر فرکانس",manufacturer:"شرکت الکترونیک پیشرو",specifications:{power:"5.5KW",inputVoltage:"380V",outputVoltage:"0-380V",frequency:"0-50Hz"},status:"sold",createdAt:"۱۴۰۲/۰۹/۱۲",price:18e6,productType:"manufactured"},{id:"3",name:"کابل آسانسور سه فاز",model:"CABLE-3P-10",serialNumber:"CAB3P001",categoryId:"3-1",categoryName:"کابل",manufacturer:"شرکت کابل ایران",specifications:{wireCount:"10",crossSection:"2.5mm²",insulationType:"PVC",length:"100متر"},status:"available",createdAt:"۱۴۰۲/۰۹/۱۰",price:5e6,productType:"manufactured"},{id:"4",name:"کابل آسانسور سه فاز",model:"CABLE-3P-10",serialNumber:"CAB3P002",categoryId:"3-1",categoryName:"کابل",manufacturer:"شرکت کابل ایران",specifications:{wireCount:"10",crossSection:"2.5mm²",insulationType:"PVC",length:"100متر"},status:"available",createdAt:"۱۴۰۲/۰۹/۱۰",price:5e6,productType:"manufactured"},{id:"5",name:"کابل آسانسور سه فاز",model:"CABLE-3P-10",serialNumber:"CAB3P003",categoryId:"3-1",categoryName:"کابل",manufacturer:"شرکت کابل ایران",specifications:{wireCount:"10",crossSection:"2.5mm²",insulationType:"PVC",length:"100متر"},status:"reserved",createdAt:"۱۴۰۲/۰۹/۱۰",price:5e6,productType:"manufactured"},{id:"6",name:"اینکودر اتیس",model:"OTIS-ENC-2024",serialNumber:"OTIS24001",categoryId:"2-1",categoryName:"کنترلر فرکانس",manufacturer:"OTIS Elevator Co.",specifications:{resolution:"1024 PPR",voltage:"24V DC",outputType:"Incremental",ipRating:"IP67"},status:"available",createdAt:"۱۴۰۲/۰۹/۰۸",price:35e6,productType:"imported"}],le={available:"bg-green-100 text-green-800",sold:"bg-blue-100 text-blue-800",reserved:"bg-yellow-100 text-yellow-800"},q={available:"موجود",sold:"فروخته شده",reserved:"رزرو شده"};function os(){const[r,t]=o.useState(se),[c,N]=o.useState(""),[D,S]=o.useState("all"),[d,m]=o.useState(null),[T,g]=o.useState(!1),[P,f]=o.useState(!1),b={total:r.length,available:r.filter(l=>l.status==="available").length,sold:r.filter(l=>l.status==="sold").length,installing:r.filter(l=>l.status==="installing").length,delivered:r.filter(l=>l.status==="delivered").length},[I,M]=o.useState(!1),$=s=>{const l=r.filter(n=>n.name===s.name&&n.model===s.model&&n.manufacturer===s.manufacturer&&JSON.stringify(n.specifications)===JSON.stringify(s.specifications));if(l.length>1){const n=l.findIndex(ie=>ie.id===s.id);return{isBatch:!0,batchSize:l.length,batchIndex:n+1}}return{isBatch:!1,batchSize:1,batchIndex:1}},R=r.filter(s=>{const l=s.name.toLowerCase().includes(c.toLowerCase())||s.model.toLowerCase().includes(c.toLowerCase())||s.serialNumber.toLowerCase().includes(c.toLowerCase()),n=D==="all"||s.status===D;return l&&n}),O=s=>{confirm(`آیا از حذف ${s.name} اطمینان دارید؟`)&&(t(l=>l.filter(n=>n.id!==s.id)),x.success(`${s.name} حذف شد`))},E=s=>{m(s),M(!0)},a=async()=>{f(!0),setTimeout(()=>{t(se),x.success("لیست محصولات به‌روزرسانی شد"),f(!1)},1e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"مدیریت محصولات"}),e.jsx("p",{className:"text-muted-foreground",children:"قطعات و محصولات در مالکیت شما"})]}),e.jsxs(U,{open:T,onOpenChange:g,children:[e.jsx(pe,{asChild:!0,children:e.jsxs(w,{children:[e.jsx(ke,{className:"w-4 h-4 ml-2"}),"ثبت محصول جدید"]})}),e.jsxs(X,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(Y,{className:"text-right",dir:"rtl",children:[e.jsx(Z,{className:"text-right",children:"ثبت محصول جدید"}),e.jsx(_,{className:"text-right",children:"اطلاعات محصول جدید را وارد کنید. برای ثبت چندین محصول با مشخصات یکسان، حالت دسته‌ای را فعال کنید."})]}),e.jsx(ee,{className:"max-h-[calc(90vh-8rem)] overflow-auto",children:e.jsx(Ve,{onClose:()=>g(!1)})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx(u,{className:"border-l-4 border-l-blue-500",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-blue-600",children:b.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"کل محصولات"})]})})}),e.jsx(u,{className:"border-l-4 border-l-green-500",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-green-600",children:b.available}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"در دسترس"})]})})}),e.jsx(u,{className:"border-l-4 border-l-orange-500",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-orange-600",children:b.sold}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"فروخته شده"})]})})}),e.jsx(u,{className:"border-l-4 border-l-yellow-500",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-yellow-600",children:b.installing}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"در حال نصب"})]})})}),e.jsx(u,{className:"border-l-4 border-l-purple-500",children:e.jsx(p,{className:"p-3",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-xl font-bold text-purple-600",children:b.delivered}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"تحویل داده شده"})]})})})]}),e.jsxs(u,{children:[e.jsx(A,{children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:e.jsxs("div",{className:"flex-1 flex gap-2",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(De,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(h,{placeholder:"جستجو بر اساس نام، مدل یا سریال...",value:c,onChange:s=>N(s.target.value),className:"pr-10"})]}),e.jsxs(F,{value:D,onValueChange:S,children:[e.jsx(L,{className:"w-32",children:e.jsx(V,{placeholder:"وضعیت"})}),e.jsxs(B,{children:[e.jsx(j,{value:"all",children:"همه"}),e.jsx(j,{value:"available",children:"موجود"}),e.jsx(j,{value:"sold",children:"فروخته شده"}),e.jsx(j,{value:"reserved",children:"رزرو شده"})]})]}),e.jsx(be,{children:e.jsxs(ve,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(w,{variant:"outline",size:"icon",onClick:a,disabled:P,className:"shrink-0",children:e.jsx(ce,{className:`w-4 h-4 ${P?"animate-spin":""}`})})}),e.jsx(Ce,{children:e.jsx("p",{children:"تازه‌سازی لیست محصولات"})})]})})]})})}),e.jsxs(p,{children:[e.jsx("div",{className:"rounded-lg border",children:e.jsxs(xe,{children:[e.jsx(he,{children:e.jsxs(K,{children:[e.jsx(v,{children:"نام محصول"}),e.jsx(v,{children:"مدل/سریال"}),e.jsx(v,{children:"دسته‌بندی"}),e.jsx(v,{children:"قیمت"}),e.jsx(v,{children:"وضعیت"}),e.jsx(v,{children:"تاریخ ثبت"}),e.jsx(v,{children:"عملیات"})]})}),e.jsx(ue,{children:R.map(s=>{const l=$(s);return e.jsxs(K,{children:[e.jsx(y,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s.productType==="imported"?e.jsx(Ie,{className:"w-4 h-4 text-purple-600"}):e.jsx(Q,{className:"w-4 h-4 text-blue-600"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{children:s.name}),s.productType==="imported"&&e.jsx(C,{variant:"secondary",className:"bg-purple-100 text-purple-800 text-xs",children:"🚢 وارداتی"})]}),l.isBatch&&e.jsxs(C,{variant:"secondary",className:"bg-indigo-100 text-indigo-800 text-xs w-fit",children:["📊 دسته‌ای ",l.batchIndex,"/",l.batchSize]})]})]})}),e.jsx(y,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.model}),e.jsx("div",{className:"text-sm text-muted-foreground",children:s.serialNumber})]})}),e.jsx(y,{children:e.jsx(C,{variant:"outline",children:s.categoryName})}),e.jsx(y,{children:s.price?e.jsxs("span",{className:"font-medium",children:[s.price.toLocaleString()," ریال"]}):e.jsx("span",{className:"text-muted-foreground",children:"تعیین نشده"})}),e.jsx(y,{children:e.jsx(C,{variant:"secondary",className:le[s.status],children:q[s.status]})}),e.jsx(y,{children:s.createdAt}),e.jsx(y,{children:e.jsxs(ge,{children:[e.jsx(je,{asChild:!0,children:e.jsx(w,{variant:"ghost",size:"sm",children:e.jsx(Ae,{className:"w-4 h-4"})})}),e.jsxs(Ne,{align:"end",children:[e.jsxs(k,{onClick:()=>m(s),children:[e.jsx(ne,{className:"w-4 h-4 ml-2"}),"مشاهده جزئیات"]}),e.jsxs(k,{children:[e.jsx(Fe,{className:"w-4 h-4 ml-2"}),"ویرایش"]}),s.status==="available"&&e.jsxs(k,{onClick:()=>E(s),children:[e.jsx(we,{className:"w-4 h-4 ml-2"}),"فروش"]}),e.jsxs(k,{children:[e.jsx(de,{className:"w-4 h-4 ml-2"}),"QR Code"]}),e.jsxs(k,{children:[e.jsx(te,{className:"w-4 h-4 ml-2"}),"دانلود شناسنامه"]}),e.jsxs(k,{onClick:()=>O(s),className:"text-destructive focus:text-destructive",children:[e.jsx(Le,{className:"w-4 h-4 ml-2"}),"حذف"]})]})]})})]},s.id)})})]})}),R.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"محصولی یافت نشد"})]})]})]}),d&&!I&&e.jsx(U,{open:!!d,onOpenChange:()=>m(null),children:e.jsxs(X,{className:"max-w-6xl max-h-[95vh]",children:[e.jsxs(Y,{className:"text-right",dir:"rtl",children:[e.jsxs(Z,{className:"text-right",children:["جزئیات محصول: ",d.name]}),e.jsx(_,{className:"text-right",children:"مشاهده اطلاعات کامل، مشخصات فنی و تاریخچه محصول"})]}),e.jsx(ee,{className:"max-h-[calc(95vh-8rem)] overflow-auto",children:e.jsx(Be,{product:d})})]})}),I&&d&&e.jsx(Se,{isOpen:I,onClose:()=>{M(!1),m(null)},preSelectedPart:{id:d.id,name:d.name,code:d.model,serial:d.serialNumber,category:d.categoryName},title:"فروش محصول",description:"انجام فرآیند فروش محصول"})]})}const ae=[{id:"1",name:"موتور آسانسور",specifications:[{key:"power",label:"قدرت (HP)",type:"text"},{key:"voltage",label:"ولتاژ (V)",type:"text"},{key:"frequency",label:"فرکانس (Hz)",type:"text"},{key:"speed",label:"سرعت (RPM)",type:"text"}]},{id:"2",name:"کنترلر",specifications:[{key:"inputVoltage",label:"ولتاژ ورودی (V)",type:"text"},{key:"outputVoltage",label:"ولتاژ خروجی (V)",type:"text"},{key:"capacity",label:"ظرفیت (A)",type:"text"},{key:"protocol",label:"پروتکل ارتباطی",type:"text"}]},{id:"3",name:"کابل",specifications:[{key:"wireCount",label:"تعداد سیم",type:"text"},{key:"crossSection",label:"سطح مقطع (mm²)",type:"text"},{key:"insulationType",label:"نوع عایق",type:"text"},{key:"length",label:"طول (متر)",type:"text"}]}],re=["ایران","آلمان","ایتالیا","ترکیه","چین","کره جنوبی","ژاپن","فنلاند","سوئد","سوئیس"];function Ve({onClose:r}){const[t,c]=o.useState({name:"",model:"",serialNumber:"",categoryId:"",manufacturer:"",brand:"",price:"",productType:"manufactured",manufacturerCountry:"ایران",originCountry:"",productionDate:"",specifications:{}}),[N,D]=o.useState(!1),[S,d]=o.useState(1),[m,T]=o.useState([""]),[g,P]=o.useState(null),f=ae.find(a=>a.id===t.categoryId),H=a=>{if(a.preventDefault(),t.productType==="imported"&&!g){x.error("برای محصولات وارداتی، بارگذاری برگه سبز ترخیص کالا الزامی است");return}if(N){if(m.filter(n=>!n.trim()).length>0){x.error("لطفاً تمام شماره‌های سریال را وارد کنید");return}if(new Set(m).size!==m.length){x.error("شماره‌های سریال نمی‌توانند تکراری باشند");return}x.success(`${S} محصول ${t.productType==="imported"?"وارداتی":"تولیدی"} دسته‌ای ثبت شد`)}else x.success(`محصول ${t.productType==="imported"?"وارداتی":"تولیدی"} جدید ثبت شد`);r()},b=a=>{c(s=>({...s,categoryId:a,specifications:{}}))},I=(a,s)=>{c(l=>({...l,specifications:{...l.specifications,[a]:s}}))},M=a=>{D(a),a?(T(Array(S).fill("")),c(s=>({...s,serialNumber:""}))):(T([""]),d(1))},$=a=>{d(a);const s=Array(a).fill("");for(let l=0;l<Math.min(a,m.length);l++)s[l]=m[l]||"";T(s)},R=(a,s)=>{T(l=>{const n=[...l];return n[a]=s,n})},O=a=>{const s=a.target.files?.[0];if(s){if(!["application/pdf","image/jpeg","image/png","image/jpg"].includes(s.type)){x.error("فقط فایل‌های PDF، JPG و PNG مجاز هستند");return}if(s.size>5*1024*1024){x.error("حجم فایل نباید بیشتر از ۵ مگابایت باشد");return}P(s),x.success("فایل برگه سبز ترخیص کالا بارگذاری شد")}},E=a=>{c(s=>{const l={...s,productType:a};return a==="manufactured"?l.manufacturerCountry="ایران":a==="imported"&&(l.manufacturerCountry=""),l}),a==="manufactured"&&g&&P(null)};return e.jsx("div",{className:"space-y-6",dir:"rtl",children:e.jsxs("form",{onSubmit:H,className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[e.jsx("h3",{className:"font-medium text-blue-800 flex items-center gap-2 mb-4",children:"📦 اطلاعات پایه محصول"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"name",className:"text-blue-700 flex items-center gap-2",children:"📝 نام محصول *"}),e.jsx(h,{id:"name",placeholder:"نام محصول را وارد کنید",value:t.name,onChange:a=>c(s=>({...s,name:a.target.value})),className:"bg-white border-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"model",className:"text-blue-700 flex items-center gap-2",children:"🏷️ مدل *"}),e.jsx(h,{id:"model",placeholder:"مدل محصول",value:t.model,onChange:a=>c(s=>({...s,model:a.target.value})),className:"bg-white border-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"category",className:"text-blue-700 flex items-center gap-2",children:"📂 دسته‌بندی محصول *"}),e.jsxs(F,{value:t.categoryId,onValueChange:b,children:[e.jsx(L,{className:"bg-white border-blue-300",children:e.jsx(V,{placeholder:"انتخاب دسته‌بندی"})}),e.jsx(B,{children:ae.map(a=>e.jsx(j,{value:a.id,children:a.name},a.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"manufacturer",className:"text-blue-700 flex items-center gap-2",children:"🏭 سازنده *"}),e.jsx(h,{id:"manufacturer",placeholder:"نام سازنده",value:t.manufacturer,onChange:a=>c(s=>({...s,manufacturer:a.target.value})),className:"bg-white border-blue-300",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"brand",className:"text-blue-700 flex items-center gap-2",children:"🏢 برند"}),e.jsx(h,{id:"brand",placeholder:"نام برند",value:t.brand,onChange:a=>c(s=>({...s,brand:a.target.value})),className:"bg-white border-blue-300"})]})]})]}),e.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"font-medium text-indigo-800 flex items-center gap-2",children:"📊 نحوه ثبت محصول"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(i,{htmlFor:"batch-mode",className:"text-indigo-700 flex items-center gap-2",children:"📦 ثبت دسته‌ای"}),e.jsx(fe,{id:"batch-mode",checked:N,onCheckedChange:M})]})]}),N?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-300",children:[e.jsx("p",{className:"text-indigo-700 mb-3 flex items-center gap-2",children:"✨ حالت ثبت دسته‌ای فعال است"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-indigo-700 flex items-center gap-2",children:"🔢 تعداد محصولات *"}),e.jsx(h,{type:"number",min:1,max:50,value:S,onChange:a=>$(Math.max(1,Math.min(50,parseInt(a.target.value)||1))),className:"bg-white border-indigo-300 text-left",dir:"ltr"}),e.jsx("p",{className:"text-xs text-indigo-600",children:"💡 حداکثر ۵۰ محصول در هر بار"})]})})]}),e.jsxs("div",{className:"bg-white p-3 rounded border border-indigo-300",children:[e.jsx("h4",{className:"font-medium text-indigo-800 mb-3 flex items-center gap-2",children:"🏷️ شماره‌های سریال محصولات"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-64 overflow-y-auto",children:m.map((a,s)=>e.jsxs("div",{className:"space-y-1",children:[e.jsxs(i,{className:"text-indigo-700 text-sm",children:["محصول ",s+1]}),e.jsx(h,{placeholder:`Serial Number ${s+1}`,value:a,onChange:l=>R(s,l.target.value),className:"bg-white border-indigo-300 text-left",dir:"ltr",required:!0})]},s))}),e.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"⚠️ تمام شماره‌های سریال باید منحصر به فرد باشند"})]})]}):e.jsx("div",{className:"bg-white p-3 rounded border border-indigo-300",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"serialNumber",className:"text-indigo-700 flex items-center gap-2",children:"🔢 شماره سریال *"}),e.jsx(h,{id:"serialNumber",placeholder:"Serial Number",value:t.serialNumber,onChange:a=>c(s=>({...s,serialNumber:a.target.value})),className:"bg-white border-indigo-300 text-left",dir:"ltr",required:!0}),e.jsx("p",{className:"text-xs text-indigo-600",children:"💡 برای ثبت چندین محصول با مشخصات یکسان، حالت دسته‌ای را فعال کنید"})]})})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[e.jsx("h3",{className:"font-medium text-green-800 flex items-center gap-2 mb-4",children:"💰 اطلاعات قیمت"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"price",className:"text-green-700 flex items-center gap-2",children:"💵 قیمت (ریال)"}),e.jsx(h,{id:"price",type:"number",placeholder:"قیمت محصول به ریال",value:t.price,onChange:a=>c(s=>({...s,price:a.target.value})),className:"bg-white border-green-300 text-left",dir:"ltr"}),e.jsx("p",{className:"text-xs text-green-600",children:'💡 در صورت عدم وارد کردن، قیمت به عنوان "تعیین نشده" ثبت خواهد شد'})]})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[e.jsx("h3",{className:"font-medium text-purple-800 flex items-center gap-2 mb-4",children:"🌍 اطلاعات تولید/واردات"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-purple-700 flex items-center gap-2",children:"🏭 نوع محصول *"}),e.jsxs(F,{value:t.productType,onValueChange:E,children:[e.jsx(L,{className:"bg-white border-purple-300",children:e.jsx(V,{})}),e.jsxs(B,{children:[e.jsx(j,{value:"manufactured",children:"🏭 تولیدی"}),e.jsx(j,{value:"imported",children:"🚢 وارداتی"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-purple-700 flex items-center gap-2",children:["📅 ",t.productType==="manufactured"?"تاریخ تولید":"تاریخ واردات"]}),e.jsx(Pe,{value:t.productionDate,onChange:a=>c(s=>({...s,productionDate:a})),placeholder:t.productType==="manufactured"?"انتخاب تاریخ تولید":"انتخاب تاریخ واردات"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-purple-700 flex items-center gap-2",children:["🏳️ کشور سازنده *",t.productType==="manufactured"&&e.jsx("span",{className:"text-xs text-green-600",children:"(اتوماتیک)"})]}),e.jsxs(F,{value:t.manufacturerCountry,onValueChange:a=>c(s=>({...s,manufacturerCountry:a})),disabled:t.productType==="manufactured",children:[e.jsx(L,{className:`bg-white border-purple-300 ${t.productType==="manufactured"?"opacity-75 cursor-not-allowed":""}`,children:e.jsx(V,{placeholder:t.productType==="manufactured"?"ایران":"انتخاب کشور"})}),e.jsx(B,{children:re.map(a=>e.jsx(j,{value:a,children:a},a))})]}),t.productType==="manufactured"&&e.jsx("p",{className:"text-xs text-green-600 flex items-center gap-1",children:"✨ برای محصولات تولیدی، کشور سازنده اتوماتیک ایران انتخاب می‌شود"})]}),t.productType==="imported"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{className:"text-purple-700 flex items-center gap-2",children:"🌍 کشور مبدا"}),e.jsxs(F,{value:t.originCountry,onValueChange:a=>c(s=>({...s,originCountry:a})),children:[e.jsx(L,{className:"bg-white border-purple-300",children:e.jsx(V,{placeholder:"انتخاب کشور مبدا"})}),e.jsx(B,{children:re.map(a=>e.jsx(j,{value:a,children:a},a))})]})]})]})]}),t.productType==="imported"&&e.jsxs("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[e.jsx("h3",{className:"font-medium text-red-800 flex items-center gap-2 mb-4",children:"📄 مدارک گمرکی"}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"bg-white p-3 rounded border border-red-300",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{className:"text-red-700 flex items-center gap-2",children:"📋 برگه سبز ترخیص کالا *"}),g?e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded",children:e.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-800",children:g.name}),e.jsxs("p",{className:"text-sm text-green-600",children:[(g.size/1024/1024).toFixed(2)," مگابایت"]})]})]}),e.jsx(w,{type:"button",variant:"outline",size:"sm",onClick:()=>P(null),className:"text-red-600 border-red-300 hover:bg-red-50",children:"حذف"})]})}):e.jsxs("div",{className:"border-2 border-dashed border-red-300 rounded-lg p-6 text-center hover:border-red-400 transition-colors",children:[e.jsx("input",{type:"file",id:"customs-clearance",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:O}),e.jsxs("label",{htmlFor:"customs-clearance",className:"cursor-pointer flex flex-col items-center gap-2",children:[e.jsx("div",{className:"bg-red-100 p-3 rounded-full",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-red-700 font-medium",children:"کلیک کنید تا فایل انتخاب کنید"}),e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"فرمت‌های مجاز: PDF، JPG، PNG (حداکثر ۵ مگابایت)"})]})]})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-amber-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 15.5c-.77.833.192 2.5 1.732 2.5z"})}),e.jsxs("div",{className:"text-sm text-amber-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"⚠️ نکات مهم:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"برگه سبز ترخیص کالا برای محصولات وارداتی الزامی است"}),e.jsx("li",{children:"فایل باید واضح و خوانا باشد"}),e.jsx("li",{children:"اطلاعات روی برگه باید با مشخصات وارد شده مطابقت داشته باشد"})]})]})]})})]})})})]}),f&&e.jsxs("div",{className:"bg-orange-50 p-4 rounded-lg border border-orange-200",children:[e.jsxs("h3",{className:"font-medium text-orange-800 flex items-center gap-2 mb-4",children:["⚙️ مشخصات فنی ",f.name]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.specifications.map(a=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs(i,{className:"text-orange-700 flex items-center gap-2",children:["🔧 ",a.label]}),e.jsx(h,{type:a.type,placeholder:`${a.label} را وارد کنید`,value:t.specifications[a.key]||"",onChange:s=>I(a.key,s.target.value),className:"bg-white border-orange-300"})]},a.key))}),e.jsx("p",{className:"text-xs text-orange-600 mt-3",children:"⚡ مشخصات فنی بر اساس دسته‌بندی انتخاب شده تولید می‌شوند"})]}),!f&&e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(Q,{className:"mx-auto h-12 w-12 text-gray-400 mb-2"}),e.jsx("p",{children:"ابتدا دسته‌بندی محصول را انتخاب کنید تا مشخصات فنی نمایش داده شود"})]})}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:[e.jsx(w,{type:"button",variant:"outline",onClick:r,children:"❌ انصراف"}),e.jsx(w,{type:"submit",className:"bg-green-600 hover:bg-green-700",disabled:!t.name||!t.model||!t.categoryId||!t.manufacturer||(N?m.some(a=>!a.trim()):!t.serialNumber)||t.productType==="imported"&&!g,children:N?`✅ ثبت ${S} محصول ${t.productType==="imported"?"وارداتی":"تولیدی"}`:`✅ ثبت محصول ${t.productType==="imported"?"وارداتی":"تولیدی"}`})]})]})})}function Be({product:r}){return e.jsx("div",{className:"space-y-6",dir:"rtl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{children:e.jsxs(me,{defaultValue:"info",className:"w-full",dir:"rtl",children:[e.jsxs(oe,{className:"grid w-full grid-cols-2",dir:"rtl",children:[e.jsx(G,{value:"info",className:"text-right",children:"اطلاعات محصول"}),e.jsx(G,{value:"history",className:"text-right",children:"تاریخچه"})]}),e.jsx(J,{value:"info",className:"space-y-4",dir:"rtl",children:e.jsxs(u,{className:"text-right",children:[e.jsx(A,{className:"text-right",children:e.jsx(z,{className:"text-lg text-right",children:"اطلاعات کامل محصول"})}),e.jsx(p,{className:"text-right",children:e.jsxs("div",{className:"space-y-6 text-right",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-3",children:"اطلاعات پایه"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"شناسه محصول:"}),e.jsxs("p",{className:"mt-1 font-medium text-blue-600",children:["#",r.id]})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"نام محصول:"}),e.jsx("p",{className:"mt-1 font-medium",children:r.name})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"مدل:"}),e.jsx("p",{className:"mt-1 font-medium",children:r.model})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"شماره سریال:"}),e.jsx("p",{className:"mt-1 font-mono font-medium bg-gray-50 px-2 py-1 rounded text-sm",children:r.serialNumber})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"سازنده:"}),e.jsx("p",{className:"mt-1 font-medium",children:r.manufacturer})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"دسته‌بندی:"}),e.jsx("div",{className:"mt-1",children:e.jsx(C,{variant:"outline",children:r.categoryName})})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"وضعیت:"}),e.jsx("div",{className:"mt-1",children:e.jsx(C,{variant:"secondary",className:le[r.status],children:q[r.status]})})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"قیمت:"}),e.jsx("p",{className:"mt-1 font-medium",children:r.price?e.jsxs("span",{className:"text-green-600",children:[r.price.toLocaleString()," ریال"]}):e.jsx("span",{className:"text-gray-500",children:"تعیین نشده"})})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"تاریخ ثبت:"}),e.jsx("p",{className:"mt-1 font-medium",children:r.createdAt})]}),e.jsxs("div",{children:[e.jsx(i,{className:"text-sm font-medium text-muted-foreground",children:"نوع محصول:"}),e.jsx("div",{className:"mt-1",children:e.jsx(C,{variant:"secondary",className:r.productType==="imported"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800",children:r.productType==="imported"?"🚢 وارداتی":"🏭 تولیدی"})})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm text-muted-foreground mb-3",children:"مشخصات فنی"}),e.jsx("div",{className:"grid grid-cols-1 gap-4",children:Object.entries(r.specifications).map(([t,c])=>e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsxs(i,{className:"text-sm font-medium text-blue-700",children:[t,":"]}),e.jsx("p",{className:"mt-1 font-medium text-blue-900",children:c})]},t))})]})]})})]})}),e.jsx(J,{value:"history",className:"space-y-4",children:e.jsxs(u,{children:[e.jsx(A,{children:e.jsx(z,{className:"text-lg",children:"تاریخچه محصول"})}),e.jsx(p,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-r-2 border-blue-500 pr-4 bg-blue-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("p",{className:"font-medium",children:"ثبت اولیه محصول"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["📅 ",r.createdAt]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"👤 توسط: شرکت خودی"})]}),e.jsxs("div",{className:"border-r-2 border-green-500 pr-4 bg-green-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("p",{className:"font-medium",children:"تایید اطلاعات"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["📅 ",r.createdAt]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"🤖 توسط: سیستم"})]}),r.status==="sold"&&e.jsxs("div",{className:"border-r-2 border-orange-500 pr-4 bg-orange-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("p",{className:"font-medium",children:"فروش محصول"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["📅 ",r.createdAt]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"👨‍💼 توسط: مدیر شرکت"})]}),r.status==="reserved"&&e.jsxs("div",{className:"border-r-2 border-yellow-500 pr-4 bg-yellow-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),e.jsx("p",{className:"font-medium",children:"رزرو محصول"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["📅 ",r.createdAt]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"👤 توسط: مشتری"})]})]})})]})})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(u,{children:[e.jsxs(A,{children:[e.jsx(z,{className:"text-lg",children:"کد QR محصول"}),e.jsx(W,{children:"برای اسکن و دسترسی سریع به اطلاعات محصول"})]}),e.jsxs(p,{className:"flex flex-col items-center space-y-4",children:[e.jsx(Te,{data:`https://elevatorid.ieeu.ir/product/${r.serialNumber}`,title:"کد QR محصول",size:180}),e.jsxs("div",{className:"text-center text-sm text-muted-foreground bg-gray-50 p-3 rounded-lg w-full",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"شناسه محصول:"}),e.jsxs("p",{className:"font-mono font-bold text-blue-600 text-lg",children:["#",r.id]}),e.jsx("p",{className:"font-medium text-gray-700 mt-2",children:"شماره سریال:"}),e.jsx("p",{className:"font-mono font-medium text-gray-900",children:r.serialNumber})]})]})]}),e.jsxs(u,{children:[e.jsxs(A,{children:[e.jsx(z,{className:"text-lg",children:"شناسنامه محصول"}),e.jsx(W,{children:"تولید و دانلود شناسنامه کامل محصول"})]}),e.jsxs(p,{className:"space-y-3",children:[e.jsxs(w,{variant:"outline",className:"w-full",onClick:()=>{const t={...r,certificateTitle:"شناسنامه محصول",generatedAt:new Date().toLocaleDateString("fa-IR"),sections:[{title:"اطلاعات پایه",data:{"شناسه محصول":`#${r.id}`,"نام محصول":r.name,مدل:r.model,"شماره سریال":r.serialNumber,سازنده:r.manufacturer,دسته‌بندی:r.categoryName,وضعیت:q[r.status],قیمت:r.price?`${r.price.toLocaleString()} ریال`:"تعیین نشده","تاریخ ثبت":r.createdAt,"نوع محصول":r.productType==="imported"?"وارداتی":"تولیدی"}},{title:"مشخصات فنی",data:r.specifications}]};x.success(`شناسنامه ${r.name} در حال تولید...`),console.log("Certificate data for PDF:",t)},children:[e.jsx(te,{className:"w-4 h-4 ml-2"}),"تولید شناسنامه محصول"]}),e.jsx("div",{className:"text-xs text-muted-foreground bg-blue-50 p-2 rounded border border-blue-200",children:"💡 شناسنامه شامل تمام اطلاعات، مشخصات فنی و کد QR محصول خواهد بود"})]})]})]})]})})}export{os as default};
