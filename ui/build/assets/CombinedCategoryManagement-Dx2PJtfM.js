import{r as x,$ as W,j as e,p as b,B as m,L as o,C as p,e as u,o as A,v as w,t as j,x as E,b as Y,c as Z,z as ee,D as se,E as V,F as M}from"./index-tH8kGzNV.js";import{D as te,a as ae,b as le,c as re,d as ie,e as ne}from"./dialog-DAjwwShP.js";import{S as k,a as P,b as F,c as L,d as h}from"./select-B8NiX_r6.js";import{D as ce,a as de,b as me,c as z}from"./dropdown-menu-BKfQT_JD.js";import{S as xe}from"./search-8LTSveb2.js";import{P as S}from"./plus-A2-5MgKF.js";import{T as B}from"./trash-2-BwVZTJjK.js";import{F as oe,a as he,E as pe}from"./folder-MPbAmMv8.js";import{P as ge}from"./pen-CJgjb0UZ.js";import je from"./ElevatorCategoryManagement-BiTiliJT.js";import"./index-DGGMjIYi.js";import"./Combination-Dzecd94B.js";import"./x-B6dSK8zO.js";import"./index-BdQq_4o_.js";import"./index-BuiImgyP.js";import"./check-DV_4N94Y.js";import"./chevron-right-B97jr1RJ.js";import"./switch-DOMxWR7b.js";import"./textarea-1hTYB3HE.js";import"./table-DC3MYrD8.js";import"./ellipsis-J_HkHiqq.js";import"./square-pen-BV4EFpYT.js";const O=[{id:"1",name:"آسانسور مسافربری",description:"آسانسور استاندارد برای حمل مسافر"},{id:"2",name:"آسانسور بار",description:"آسانسور مخصوص حمل بار سنگین"},{id:"3",name:"آسانسور بیمارستانی",description:"آسانسور مخصوص استفاده در بیمارستان"},{id:"4",name:"آسانسور ویلایی",description:"آسانسور کوچک برای منازل"}],ue=[{id:"1",name:"موتور آسانسور",elevatorTypeId:"1",technicalSpecs:[{name:"قدرت",type:"number",unit:"کیلووات"},{name:"ولتاژ",type:"select",unit:"ولت",options:["220","380","440"]},{name:"سرعت",type:"number",unit:"دور بر دقیقه"}],createdAt:"۱۴۰۳/۰۹/۱۵",isActive:!0},{id:"2",name:"کابل آسانسور",elevatorTypeId:"1",technicalSpecs:[{name:"قطر",type:"number",unit:"میلی‌متر"},{name:"طول",type:"number",unit:"متر"},{name:"نوع عایق",type:"select",unit:"",options:["PVC","XLPE","EPR"]}],createdAt:"۱۴۰۳/۰۹/۱۴",isActive:!0},{id:"3",name:"درب آسانسور",elevatorTypeId:"2",parentId:"4",technicalSpecs:[{name:"عرض",type:"number",unit:"سانتی‌متر"},{name:"ارتفاع",type:"number",unit:"سانتی‌متر"},{name:"جنس",type:"select",unit:"",options:["استیل","آهن","آلومینیوم"]}],createdAt:"۱۴۰۳/۰۹/۱۳",isActive:!0},{id:"4",name:"تجهیزات ورودی",elevatorTypeId:"2",technicalSpecs:[{name:"نوع سیستم",type:"select",unit:"",options:["اتوماتیک","دستی"]}],createdAt:"۱۴۰۳/۰۹/۱۲",isActive:!0}],H={"موتور آسانسور":"⚙️","کابل آسانسور":"🔌","درب آسانسور":"🚪","تجهیزات ورودی":"🏗️","سیستم کنترل":"🎛️",چراغ‌ها:"💡",دکمه‌ها:"🔘"};function ve({triggerDialog:N}){const[i,v]=x.useState(ue),[g,C]=x.useState(""),[r,n]=x.useState({name:"",elevatorTypeId:"",parentId:void 0,technicalSpecs:[{name:"",type:"text",unit:""}]}),[c,f]=x.useState(null),[$,y]=x.useState(!1),T=()=>{n({name:"",elevatorTypeId:"",parentId:void 0,technicalSpecs:[{name:"",type:"text",unit:""}]})};W.useEffect(()=>{N&&(T(),f(null),y(!0))},[N]);const q=()=>{n(s=>({...s,technicalSpecs:[...s.technicalSpecs,{name:"",type:"text",unit:""}]}))},X=s=>{r.technicalSpecs.length>1&&n(t=>({...t,technicalSpecs:t.technicalSpecs.filter((l,a)=>a!==s)}))},I=(s,t,l)=>{n(a=>({...a,technicalSpecs:a.technicalSpecs.map((d,D)=>D===s?{...d,[t]:l}:d)}))},_=s=>{if(s.preventDefault(),!r.name.trim()){j.error("نام دسته‌بندی الزامی است");return}if(!r.elevatorTypeId){j.error("انتخاب نوع آسانسور الزامی است");return}const t=r.technicalSpecs.filter(a=>a.name.trim()&&a.type&&a.unit.trim()),l={id:c?.id||Date.now().toString(),name:r.name.trim(),elevatorTypeId:r.elevatorTypeId,parentId:r.parentId,technicalSpecs:t,createdAt:c?.createdAt||new Date().toLocaleDateString("fa-IR"),updatedAt:c?new Date().toLocaleDateString("fa-IR"):void 0,isActive:!0};c?(v(a=>a.map(d=>d.id===c.id?l:d)),j.success("دسته‌بندی با موفقیت بروزرسانی شد")):(v(a=>[...a,l]),j.success("دسته‌بندی جدید با موفقیت ایجاد شد")),y(!1),T(),f(null)},G=s=>{f(s),n({name:s.name,elevatorTypeId:s.elevatorTypeId,parentId:s.parentId,technicalSpecs:s.technicalSpecs.length>0?s.technicalSpecs:[{name:"",type:"text",unit:""}]}),y(!0)},J=s=>{const t=i.find(a=>a.id===s);if(!t)return;if(i.some(a=>a.parentId===s)){j.error("نمی‌توان دسته‌بندی دارای زیرمجموعه را حذف کرد");return}v(a=>a.filter(d=>d.id!==s)),j.success(`دسته‌بندی "${t.name}" حذف شد`)},R=i.filter(s=>s.name.toLowerCase().includes(g.toLowerCase())),K=s=>s?i.find(l=>l.id===s)?.name:null,Q=s=>O.find(l=>l.id===s)?.name||"نامشخص",U=s=>i.filter(t=>t.parentId===s).length;return e.jsxs("div",{className:"space-y-6",style:{direction:"rtl"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(xe,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(b,{placeholder:"جستجو در دسته‌بندی‌ها...",value:g,onChange:s=>C(s.target.value),className:"pr-10",style:{textAlign:"right",direction:"rtl"}})]}),e.jsxs(te,{open:$,onOpenChange:y,children:[e.jsx(ae,{asChild:!0,children:e.jsxs(m,{onClick:()=>{T(),f(null)},className:"bg-gray-900 hover:bg-gray-800 text-white",children:[e.jsx(S,{className:"w-4 h-4 ml-1"}),"دسته‌بندی جدید"]})}),e.jsxs(le,{className:"max-w-2xl max-h-[90vh]",style:{direction:"rtl",textAlign:"right"},children:[e.jsxs(re,{style:{textAlign:"right"},children:[e.jsx(ie,{style:{textAlign:"right"},children:c?"ویرایش دسته‌بندی":"ایجاد دسته‌بندی جدید"}),e.jsx(ne,{style:{textAlign:"right"},children:"اطلاعات دسته‌بندی قطعات را وارد کنید"})]}),e.jsx("div",{className:"max-h-[calc(90vh-8rem)] overflow-auto",children:e.jsxs("form",{onSubmit:_,className:"space-y-6",style:{direction:"rtl"},children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",style:{textAlign:"right",display:"block"},children:"نام دسته‌بندی *"}),e.jsx(b,{id:"name",value:r.name,onChange:s=>n(t=>({...t,name:s.target.value})),placeholder:"نام دسته‌بندی را وارد کنید",required:!0,style:{textAlign:"right",direction:"rtl"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"elevatorTypeId",style:{textAlign:"right",display:"block"},children:"نوع آسانسور *"}),e.jsxs(k,{value:r.elevatorTypeId,onValueChange:s=>n(t=>({...t,elevatorTypeId:s})),children:[e.jsx(P,{style:{textAlign:"right",direction:"rtl"},children:e.jsx(F,{placeholder:"نوع آسانسور را انتخاب کنید..."})}),e.jsx(L,{style:{direction:"rtl"},children:O.map(s=>e.jsx(h,{value:s.id,children:s.name},s.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"parentId",style:{textAlign:"right",display:"block"},children:"دسته‌بندی والد (اختیاری)"}),e.jsxs(k,{value:r.parentId||"none",onValueChange:s=>n(t=>({...t,parentId:s==="none"?void 0:s})),children:[e.jsx(P,{style:{textAlign:"right",direction:"rtl"},children:e.jsx(F,{placeholder:"انتخاب کنید..."})}),e.jsxs(L,{style:{direction:"rtl"},children:[e.jsx(h,{value:"none",children:"هیچ کدام (دسته‌بندی اصلی)"}),i.filter(s=>s.id!==c?.id&&s.elevatorTypeId===r.elevatorTypeId).map(s=>e.jsxs(h,{value:s.id,children:[H[s.name]||"📦"," ",s.name]},s.id))]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-base font-medium",children:"مشخصات فنی"}),e.jsxs(m,{type:"button",onClick:q,size:"sm",variant:"outline",children:[e.jsx(S,{className:"w-4 h-4 ml-1"}),"افزودن مشخصه"]})]}),e.jsx("div",{className:"space-y-3",children:r.technicalSpecs.map((s,t)=>e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(o,{className:"text-sm",children:"نام مشخصه"}),e.jsx(b,{value:s.name,onChange:l=>I(t,"name",l.target.value),placeholder:"نام مشخصه",style:{textAlign:"right",direction:"rtl"}})]}),e.jsxs("div",{className:"w-32",children:[e.jsx(o,{className:"text-sm",children:"نوع"}),e.jsxs(k,{value:s.type,onValueChange:l=>I(t,"type",l),children:[e.jsx(P,{children:e.jsx(F,{})}),e.jsxs(L,{children:[e.jsx(h,{value:"text",children:"متن"}),e.jsx(h,{value:"number",children:"عدد"}),e.jsx(h,{value:"select",children:"انتخابی"}),e.jsx(h,{value:"boolean",children:"بولی"})]})]})]}),e.jsxs("div",{className:"w-24",children:[e.jsx(o,{className:"text-sm",children:"واحد"}),e.jsx(b,{value:s.unit,onChange:l=>I(t,"unit",l.target.value),placeholder:"واحد",style:{textAlign:"right",direction:"rtl"}})]}),r.technicalSpecs.length>1&&e.jsx(m,{type:"button",variant:"outline",size:"sm",onClick:()=>X(t),className:"mb-0",children:e.jsx(B,{className:"w-4 h-4 text-red-600"})})]},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx(m,{type:"submit",className:"bg-gray-900 hover:bg-gray-800 text-white",children:c?"بروزرسانی":"ایجاد"}),e.jsx(m,{type:"button",variant:"outline",onClick:()=>y(!1),children:"انصراف"})]})]})})]})]})]}),e.jsx("div",{className:"space-y-4",children:R.length>0?R.map(s=>{const t=K(s.parentId),l=Q(s.elevatorTypeId),a=U(s.id);return e.jsx(p,{className:"border border-gray-200 bg-white hover:shadow-sm transition-shadow",children:e.jsxs(u,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.parentId?e.jsx(oe,{className:"w-5 h-5 text-gray-600"}):e.jsx(he,{className:"w-5 h-5 text-gray-700"}),e.jsx("span",{className:"text-xl",children:H[s.name]||"📦"})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsxs("span",{children:["نوع: ",l]}),t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["والد: ",t]})]}),a>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:[a," زیرمجموعه"]})]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[s.technicalSpecs.length," مشخصه فنی"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{variant:s.isActive?"default":"secondary",children:s.isActive?"فعال":"غیرفعال"}),e.jsxs(ce,{children:[e.jsx(de,{asChild:!0,children:e.jsx(m,{variant:"ghost",size:"sm",children:e.jsx(pe,{className:"w-4 h-4"})})}),e.jsxs(me,{align:"end",style:{direction:"rtl"},children:[e.jsxs(z,{onClick:()=>G(s),children:[e.jsx(ge,{className:"w-4 h-4 ml-2"}),"ویرایش"]}),e.jsxs(z,{onClick:()=>J(s.id),className:"text-red-600",children:[e.jsx(B,{className:"w-4 h-4 ml-2"}),"حذف"]})]})]})]})]}),s.technicalSpecs.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.technicalSpecs.slice(0,3).map((d,D)=>e.jsxs(A,{variant:"outline",className:"text-xs",children:[d.name," (",d.unit||"بدون واحد",")"]},D)),s.technicalSpecs.length>3&&e.jsxs(A,{variant:"outline",className:"text-xs text-gray-500",children:["+",s.technicalSpecs.length-3," مورد دیگر"]})]})})]})},s.id)}):e.jsxs(p,{className:"p-8 text-center border border-gray-200 bg-white",children:[e.jsx(w,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg text-gray-900 mb-2",children:"هیچ دسته‌بندی یافت نشد"}),e.jsx("p",{className:"text-gray-600",children:g?"نتیجه‌ای برای جستجوی شما یافت نشد":"ابتدا دسته‌بندی‌های قطعات را تعریف کنید"})]})})]})}function He(){const[N,i]=x.useState("parts"),[v,g]=x.useState(!1),[C,r]=x.useState(!1),n=()=>{i("parts"),g(!0),setTimeout(()=>g(!1),100)},c=()=>{i("elevators"),r(!0),setTimeout(()=>r(!1),100)};return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",style:{direction:"rtl"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6 text-gray-900"}),e.jsx(E,{className:"w-6 h-6 text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl text-gray-900",children:"مدیریت دسته‌بندی‌ها"}),e.jsx("p",{className:"text-gray-600",children:"مدیریت دسته‌بندی قطعات و انواع آسانسور"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(m,{onClick:n,className:"flex items-center gap-2 bg-gray-900 hover:bg-gray-800 text-white",children:[e.jsx(S,{className:"w-4 h-4"}),"دسته‌بندی قطعات جدید"]}),e.jsxs(m,{onClick:c,variant:"outline",className:"flex items-center gap-2 border-gray-300 text-gray-700 hover:bg-gray-50",children:[e.jsx(S,{className:"w-4 h-4"}),"نوع آسانسور جدید"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(p,{className:"border border-gray-200 bg-white",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-8 h-8 text-gray-700"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"دسته‌بندی قطعات"}),e.jsx("p",{className:"text-xl text-gray-900",children:"-"})]})]})})}),e.jsx(p,{className:"border border-gray-200 bg-white",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(E,{className:"w-8 h-8 text-gray-700"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"انواع آسانسور"}),e.jsx("p",{className:"text-xl text-gray-900",children:"2"})]})]})})}),e.jsx(p,{className:"border border-gray-200 bg-white",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl text-gray-700",children:"⚡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"موارد فعال"}),e.jsx("p",{className:"text-xl text-gray-900",children:"-"})]})]})})}),e.jsx(p,{className:"border border-gray-200 bg-white",children:e.jsx(u,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl text-gray-700",children:"📊"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"کل مدیریت‌ها"}),e.jsx("p",{className:"text-xl text-gray-900",children:"-"})]})]})})})]}),e.jsxs(p,{className:"border border-gray-200 bg-white",children:[e.jsx(Y,{children:e.jsxs(Z,{className:"flex items-center gap-2 text-gray-900",children:[e.jsx("span",{className:"text-gray-700",children:"📋"}),"مدیریت دسته‌بندی‌ها"]})}),e.jsx(u,{children:e.jsxs(ee,{value:N,onValueChange:i,className:"w-full",style:{direction:"rtl"},children:[e.jsxs(se,{className:"grid w-full grid-cols-2 bg-gray-100",children:[e.jsxs(V,{value:"parts",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:text-gray-900",children:[e.jsx(w,{className:"w-4 h-4"}),"دسته‌بندی قطعات"]}),e.jsxs(V,{value:"elevators",className:"flex items-center gap-2 data-[state=active]:bg-white data-[state=active]:text-gray-900",children:[e.jsx(E,{className:"w-4 h-4"}),"انواع آسانسور"]})]}),e.jsx(M,{value:"parts",className:"mt-6",children:e.jsx(ve,{triggerDialog:v})}),e.jsx(M,{value:"elevators",className:"mt-6",children:e.jsx(je,{triggerDialog:C})})]})})]})]})}export{He as default};
