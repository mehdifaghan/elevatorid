import{r as j,j as t,B as d,C as k,b as D,c as Q,R as E,e as $,t as m}from"./index-tH8kGzNV.js";import{D as p}from"./download-BGqk_jGh.js";import{C as H}from"./copy-CIVXPvX_.js";function T({data:C,value:g,title:w="کد QR",size:l=200,showData:N=!0,className:u="",downloadButton:y=!1,filename:R}){const i=C||g||"",f=j.useRef(null),h=()=>{const n=f.current;if(!n)return null;const a=n.getContext("2d");if(!a)return null;n.width=l,n.height=l,a.fillStyle="white",a.fillRect(0,0,l,l);const c=25,r=(l-20)/c,o=10,b=i.split("").reduce((e,s)=>(e=(e<<5)-e+s.charCodeAt(0),e&e),0);a.fillStyle="black";for(let e=0;e<c;e++)for(let s=0;s<c;s++)e<7&&s<7||e<7&&s>=c-7||e>=c-7&&s<7?((e===0||e===6||s===0||s===6)&&!(e>=2&&e<=4&&s>=2&&s<=4)&&a.fillRect(o+s*r,o+e*r,r-1,r-1),e>=2&&e<=4&&s>=2&&s<=4&&a.fillRect(o+s*r,o+e*r,r-1,r-1)):(b+e*c+s)%3===0&&a.fillRect(o+s*r,o+e*r,r-1,r-1);return n.toDataURL()};j.useEffect(()=>{h()},[i,l]);const x=()=>{const n=h();if(!n)return;const a=document.createElement("a"),c=`qr-code-${i.replace(/[^a-zA-Z0-9]/g,"")}-${Date.now()}.png`;a.download=R||c,a.href=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),m.success("کد QR دانلود شد")},v=async()=>{try{await navigator.clipboard.writeText(i),m.success("داده کپی شد")}catch{m.error("خطا در کپی کردن")}};return y?t.jsxs(d,{onClick:x,size:"sm",variant:"outline",className:`gap-2 ${u}`,children:[t.jsx(p,{className:"h-4 w-4"}),"دانلود QR کد"]}):t.jsxs(k,{className:`w-fit mx-auto ${u}`,children:[t.jsx(D,{className:"text-center",children:t.jsxs(Q,{className:"flex items-center justify-center gap-2",children:[t.jsx(E,{className:"h-5 w-5"}),w]})}),t.jsxs($,{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("canvas",{ref:f,className:"border border-gray-200 rounded shadow-sm",style:{maxWidth:"100%",height:"auto"}})}),N&&t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-sm text-muted-foreground mb-3 break-all",children:["داده‌ها: ",i]}),t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsxs(d,{onClick:x,size:"sm",variant:"outline",className:"gap-2",children:[t.jsx(p,{className:"h-4 w-4"}),"دانلود"]}),t.jsxs(d,{onClick:v,size:"sm",variant:"outline",className:"gap-2",children:[t.jsx(H,{className:"h-4 w-4"}),"کپی"]})]})]})]})]})}export{T as Q};
